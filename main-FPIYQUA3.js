var Kx=Object.defineProperty,Qx=Object.defineProperties;var Yx=Object.getOwnPropertyDescriptors;var qD=Object.getOwnPropertySymbols;var Zx=Object.prototype.hasOwnProperty,Jx=Object.prototype.propertyIsEnumerable;var GD=(t,e,n)=>e in t?Kx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})Zx.call(e,n)&&GD(t,n,e[n]);if(qD)for(var n of qD(e))Jx.call(e,n)&&GD(t,n,e[n]);return t},ee=(t,e)=>Qx(t,Yx(e));var yt=null,cl=!1,og=1,Xx=null,bt=Symbol("SIGNAL");function q(t){let e=yt;return yt=t,e}function ll(){return yt}var ja={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ua(t){if(cl)throw new Error("");if(yt===null)return;yt.consumerOnSignalRead(t);let e=yt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=yt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:yt.producers,n!==void 0&&n.producer===t)){yt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===yt&&(!r||tO(i,yt)))return;let o=Go(yt),s={producer:t,consumer:yt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};yt.producersTail=s,e!==void 0?e.nextProducer=s:yt.producers=s,o&&YD(t,s)}function WD(){og++}function sg(t){if(!(Go(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===og)){if(!t.producerMustRecompute(t)&&!hl(t)){ig(t);return}t.producerRecomputeValue(t),ig(t)}}function ag(t){if(t.consumers===void 0)return;let e=cl;cl=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||eO(r)}}finally{cl=e}}function cg(){return yt?.consumerAllowSignalWrites!==!1}function eO(t){t.dirty=!0,ag(t),t.consumerMarkedDirty?.(t)}function ig(t){t.dirty=!1,t.lastCleanEpoch=og}function Ba(t){return t&&KD(t),q(t)}function KD(t){t.producersTail=void 0,t.recomputing=!0}function dl(t,e){q(e),t&&QD(t)}function QD(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Go(t))do n=ug(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function hl(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(sg(n),r!==n.version))return!0}return!1}function $a(t){if(Go(t)){let e=t.producers;for(;e!==void 0;)e=ug(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function YD(t,e){let n=t.consumersTail,r=Go(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)YD(i.producer,i)}function ug(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Go(e)){let o=e.producers;for(;o!==void 0;)o=ug(o)}return n}function Go(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function lg(t){Xx?.(t)}function tO(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function dg(t,e){return Object.is(t,e)}function fl(t,e){let n=Object.create(nO);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(sg(n),Ua(n),n.value===ul)throw n.error;return n.value};return r[bt]=n,lg(n),r}var ng=Symbol("UNSET"),rg=Symbol("COMPUTING"),ul=Symbol("ERRORED"),nO=ee(k({},ja),{value:ng,dirty:!0,error:null,equal:dg,kind:"computed",producerMustRecompute(t){return t.value===ng||t.value===rg},producerRecomputeValue(t){if(t.value===rg)throw new Error("");let e=t.value;t.value=rg;let n=Ba(t),r,i=!1;try{r=t.computation(),q(null),i=e!==ng&&e!==ul&&r!==ul&&t.equal(e,r)}catch(o){r=ul,t.error=o}finally{dl(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function rO(){throw new Error}var ZD=rO;function JD(t){ZD(t)}function hg(t){ZD=t}var iO=null;function fg(t,e){let n=Object.create(pl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>XD(n);return r[bt]=n,lg(n),[r,s=>Ha(n,s),s=>eC(n,s)]}function XD(t){return Ua(t),t.value}function Ha(t,e){cg()||JD(t),t.equal(t.value,e)||(t.value=e,oO(t))}function eC(t,e){cg()||JD(t),Ha(t,e(t.value))}var pl=ee(k({},ja),{equal:dg,value:void 0,kind:"signal"});function oO(t){t.version++,WD(),ag(t),iO?.(t)}function pg(t){let e=q(null);try{return t()}finally{q(e)}}function Y(t){return typeof t=="function"}function Wo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gl=Wo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function bi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof gl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{tC(o)}catch(s){e=e??[],s instanceof gl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)tC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&bi(n,e)}remove(e){let{_finalizers:n}=this;n&&bi(n,e),e instanceof t&&e._removeParent(this)}};Je.EMPTY=(()=>{let t=new Je;return t.closed=!0,t})();var gg=Je.EMPTY;function ml(t){return t instanceof Je||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function tC(t){Y(t)?t():t.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ko={setTimeout(t,e,...n){let{delegate:r}=Ko;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ko;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function yl(t){Ko.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(t);else throw t})}function za(){}var nC=mg("C",void 0,void 0);function rC(t){return mg("E",void 0,t)}function iC(t){return mg("N",t,void 0)}function mg(t,e,n){return{kind:t,value:e,error:n}}var Si=null;function Qo(t){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Si;if(e&&(Si={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Si;if(Si=null,n)throw r}}else t()}function oC(t){fn.useDeprecatedSynchronousErrorHandling&&Si&&(Si.errorThrown=!0,Si.error=t)}var Ai=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ml(e)&&e.add(this)):this.destination=cO}static create(e,n,r){return new Yo(e,n,r)}next(e){this.isStopped?vg(iC(e),this):this._next(e)}error(e){this.isStopped?vg(rC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vg(nC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sO=Function.prototype.bind;function yg(t,e){return sO.call(t,e)}var _g=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){vl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){vl(r)}else vl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){vl(n)}}},Yo=class extends Ai{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yg(e.next,o),error:e.error&&yg(e.error,o),complete:e.complete&&yg(e.complete,o)}):i=e}this.destination=new _g(i)}};function vl(t){fn.useDeprecatedSynchronousErrorHandling?oC(t):yl(t)}function aO(t){throw t}function vg(t,e){let{onStoppedNotification:n}=fn;n&&Ko.setTimeout(()=>n(t,e))}var cO={closed:!0,next:za,error:aO,complete:za};var Zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pn(t){return t}function _l(...t){return Eg(t)}function Eg(t){return t.length===0?pn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=lO(n)?n:new Yo(n,r,i);return Qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=sC(r),new r((i,o)=>{let s=new Yo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Zo](){return this}pipe(...n){return Eg(n)(this)}toPromise(n){return n=sC(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function sC(t){var e;return(e=t??fn.Promise)!==null&&e!==void 0?e:Promise}function uO(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function lO(t){return t&&t instanceof Ai||uO(t)&&ml(t)}function dO(t){return Y(t?.lift)}function pe(t){return e=>{if(dO(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(t,e,n,r,i){return new Ig(t,e,n,r,i)}var Ig=class extends Ai{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var aC=Wo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new El(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new aC}next(n){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gg:(this.currentObservers=null,o.push(n),new Je(()=>{this.currentObservers=null,bi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new X;return n.source=this,n}}return t.create=(e,n)=>new El(e,n),t})(),El=class extends rt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:gg}};var ut=class extends rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var wg={now(){return(wg.delegate||Date).now()},delegate:void 0};var Il=class extends Je{constructor(e,n){super()}schedule(e,n=0){return this}};var qa={setInterval(t,e,...n){let{delegate:r}=qa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=qa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Jo=class extends Il{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return qa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&qa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,bi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Xo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Xo.now=wg.now;var es=class extends Xo{constructor(e,n=Xo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Dg=new es(Jo);var wl=class extends Jo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Dl=class extends es{};var Cg=new Dl(wl);var Ot=new X(t=>t.complete());function cC(t){return t&&Y(t.schedule)}function uC(t){return t[t.length-1]}function Cl(t){return Y(uC(t))?t.pop():void 0}function Lr(t){return cC(uC(t))?t.pop():void 0}function Tl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dC(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function lC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ri(t){return this instanceof Ri?(this.v=t,this):new Ri(t)}function hC(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(R){return new Promise(function(A,x){o.push([y,R,A,x])>1||u(y,R)})},w&&(i[y]=w(i[y])))}function u(y,w){try{l(r[y](w))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof Ri?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,w){y(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function fC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof lC=="function"?lC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var bl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Sl(t){return Y(t?.then)}function Al(t){return Y(t[Zo])}function Rl(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function Nl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=hO();function Pl(t){return Y(t?.[Ml])}function xl(t){return hC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ri(n.read());if(i)return yield Ri(void 0);yield yield Ri(r)}}finally{n.releaseLock()}})}function Ol(t){return Y(t?.getReader)}function $e(t){if(t instanceof X)return t;if(t!=null){if(Al(t))return fO(t);if(bl(t))return pO(t);if(Sl(t))return gO(t);if(Rl(t))return pC(t);if(Pl(t))return mO(t);if(Ol(t))return yO(t)}throw Nl(t)}function fO(t){return new X(e=>{let n=t[Zo]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pO(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function gO(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,yl)})}function mO(t){return new X(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function pC(t){return new X(e=>{vO(t,e).catch(n=>e.error(n))})}function yO(t){return pC(xl(t))}function vO(t,e){var n,r,i,o;return dC(this,void 0,void 0,function*(){try{for(n=fC(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function kt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Vr(t,e=0){return pe((n,r)=>{n.subscribe(ge(r,i=>kt(r,t,()=>r.next(i),e),()=>kt(r,t,()=>r.complete(),e),i=>kt(r,t,()=>r.error(i),e)))})}function jr(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function gC(t,e){return $e(t).pipe(jr(e),Vr(e))}function mC(t,e){return $e(t).pipe(jr(e),Vr(e))}function yC(t,e){return new X(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function vC(t,e){return new X(n=>{let r;return kt(n,e,()=>{r=t[Ml](),kt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function kl(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{kt(n,e,()=>{let r=t[Symbol.asyncIterator]();kt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _C(t,e){return kl(xl(t),e)}function EC(t,e){if(t!=null){if(Al(t))return gC(t,e);if(bl(t))return yC(t,e);if(Sl(t))return mC(t,e);if(Rl(t))return kl(t,e);if(Pl(t))return vC(t,e);if(Ol(t))return _C(t,e)}throw Nl(t)}function Oe(t,e){return e?EC(t,e):$e(t)}function se(...t){let e=Lr(t);return Oe(t,e)}function Tg(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new X(e?i=>e.schedule(r,0,i):r)}function Fl(t){return!!t&&(t instanceof X||Y(t.lift)&&Y(t.subscribe))}var Ni=Wo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function we(t,e){return pe((n,r)=>{let i=0;n.subscribe(ge(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:_O}=Array;function EO(t,e){return _O(e)?t(...e):t(e)}function Ll(t){return we(e=>EO(t,e))}var{isArray:IO}=Array,{getPrototypeOf:wO,prototype:DO,keys:CO}=Object;function Vl(t){if(t.length===1){let e=t[0];if(IO(e))return{args:e,keys:null};if(TO(e)){let n=CO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function TO(t){return t&&typeof t=="object"&&wO(t)===DO}function jl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function bg(...t){let e=Lr(t),n=Cl(t),{args:r,keys:i}=Vl(t);if(r.length===0)return Oe([],e);let o=new X(bO(r,e,i?s=>jl(i,s):pn));return n?o.pipe(Ll(n)):o}function bO(t,e,n=pn){return r=>{IC(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)IC(e,()=>{let l=Oe(t[u],e),h=!1;l.subscribe(ge(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function IC(t,e,n){t?kt(n,t,e):e()}function wC(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?w(R):u.push(R),w=R=>{o&&e.next(R),l++;let A=!1;$e(n(R,h++)).subscribe(ge(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let x=u.shift();s?kt(e,s,()=>w(x)):w(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(ge(e,y,()=>{p=!0,m()})),()=>{a?.()}}function St(t,e,n=1/0){return Y(e)?St((r,i)=>we((o,s)=>e(r,o,i,s))($e(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>wC(r,i,t,n)))}function DC(t=1/0){return St(pn,t)}function CC(){return DC(1)}function ts(...t){return CC()(Oe(t,Lr(t)))}function Ga(t){return new X(e=>{$e(t()).subscribe(e)})}function Sg(...t){let e=Cl(t),{args:n,keys:r}=Vl(t),i=new X(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(n[h]).subscribe(ge(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?jl(r,a):a),o.complete())}))}});return e?i.pipe(Ll(e)):i}function gn(t,e){return pe((n,r)=>{let i=0;n.subscribe(ge(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Wa(t){return pe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ge(n,void 0,void 0,s=>{o=$e(t(s,Wa(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ul(t,e){return Y(e)?St(t,e,1):St(t,1)}function Ag(t){return pe((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function or(t){return t<=0?()=>Ot:pe((e,n)=>{let r=0;e.subscribe(ge(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function TC(t=SO){return pe((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function SO(){return new Ni}function Rg(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function sr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?gn((i,o)=>t(i,o,r)):pn,or(1),n?Ag(e):TC(()=>new Ni))}function Bl(t){return t<=0?()=>Ot:pe((e,n)=>{let r=[];e.subscribe(ge(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function $l(...t){let e=Lr(t);return pe((n,r)=>{(e?ts(t,n,e):ts(t,n)).subscribe(r)})}function Mn(t,e){return pe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ge(r,u=>{i?.unsubscribe();let l=0,h=o++;$e(t(u,h)).subscribe(i=ge(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ka(t){return pe((e,n)=>{$e(t).subscribe(ge(n,()=>n.complete(),za)),!n.closed&&e.subscribe(n)})}function At(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ge(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pn}var Ng;function Hl(){return Ng}function Pn(t){let e=Ng;return Ng=t,e}var bC=Symbol("NotFound");function ns(t){return t===bC||t?.name==="\u0275NotFound"}var Pi=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Gg=new Pi("21.0.6");var Kl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",L=class extends Error{code;constructor(e,n){super(is(e,n)),this.code=e}};function NO(t){return`NG0${Math.abs(t)}`}function is(t,e){return`${NO(t)}${e?": "+e:""}`}var Fi=globalThis;function me(t){for(let e in t)if(t[e]===me)return e;throw Error("")}function MC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function cr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(cr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Wg(t,e){return t?e?`${t} ${e}`:t:e||""}var MO=me({__forward_ref__:me});function en(t){return t.__forward_ref__=en,t.toString=function(){return cr(this())},t}function lt(t){return Kg(t)?t():t}function Kg(t){return typeof t=="function"&&t.hasOwnProperty(MO)&&t.__forward_ref__===en}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ur(t){return{providers:t.providers||[],imports:t.imports||[]}}function ec(t){return PO(t,Ql)}function Qg(t){return ec(t)!==null}function PO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function xO(t){let e=t?.[Ql]??null;return e||null}function Pg(t){return t&&t.hasOwnProperty(ql)?t[ql]:null}var Ql=me({\u0275prov:me}),ql=me({\u0275inj:me}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Yg(t){return t&&!!t.\u0275providers}var Zg=me({\u0275cmp:me}),Jg=me({\u0275dir:me}),Xg=me({\u0275pipe:me}),em=me({\u0275mod:me}),Ya=me({\u0275fac:me}),Li=me({__NG_ELEMENT_ID__:me}),SC=me({__NG_ENV_ID__:me});function tm(t){return Yl(t,"@NgModule"),t[em]||null}function Hr(t){return Yl(t,"@Component"),t[Zg]||null}function nm(t){return Yl(t,"@Directive"),t[Jg]||null}function PC(t){return Yl(t,"@Pipe"),t[Xg]||null}function Yl(t,e){if(t==null)throw new L(-919,!1)}function Vi(t){return typeof t=="string"?t:t==null?"":String(t)}function xC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Vi(t)}var OC=me({ngErrorCode:me}),OO=me({ngErrorMessage:me}),kO=me({ngTokenPath:me});function rm(t,e){return kC("",-200,e)}function Zl(t,e){throw new L(-201,!1)}function kC(t,e,n){let r=new L(e,t);return r[OC]=e,r[OO]=t,n&&(r[kO]=n),r}function FO(t){return t[OC]}var xg;function FC(){return xg}function Rt(t){let e=xg;return xg=t,e}function im(t,e,n){let r=ec(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Zl(t,"")}var LO={},Mi=LO,Og="__NG_DI_FLAG__",kg=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=xi(n)||0;try{return this.injector.get(e,r&8?null:Mi,r)}catch(i){if(ns(i))return i;throw i}}};function VO(t,e=0){let n=Hl();if(n===void 0)throw new L(-203,!1);if(n===null)return im(t,void 0,e);{let r=jO(e),i=n.retrieve(t,r);if(ns(i)){if(r.optional)return null;throw i}return i}}function te(t,e=0){return(FC()||VO)(lt(t),e)}function M(t,e){return te(t,xi(e))}function xi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function jO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Fg(t){let e=[];for(let n=0;n<t.length;n++){let r=lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=UO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(te(i,o))}else e.push(te(r))}return e}function LC(t,e){return t[Og]=e,t.prototype[Og]=e,t}function UO(t){return t[Og]}function Ur(t,e){let n=t.hasOwnProperty(Ya);return n?t[Ya]:null}function Jl(t,e){t.forEach(n=>Array.isArray(n)?Jl(n,e):e(n))}function om(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function VC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function jC(t,e,n){let r=os(t,e);return r>=0?t[r|1]=n:(r=~r,VC(t,r,e,n)),r}function Xl(t,e){let n=os(t,e);if(n>=0)return t[n|1]}function os(t,e){return BO(t,e,1)}function BO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var zr={},$t=[],ji=new j(""),sm=new j("",-1),am=new j(""),Za=class{get(e,n=Mi){if(n===Mi){let i=kC("",-201);throw i.name="\u0275NotFound",i}return n}};function Ht(t){return{\u0275providers:t}}function UC(t){return Ht([{provide:ji,multi:!0,useValue:t}])}function BC(...t){return{\u0275providers:cm(!0,t),\u0275fromNgModule:!0}}function cm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Jl(e,s=>{let a=s;Gl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&$C(i,o),n}function $C(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];um(i,o=>{e(o,r)})}}function Gl(t,e,n,r){if(t=lt(t),!t)return!1;let i=null,o=Pg(t),s=!o&&Hr(t);if(!o&&!s){let u=t.ngModule;if(o=Pg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Gl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Jl(o.imports,h=>{Gl(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&$C(l,e)}if(!a){let l=Ur(i)||(()=>new i);e({provide:i,useFactory:l,deps:$t},i),e({provide:am,useValue:i,multi:!0},i),e({provide:ji,useValue:()=>te(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;um(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function um(t,e){for(let n of t)Yg(n)&&(n=n.\u0275providers),Array.isArray(n)?um(n,e):e(n)}var $O=me({provide:String,useValue:me});function HC(t){return t!==null&&typeof t=="object"&&$O in t}function HO(t){return!!(t&&t.useExisting)}function zO(t){return!!(t&&t.useFactory)}function Oi(t){return typeof t=="function"}function zC(t){return!!t.useClass}var nc=new j(""),zl={},AC={},Mg;function rc(){return Mg===void 0&&(Mg=new Za),Mg}var Xe=class{},ki=class extends Xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Vg(e,s=>this.processProvider(s)),this.records.set(sm,rs(void 0,this)),i.has("environment")&&this.records.set(Xe,rs(void 0,this));let o=this.records.get(nc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(am,$t,{self:!0}))}retrieve(e,n){let r=xi(n)||0;try{return this.get(e,Mi,r)}catch(i){if(ns(i))return i;throw i}}destroy(){Qa(this),this._destroyed=!0;let e=q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return Qa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Qa(this);let n=Pn(this),r=Rt(void 0),i;try{return e()}finally{Pn(n),Rt(r)}}get(e,n=Mi,r){if(Qa(this),e.hasOwnProperty(SC))return e[SC](this);let i=xi(r),o,s=Pn(this),a=Rt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=QO(e)&&ec(e);h&&this.injectableDefInScope(h)?l=rs(Lg(e),zl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?rc():this.parent;return n=i&8&&n===Mi?null:n,u.get(e,n)}catch(u){let l=FO(u);throw l===-200||l===-201?new L(l,null):u}finally{Rt(a),Pn(s)}}resolveInjectorInitializers(){let e=q(null),n=Pn(this),r=Rt(void 0),i;try{let o=this.get(ji,$t,{self:!0});for(let s of o)s()}finally{Pn(n),Rt(r),q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(cr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=lt(e);let n=Oi(e)?e:lt(e&&e.provide),r=GO(e);if(!Oi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=rs(void 0,zl,!0),i.factory=()=>Fg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=q(null);try{if(n.value===AC)throw rm(cr(e));return n.value===zl&&(n.value=AC,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&KO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Lg(t){let e=ec(t),n=e!==null?e.factory:Ur(t);if(n!==null)return n;if(t instanceof j)throw new L(204,!1);if(t instanceof Function)return qO(t);throw new L(204,!1)}function qO(t){if(t.length>0)throw new L(204,!1);let n=xO(t);return n!==null?()=>n.factory(t):()=>new t}function GO(t){if(HC(t))return rs(void 0,t.useValue);{let e=lm(t);return rs(e,zl)}}function lm(t,e,n){let r;if(Oi(t)){let i=lt(t);return Ur(i)||Lg(i)}else if(HC(t))r=()=>lt(t.useValue);else if(zO(t))r=()=>t.useFactory(...Fg(t.deps||[]));else if(HO(t))r=(i,o)=>te(lt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=lt(t&&(t.useClass||t.provide));if(WO(t))r=()=>new i(...Fg(t.deps));else return Ur(i)||Lg(i)}return r}function Qa(t){if(t.destroyed)throw new L(205,!1)}function rs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function WO(t){return!!t.deps}function KO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function QO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Vg(t,e){for(let n of t)Array.isArray(n)?Vg(n,e):n&&Yg(n)?Vg(n.\u0275providers,e):e(n)}function et(t,e){let n;t instanceof ki?(Qa(t),n=t):n=new kg(t);let r,i=Pn(n),o=Rt(void 0);try{return e()}finally{Pn(i),Rt(o)}}function qC(){return FC()!==void 0||Hl()!=null}var mn=0,G=1,K=2,it=3,tn=4,nn=5,ss=6,as=7,Le=8,lr=9,On=10,Me=11,cs=12,dm=13,Ui=14,zt=15,Bi=16,$i=17,Hi=18,ic=19,hm=20,ar=21,ed=22,oc=23,qt=24,zi=25,qi=26,Ve=27,GC=1,fm=6,qr=7,sc=8,ac=9,je=10;function kn(t){return Array.isArray(t)&&typeof t[GC]=="object"}function yn(t){return Array.isArray(t)&&t[GC]===!0}function pm(t){return(t.flags&4)!==0}function Gr(t){return t.componentOffset>-1}function td(t){return(t.flags&1)===1}function Fn(t){return!!t.template}function us(t){return(t[K]&512)!==0}function Gi(t){return(t[K]&256)===256}var gm="svg",WC="math";function rn(t){for(;Array.isArray(t);)t=t[mn];return t}function mm(t,e){return rn(e[t])}function vn(t,e){return rn(e[t.index])}function cc(t,e){return t.data[e]}function nd(t,e){return t[e]}function ym(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function on(t,e){let n=e[t];return kn(n)?n:n[mn]}function rd(t){return(t[K]&128)===128}function KC(t){return yn(t[it])}function Ln(t,e){return e==null?null:t[e]}function vm(t){t[$i]=0}function _m(t){t[K]&1024||(t[K]|=1024,rd(t)&&ls(t))}function QC(t,e){for(;t>0;)e=e[Ui],t--;return e}function uc(t){return!!(t[K]&9216||t[qt]?.dirty)}function id(t){t[On].changeDetectionScheduler?.notify(8),t[K]&64&&(t[K]|=1024),uc(t)&&ls(t)}function ls(t){t[On].changeDetectionScheduler?.notify(0);let e=Br(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!rd(e)));)e=Br(e)}function Em(t,e){if(Gi(t))throw new L(911,!1);t[ar]===null&&(t[ar]=[]),t[ar].push(e)}function YC(t,e){if(t[ar]===null)return;let n=t[ar].indexOf(e);n!==-1&&t[ar].splice(n,1)}function Br(t){let e=t[it];return yn(e)?e[it]:e}function ZC(t){return t[as]??=[]}function JC(t){return t.cleanup??=[]}var ne={lFrame:hT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jg=!1;function XC(){return ne.lFrame.elementDepthCount}function eT(){ne.lFrame.elementDepthCount++}function Im(){ne.lFrame.elementDepthCount--}function tT(){return ne.bindingsEnabled}function nT(){return ne.skipHydrationRootTNode!==null}function wm(t){return ne.skipHydrationRootTNode===t}function Dm(){ne.skipHydrationRootTNode=null}function ie(){return ne.lFrame.lView}function vt(){return ne.lFrame.tView}function lc(t){return ne.lFrame.contextLView=t,t[Le]}function dc(t){return ne.lFrame.contextLView=null,t}function Ft(){let t=Cm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Cm(){return ne.lFrame.currentTNode}function rT(){let t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ds(t,e){let n=ne.lFrame;n.currentTNode=t,n.isParent=e}function Tm(){return ne.lFrame.isParent}function iT(){ne.lFrame.isParent=!1}function bm(){return jg}function Sm(t){let e=jg;return jg=t,e}function od(){let t=ne.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function oT(){return ne.lFrame.bindingIndex}function sT(t){return ne.lFrame.bindingIndex=t}function Wi(){return ne.lFrame.bindingIndex++}function Am(t){let e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function aT(){return ne.lFrame.inI18n}function cT(t,e){let n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,sd(e)}function uT(){return ne.lFrame.currentDirectiveIndex}function sd(t){ne.lFrame.currentDirectiveIndex=t}function lT(t){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Rm(t){ne.lFrame.currentQueryIndex=t}function YO(t){let e=t[G];return e.type===2?e.declTNode:e.type===1?t[nn]:null}function Nm(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=YO(o),i===null||(o=o[Ui],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ne.lFrame=dT();return r.currentTNode=e,r.lView=t,!0}function ad(t){let e=dT(),n=t[G];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function dT(){let t=ne.lFrame,e=t===null?null:t.child;return e===null?hT(t):e}function hT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function fT(){let t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Mm=fT;function cd(){let t=fT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pT(t){return(ne.lFrame.contextLView=QC(t,ne.lFrame.contextLView))[Le]}function dr(){return ne.lFrame.selectedIndex}function Wr(t){ne.lFrame.selectedIndex=t}function ud(){let t=ne.lFrame;return cc(t.tView,t.selectedIndex)}function ld(){ne.lFrame.currentNamespace=gm}function gT(){return ne.lFrame.currentNamespace}var mT=!0;function dd(){return mT}function hd(t){mT=t}function Ug(t,e=null,n=null,r){let i=Pm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Pm(t,e=null,n=null,r,i=new Set){let o=[n||$t,BC(t)];return r=r||(typeof t=="object"?void 0:cr(t)),new ki(o,e||rc(),r||null,i)}var ze=class t{static THROW_IF_NOT_FOUND=Mi;static NULL=new Za;static create(e,n){if(Array.isArray(e))return Ug({name:""},n,e,"");{let r=e.name??"";return Ug({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>te(sm)});static __NG_ELEMENT_ID__=-1},tt=new j(""),_n=(()=>{class t{static __NG_ELEMENT_ID__=ZO;static __NG_ENV_ID__=n=>n}return t})(),Bg=class extends _n{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Gi(this._lView)}onDestroy(e){let n=this._lView;return Em(n,e),()=>YC(n,e)}};function ZO(){return new Bg(ie())}var yT=!1,hr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ut(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new X(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),$g=class extends rt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qC()&&(this.destroyRef=M(_n,{optional:!0})??void 0,this.pendingTasks=M(hr,{optional:!0})??void 0)}emit(e){let n=q(null);try{super.next(e)}finally{q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},He=$g;function Wl(...t){}function xm(t){let e,n;function r(){t=Wl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Om(t){return queueMicrotask(()=>t()),()=>{t=Wl}}var km="isAngularZone",Ja=km+"_ID",JO=0,Ae=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new He(!1);onMicrotaskEmpty=new He(!1);onStable=new He(!1);onError=new He(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=yT}=e;if(typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(km)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new L(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XO,Wl,Wl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},XO={};function Fm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ek(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){xm(()=>{t.callbackScheduled=!1,Hg(t),t.isCheckStableRunning=!0,Fm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Hg(t)}function tk(t){let e=()=>{ek(t)},n=JO++;t._inner=t._inner.fork({name:"angular",properties:{[km]:!0,[Ja]:n,[Ja+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(nk(u))return r.invokeTask(o,s,a,u);try{return RC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),NC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return RC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rk(u)&&e(),NC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Hg(t),Fm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Hg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function RC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function NC(t){t._nesting--,Fm(t)}var Xa=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new He;onMicrotaskEmpty=new He;onStable=new He;onError=new He;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nk(t){return vT(t,"__ignore_ng_zone__")}function rk(t){return vT(t,"__scheduler_tick__")}function vT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var xn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Gt=new j("",{factory:()=>{let t=M(Ae),e=M(Xe),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(xn),n.handleError(r))})}}}),_T={provide:ji,useValue:()=>{let t=M(xn,{optional:!0})},multi:!0},ik=new j("",{factory:()=>{let t=M(tt).defaultView;if(!t)return;let e=M(Gt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(_n).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Lm(){return Ht([UC(()=>void M(ik))])}function sn(t,e){let[n,r,i]=fg(t,e?.equal),o=n,s=o[bt];return o.set=r,o.update=i,o.asReadonly=ET.bind(o),o}function ET(){let t=this[bt];if(t.readonlyFn===void 0){let e=()=>this();e[bt]=t,t.readonlyFn=e}return t.readonlyFn}var fd=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=ok}return t})();function ok(){return new fd(ie(),Ft())}var $r=class{},hc=new j("",{factory:()=>!0});var Vm=new j(""),hs=(()=>{class t{internalPendingTasks=M(hr);scheduler=M($r);errorHandler=M(Gt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),jm=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new zg})}return t})(),zg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},qg=class{[bt];constructor(e){this[bt]=e}destroy(){this[bt].destroy()}};function Ue(t){return pg(t)}function _s(t){return{toString:t}.toString()}var pd="__parameters__";function hk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function fk(t,e,n){return _s(()=>{let r=hk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(pd)?u[pd]:Object.defineProperty(u,pd,{value:[]})[pd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Wt=LC(fk("Optional"),8);function pk(t){return typeof t=="function"}function QT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var _d=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},fr=(()=>{let t=()=>YT;return t.ngInherit=!0,t})();function YT(t){return t.type.prototype.ngOnChanges&&(t.setInput=mk),gk}function gk(){let t=JT(this),e=t?.current;if(e){let n=t.previous;if(n===zr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mk(t,e,n,r,i){let o=this.declaredInputs[r],s=JT(t)||yk(t,{previous:zr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new _d(l&&l.currentValue,n,u===zr),QT(t,e,i,n)}var ZT="__ngSimpleChanges__";function JT(t){return t[ZT]||null}function yk(t,e){return t[ZT]=e}var IT=[];var ye=function(t,e=null,n){for(let r=0;r<IT.length;r++){let i=IT[r];i(t,e,n)}},le=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(le||{});function vk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=YT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function _k(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function md(t,e,n){XT(t,e,3,n)}function yd(t,e,n,r){(t[K]&3)===n&&XT(t,e,n,r)}function Um(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function XT(t,e,n,r){let i=r!==void 0?t[$i]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[$i]+=65536),(a<o||o==-1)&&(Ek(t,n,e,u),t[$i]=(t[$i]&4294901760)+u+2),u++}function wT(t,e){ye(le.LifecycleHookStart,t,e);let n=q(null);try{e.call(t)}finally{q(n),ye(le.LifecycleHookEnd,t,e)}}function Ek(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[K]>>14<t[$i]>>16&&(t[K]&3)===e&&(t[K]+=16384,wT(a,o)):wT(a,o)}var ps=-1,Qi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Ik(t){return(t.flags&8)!==0}function wk(t){return(t.flags&16)!==0}function Dk(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Tk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Ck(t){return t===3||t===4||t===6}function Tk(t){return t.charCodeAt(0)===64}function gs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?DT(t,n,i,null,e[++r]):DT(t,n,i,null,null))}}return t}function DT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function eb(t){return t!==ps}function Ed(t){return t&32767}function bk(t){return t>>16}function Id(t,e){let n=bk(t),r=e;for(;n>0;)r=r[Ui],n--;return r}var Jm=!0;function wd(t){let e=Jm;return Jm=t,e}var Sk=256,tb=Sk-1,nb=5,Ak=0,Vn={};function Rk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Li)&&(r=n[Li]),r==null&&(r=n[Li]=Ak++);let i=r&tb,o=1<<i;e.data[t+(i>>nb)]|=o}function Dd(t,e){let n=rb(t,e);if(n!==-1)return n;let r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,Bm(r.data,t),Bm(e,null),Bm(r.blueprint,null));let i=_y(t,e),o=t.injectorIndex;if(eb(i)){let s=Ed(i),a=Id(i,e),u=a[G].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Bm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function rb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _y(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=cb(i),r===null)return ps;if(n++,i=i[Ui],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ps}function Xm(t,e,n){Rk(t,e,n)}function ib(t,e,n){if(n&8||t!==void 0)return t;Zl(e,"NodeInjector")}function ob(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[lr],o=Rt(void 0);try{return i?i.get(e,r,n&8):im(e,r,n&8)}finally{Rt(o)}}return ib(r,e,n)}function sb(t,e,n,r=0,i){if(t!==null){if(e[K]&2048&&!(r&2)){let s=Ok(t,e,n,r,Vn);if(s!==Vn)return s}let o=ab(t,e,n,r,Vn);if(o!==Vn)return o}return ob(e,n,r,i)}function ab(t,e,n,r,i){let o=Pk(n);if(typeof o=="function"){if(!Nm(e,t,r))return r&1?ib(i,n,r):ob(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Zl(n);else return s}finally{Mm()}}else if(typeof o=="number"){let s=null,a=rb(t,e),u=ps,l=r&1?e[zt][nn]:null;for((a===-1||r&4)&&(u=a===-1?_y(t,e):e[a+8],u===ps||!TT(r,!1)?a=-1:(s=e[G],a=Ed(u),e=Id(u,e)));a!==-1;){let h=e[G];if(CT(o,a,h.data)){let p=Nk(a,e,n,s,r,l);if(p!==Vn)return p}u=e[a+8],u!==ps&&TT(r,e[G].data[a+8]===l)&&CT(o,a,e)?(s=h,a=Ed(u),e=Id(u,e)):a=-1}}return i}function Nk(t,e,n,r,i,o){let s=e[G],a=s.data[t+8],u=r==null?Gr(a)&&Jm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Mk(a,s,n,u,l);return h!==null?Cd(e,s,h,a,i):Vn}function Mk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let w=s[y];if(y<u&&n===w||y>=u&&w.type===n)return y}if(i){let y=s[u];if(y&&Fn(y)&&y.type===n)return u}return null}function Cd(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Qi){let a=o;if(a.resolving){let y=xC(s[n]);throw rm(y)}let u=wd(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Rt(a.injectImpl):null,m=Nm(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&vk(n,s[n],e)}finally{p!==null&&Rt(p),wd(u),a.resolving=!1,Mm()}}return o}function Pk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Li)?t[Li]:void 0;return typeof e=="number"?e>=0?e&tb:xk:e}function CT(t,e,n){let r=1<<t;return!!(n[e+(t>>nb)]&r)}function TT(t,e){return!(t&2)&&!(t&1&&e)}var Ki=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return sb(this._tNode,this._lView,e,xi(r),n)}};function xk(){return new Ki(Ft(),ie())}function Bn(t){return _s(()=>{let e=t.prototype.constructor,n=e[Ya]||ey(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ya]||ey(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ey(t){return Kg(t)?()=>{let e=ey(lt(t));return e&&e()}:Ur(t)}function Ok(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[K]&2048&&!us(s);){let a=ab(o,s,n,r|2,Vn);if(a!==Vn)return a;let u=o.parent;if(!u){let l=s[hm];if(l){let h=l.get(n,Vn,r);if(h!==Vn)return h}u=cb(s),s=s[Ui]}o=u}return i}function cb(t){let e=t[G],n=e.type;return n===2?e.declTNode:n===1?t[nn]:null}function kk(){return Ey(Ft(),ie())}function Ey(t,e){return new Kr(vn(t,e))}var Kr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=kk}return t})();function ub(t){return(t.flags&128)===128}var Iy=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Iy||{}),lb=new Map,Fk=0;function Lk(){return Fk++}function Vk(t){lb.set(t[ic],t)}function ty(t){lb.delete(t[ic])}var bT="__ngContext__";function ms(t,e){kn(e)?(t[bT]=e[ic],Vk(e)):t[bT]=e}function db(t){return fb(t[cs])}function hb(t){return fb(t[tn])}function fb(t){for(;t!==null&&!yn(t);)t=t[tn];return t}var jk;function wy(t){jk=t}var jd=new j("",{factory:()=>Uk}),Uk="ng";var Ud=new j(""),to=new j("",{providedIn:"platform",factory:()=>"unknown"});var Bd=new j("",{factory:()=>M(tt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pb="r";var gb="di";var mb=!1,yb=new j("",{factory:()=>mb});var Bk=(t,e,n,r)=>{};function $k(t,e,n,r){Bk(t,e,n,r)}function Dy(t){return(t.flags&32)===32}var Hk=()=>null;function vb(t,e,n=!1){return Hk(t,e,n)}function _b(t,e){let n=t.contentQueries;if(n!==null){let r=q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Rm(o),a.contentQueries(2,e[s],s)}}}finally{q(r)}}}function ny(t,e,n){Rm(0);let r=q(null);try{e(t,n)}finally{q(r)}}function Eb(t,e,n){if(pm(e)){let r=q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{q(r)}}}var In=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(In||{});var Td=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kl})`}};function Cy(t){return t instanceof Td?t.changingThisBreaksApplicationSecurity:t}function Ib(t,e){let n=wb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Kl})`)}return n===e}function wb(t){return t instanceof Td&&t.getTypeName()||null}var zk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Db(t){return t=String(t),t.match(zk)?t:"unsafe:"+t}function qk(t,e){return t.createText(e)}function Gk(t,e,n){t.setValue(e,n)}function Cb(t,e,n){return t.createElement(e,n)}function bd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Tb(t,e,n){t.appendChild(e,n)}function ST(t,e,n,r,i){r!==null?bd(t,e,n,r,i):Tb(t,e,n)}function bb(t,e,n,r){t.removeChild(null,e,n,r)}function Wk(t,e,n){t.setAttribute(e,"style",n)}function Kk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Sb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Dk(t,e,r),i!==null&&Kk(t,e,i),o!==null&&Wk(t,e,o)}var Ty=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Ty||{});function by(t){let e=Qk();return e?e.sanitize(Ty.URL,t)||"":Ib(t,"URL")?Cy(t):Db(Vi(t))}function Qk(){let t=ie();return t&&t[On].sanitizer}function Ab(t){return t instanceof Function?t():t}function Yk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Rb="ng-template";function Zk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Yk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Sy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Sy(t){return t.type===4&&t.value!==Rb}function Jk(t,e,n){let r=t.type===4&&!n?Rb:t.value;return e===r}function Xk(t,e,n){let r=4,i=t.attrs,o=i!==null?n1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!En(r)&&!En(u))return!1;if(s&&En(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Jk(t,u,n)||u===""&&e.length===1){if(En(r))return!1;s=!0}}else if(r&8){if(i===null||!Zk(t,i,u,n)){if(En(r))return!1;s=!0}}else{let l=e[++a],h=e1(u,i,Sy(t),n);if(h===-1){if(En(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(En(r))return!1;s=!0}}}}return En(r)||s}function En(t){return(t&1)===0}function e1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return r1(e,t)}function t1(t,e,n=!1){for(let r=0;r<e.length;r++)if(Xk(t,e[r],n))return!0;return!1}function n1(t){for(let e=0;e<t.length;e++){let n=t[e];if(Ck(n))return e}return t.length}function r1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function AT(t,e){return t?":not("+e.trim()+")":e}function i1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!En(s)&&(e+=AT(o,i),i=""),r=s,o=o||!En(r);n++}return i!==""&&(e+=AT(o,i)),e}function o1(t){return t.map(i1).join(",")}function s1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!En(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var an={};function Ay(t,e,n,r,i,o,s,a,u,l,h){let p=Ve+r,m=p+i,y=a1(p,m),w=typeof l=="function"?l():l;return y[G]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function a1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:an);return n}function c1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ay(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ry(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[mn]=i,p[K]=r|4|128|8|64|1024,(l!==null||t&&t[K]&2048)&&(p[K]|=2048),vm(p),p[it]=p[Ui]=t,p[Le]=n,p[On]=s||t&&t[On],p[Me]=a||t&&t[Me],p[lr]=u||t&&t[lr]||null,p[nn]=o,p[ic]=Lk(),p[ss]=h,p[hm]=l,p[zt]=e.type==2?t[zt]:p,p}function u1(t,e,n){let r=vn(e,t),i=c1(n),o=t[On].rendererFactory,s=Ny(t,Ry(t,i,null,Nb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Nb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Mb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ny(t,e){return t[cs]?t[dm][tn]=e:t[cs]=e,t[dm]=e,e}function Be(t=1){Pb(vt(),ie(),dr()+t,!1)}function Pb(t,e,n,r){if(!r)if((e[K]&3)===3){let o=t.preOrderCheckHooks;o!==null&&md(e,o,n)}else{let o=t.preOrderHooks;o!==null&&yd(e,o,0,n)}Wr(n)}var $d=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})($d||{});function ry(t,e,n,r){let i=q(null);try{let[o,s,a]=t.inputs[n],u=null;(s&$d.SignalBased)!==0&&(u=e[o][bt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):QT(e,u,o,r)}finally{q(i)}}var jn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(jn||{}),l1;function My(t,e){return l1(t,e)}var Yi=new Set,Hd=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Hd||{}),no=new j(""),RT=new Set;function Qr(t){RT.has(t)||(RT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Py=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),xb=[0,1,2,3],Ob=(()=>{class t{ngZone=M(Ae);scheduler=M($r);errorHandler=M(xn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(no,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ye(le.AfterRenderHooksStart),this.executing=!0;for(let r of xb)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ye(le.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[zi]??=[]).push(n),ls(r),r[K]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Hd.AFTER_NEXT_RENDER,n):n()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Sd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[zi];e&&(this.view[zi]=e.filter(n=>n!==this))}};function zd(t,e){let n=e?.injector??M(ze);return Qr("NgAfterNextRender"),h1(t,n,e,!0)}function d1(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function h1(t,e,n,r){let i=e.get(Py);i.impl??=e.get(Ob);let o=e.get(no,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(_n):null,a=e.get(fd,null,{optional:!0}),u=new Sd(i.impl,d1(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var kb=new j("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:M(Xe)})});function Fb(t,e,n){let r=t.get(kb);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function f1(t,e){let n=t.get(kb);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function p1(t,e){for(let[n,r]of e)Fb(t,r.animateFns)}function NT(t,e,n,r){let i=t?.[qi]?.enter;e!==null&&i&&i.has(n.index)&&p1(r,i)}function fs(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;yn(i)?u=i:kn(i)&&(l=!0,i=i[mn]);let h=rn(i);t===0&&r!==null?(NT(a,r,o,n),s==null?Tb(e,r,h):bd(e,r,h,s||null,!0)):t===1&&r!==null?(NT(a,r,o,n),bd(e,r,h,s||null,!0)):t===2?MT(a,o,n,p=>{bb(e,h,l,p)}):t===3&&MT(a,o,n,()=>{e.destroyNode(h)}),u!=null&&S1(e,t,n,u,o,r,s)}}function g1(t,e){Lb(t,e),e[mn]=null,e[nn]=null}function m1(t,e,n,r,i,o){r[mn]=i,r[nn]=e,Gd(t,r,n,1,i,o)}function Lb(t,e){e[On].changeDetectionScheduler?.notify(9),Gd(t,e,e[Me],2,null,null)}function y1(t){let e=t[cs];if(!e)return $m(t[G],t);for(;e;){let n=null;if(kn(e))n=e[cs];else{let r=e[je];r&&(n=r)}if(!n){for(;e&&!e[tn]&&e!==t;)kn(e)&&$m(e[G],e),e=e[it];e===null&&(e=t),kn(e)&&$m(e[G],e),n=e&&e[tn]}e=n}}function xy(t,e){let n=t[ac],r=n.indexOf(e);n.splice(r,1)}function qd(t,e){if(Gi(e))return;let n=e[Me];n.destroyNode&&Gd(t,e,n,3,null,null),y1(e)}function $m(t,e){if(Gi(e))return;let n=q(null);try{e[K]&=-129,e[K]|=256,e[qt]&&$a(e[qt]),E1(t,e),_1(t,e),e[G].type===1&&e[Me].destroy();let r=e[Bi];if(r!==null&&yn(e[it])){r!==e[it]&&xy(r,e);let i=e[Hi];i!==null&&i.detachView(t)}ty(e)}finally{q(n)}}function MT(t,e,n,r){let i=t?.[qi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Yi.add(t),Fb(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),v1(t,r)}else t&&Yi.delete(t),r(!1)},i)}function v1(t,e){let n=t[qi]?.running;if(n){n.then(()=>{t[qi].running=void 0,Yi.delete(t),e(!0)});return}e(!1)}function _1(t,e){let n=t.cleanup,r=e[as];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[as]=null);let i=e[ar];if(i!==null){e[ar]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[oc];if(o!==null){e[oc]=null;for(let s of o)s.destroy()}}function E1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Qi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ye(le.LifecycleHookStart,a,u);try{u.call(a)}finally{ye(le.LifecycleHookEnd,a,u)}}else{ye(le.LifecycleHookStart,i,o);try{o.call(i)}finally{ye(le.LifecycleHookEnd,i,o)}}}}}function I1(t,e,n){return w1(t,e.parent,n)}function w1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[mn];if(Gr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===In.None||i===In.Emulated)return null}return vn(r,n)}function D1(t,e,n){return T1(t,e,n)}function C1(t,e,n){return t.type&40?vn(t,n):null}var T1=C1,PT;function Oy(t,e,n,r){let i=I1(t,r,e),o=e[Me],s=r.parent||e[nn],a=D1(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ST(o,i,n[u],a,!1);else ST(o,i,n,a,!1);PT!==void 0&&PT(o,r,e,n,i)}function pc(t,e){if(e!==null){let n=e.type;if(n&3)return vn(e,t);if(n&4)return iy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return pc(t,r);{let i=t[e.index];return yn(i)?iy(-1,i):rn(i)}}else{if(n&128)return pc(t,e.next);if(n&32)return My(e,t)()||rn(t[e.index]);{let r=Vb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Br(t[zt]);return pc(i,r)}else return pc(t,e.next)}}}return null}function Vb(t,e){if(e!==null){let r=t[zt][nn],i=e.projection;return r.projection[i]}return null}function iy(t,e){let n=je+t+1;if(n<e.length){let r=e[n],i=r[G].firstChild;if(i!==null)return pc(r,i)}return e[qr]}function ky(t,e,n,r,i,o,s){for(;n!=null;){let a=r[lr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&ms(rn(u),r),n.flags|=2),!Dy(n))if(l&8)ky(t,e,n.child,r,i,o,!1),fs(e,t,a,i,u,n,o,r);else if(l&32){let h=My(n,r),p;for(;p=h();)fs(e,t,a,i,p,n,o,r);fs(e,t,a,i,u,n,o,r)}else l&16?b1(t,e,r,n,i,o):fs(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Gd(t,e,n,r,i,o){ky(n,r,t.firstChild,e,i,o,!1)}function b1(t,e,n,r,i,o){let s=n[zt],u=s[nn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];fs(e,t,n[lr],i,h,r,o,n)}else{let l=u,h=s[it];ub(r)&&(l.flags|=128),ky(t,e,l,h,i,o,!0)}}function S1(t,e,n,r,i,o,s){let a=r[qr],u=rn(r);a!==u&&fs(e,t,n,o,a,i,s);for(let l=je;l<r.length;l++){let h=r[l];Gd(h[G],h,t,e,o,a)}}function A1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:jn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=jn.Important),t.setStyle(n,r,i,o))}}function jb(t,e,n,r,i){let o=dr(),s=r&2;try{Wr(-1),s&&e.length>Ve&&Pb(t,e,Ve,!1);let a=s?le.TemplateUpdateStart:le.TemplateCreateStart;ye(a,i,n),n(r,i)}finally{Wr(o);let a=s?le.TemplateUpdateEnd:le.TemplateCreateEnd;ye(a,i,n)}}function Ub(t,e,n){k1(t,e,n),(n.flags&64)===64&&F1(t,e,n)}function Fy(t,e,n=vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function R1(t,e,n,r){let o=r.get(yb,mb)||n===In.ShadowDom||n===In.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return N1(s),s}function N1(t){M1(t)}var M1=()=>null;function P1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Bb(t,e,n,r,i,o){let s=e[G];if(Ly(t,s,e,n,r)){Gr(t)&&O1(e,t.index);return}t.type&3&&(n=P1(n)),x1(t,e,n,r,i,o)}function x1(t,e,n,r,i,o){if(t.type&3){let s=vn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function O1(t,e){let n=on(e,t);n[K]&16||(n[K]|=64)}function k1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Gr(n)&&u1(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Dd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Cd(e,t,s,n);if(ms(u,e),o!==null&&B1(e,s-r,u,a,n,o),Fn(a)){let l=on(n.index,e);l[Le]=Cd(e,t,s,n)}}}function F1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=uT();try{Wr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];sd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&L1(u,l)}}finally{Wr(-1),sd(s)}}function L1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function V1(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];t1(e,o.selectors,!1)&&(r??=[],Fn(o)?r.unshift(o):r.push(o))}return r}function j1(t,e,n,r,i,o){let s=vn(t,e);U1(e[Me],s,o,t.value,n,r,i)}function U1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Vi(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function B1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ry(r,n,u,l)}}function $b(t,e,n,r,i){let o=Ve+n,s=e[G],a=i(s,e,t,r,n);e[o]=a,ds(t,!0);let u=t.type===2;return u?(Sb(e[Me],a,t),(XC()===0||td(t))&&ms(a,e),eT()):ms(a,e),dd()&&(!u||!Dy(t))&&Oy(s,e,a,t),t}function Hb(t){let e=t;return Tm()?iT():(e=e.parent,ds(e,!1)),e}function $1(t,e){let n=t[lr];if(!n)return;let r;try{r=n.get(Gt,null)}catch{r=null}r?.(e)}function Ly(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];ry(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];ry(h,l,r,i),a=!0}return a}function H1(t,e){let n=on(e,t),r=n[G];z1(r,n);let i=n[mn];i!==null&&n[ss]===null&&(n[ss]=vb(i,n[lr])),ye(le.ComponentStart);try{Vy(r,n,n[Le])}finally{ye(le.ComponentEnd,n[Le])}}function z1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Vy(t,e,n){ad(e);try{let r=t.viewQuery;r!==null&&ny(1,r,n);let i=t.template;i!==null&&jb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Hi]?.finishViewCreation(t),t.staticContentQueries&&_b(t,e),t.staticViewQueries&&ny(2,t.viewQuery,n);let o=t.components;o!==null&&q1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,cd()}}function q1(t,e){for(let n=0;n<e.length;n++)H1(t,e[n])}function jy(t,e,n,r){let i=q(null);try{let o=e.tView,a=t[K]&4096?4096:16,u=Ry(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Bi]=l;let h=t[Hi];return h!==null&&(u[Hi]=h.createEmbeddedView(o)),Vy(o,u,n),u}finally{q(i)}}function mc(t,e){return!e||e.firstChild===null||ub(t)}function yc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(rn(o)),yn(o)&&zb(o,r);let s=n.type;if(s&8)yc(t,e,n.child,r);else if(s&32){let a=My(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Vb(e,n);if(Array.isArray(a))r.push(...a);else{let u=Br(e[zt]);yc(u[G],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function zb(t,e){for(let n=je;n<t.length;n++){let r=t[n],i=r[G].firstChild;i!==null&&yc(r[G],r,i,e)}t[qr]!==t[mn]&&e.push(t[qr])}function qb(t){if(t[zi]!==null){for(let e of t[zi])e.impl.addSequence(e);t[zi].length=0}}var Gb=[];function G1(t){return t[qt]??W1(t)}function W1(t){let e=Gb.pop()??Object.create(Q1);return e.lView=t,e}function K1(t){t.lView[qt]!==t&&(t.lView=null,Gb.push(t))}var Q1=ee(k({},ja),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ls(t.lView)},consumerOnSignalRead(){this.lView[qt]=this}});function Y1(t){let e=t[qt]??Object.create(Z1);return e.lView=t,e}var Z1=ee(k({},ja),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Br(t.lView);for(;e&&!Wb(e[G]);)e=Br(e);e&&_m(e)},consumerOnSignalRead(){this.lView[qt]=this}});function Wb(t){return t.type!==2}function Kb(t){if(t[oc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[oc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[K]&8192)}}var J1=100;function Qb(t,e=0){let r=t[On].rendererFactory,i=!1;i||r.begin?.();try{X1(t,e)}finally{i||r.end?.()}}function X1(t,e){let n=bm();try{Sm(!0),oy(t,e);let r=0;for(;uc(t);){if(r===J1)throw new L(103,!1);r++,oy(t,1)}}finally{Sm(n)}}function eF(t,e,n,r){if(Gi(e))return;let i=e[K],o=!1,s=!1;ad(e);let a=!0,u=null,l=null;o||(Wb(t)?(l=G1(e),u=Ba(l)):ll()===null?(a=!1,l=Y1(e),u=Ba(l)):e[qt]&&($a(e[qt]),e[qt]=null));try{vm(e),sT(t.bindingStartIndex),n!==null&&jb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&md(e,y,null)}else{let y=t.preOrderHooks;y!==null&&yd(e,y,0,null),Um(e,0)}if(s||tF(e),Kb(e),Yb(e,0),t.contentQueries!==null&&_b(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&md(e,y)}else{let y=t.contentHooks;y!==null&&yd(e,y,1),Um(e,1)}rF(t,e);let p=t.components;p!==null&&Jb(e,p,0);let m=t.viewQuery;if(m!==null&&ny(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&md(e,y)}else{let y=t.viewHooks;y!==null&&yd(e,y,2),Um(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ed]){for(let y of e[ed])y();e[ed]=null}o||(qb(e),e[K]&=-73)}catch(h){throw o||ls(e),h}finally{l!==null&&(dl(l,u),a&&K1(l)),cd()}}function Yb(t,e){for(let n=db(t);n!==null;n=hb(n))for(let r=je;r<n.length;r++){let i=n[r];Zb(i,e)}}function tF(t){for(let e=db(t);e!==null;e=hb(e)){if(!(e[K]&2))continue;let n=e[ac];for(let r=0;r<n.length;r++){let i=n[r];_m(i)}}}function nF(t,e,n){ye(le.ComponentStart);let r=on(e,t);try{Zb(r,n)}finally{ye(le.ComponentEnd,r[Le])}}function Zb(t,e){rd(t)&&oy(t,e)}function oy(t,e){let r=t[G],i=t[K],o=t[qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&hl(o)),s||=!1,o&&(o.dirty=!1),t[K]&=-9217,s)eF(r,t,r.template,t[Le]);else if(i&8192){let a=q(null);try{Kb(t),Yb(t,1);let u=r.components;u!==null&&Jb(t,u,1),qb(t)}finally{q(a)}}}function Jb(t,e,n){for(let r=0;r<e.length;r++)nF(t,e[r],n)}function rF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Wr(~i);else{let o=i,s=n[++r],a=n[++r];cT(s,o);let u=e[o];ye(le.HostBindingsUpdateStart,u);try{a(2,u)}finally{ye(le.HostBindingsUpdateEnd,u)}}}}finally{Wr(-1)}}function Uy(t,e){let n=bm()?64:1088;for(t[On].changeDetectionScheduler?.notify(e);t;){t[K]|=n;let r=Br(t);if(us(t)&&!r)return t;t=r}return null}function Xb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function eS(t,e){let n=je+e;if(n<t.length)return t[n]}function Wd(t,e,n,r=!0){let i=e[G];if(iF(i,e,t,n),r){let s=iy(n,t),a=e[Me],u=a.parentNode(t[qr]);u!==null&&m1(i,t[nn],a,e,u,s)}let o=e[ss];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tS(t,e){let n=vc(t,e);return n!==void 0&&qd(n[G],n),n}function vc(t,e){if(t.length<=je)return;let n=je+e,r=t[n];if(r){let i=r[Bi];i!==null&&i!==t&&xy(i,r),e>0&&(t[n-1][tn]=r[tn]);let o=tc(t,je+e);g1(r[G],r);let s=o[Hi];s!==null&&s.detachView(o[G]),r[it]=null,r[tn]=null,r[K]&=-129}return r}function iF(t,e,n,r){let i=je+r,o=n.length;r>0&&(n[i-1][tn]=e),r<o-je?(e[tn]=n[i],om(n,je+r,e)):(n.push(e),e[tn]=null),e[it]=n;let s=e[Bi];s!==null&&n!==s&&nS(s,e);let a=e[Hi];a!==null&&a.insertView(t),id(e),e[K]|=128}function nS(t,e){let n=t[ac],r=e[it];if(kn(r))t[K]|=2;else{let i=r[it][zt];e[zt]!==i&&(t[K]|=2)}n===null?t[ac]=[e]:n.push(e)}var Zi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[G];return yc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Le]}set context(e){this._lView[Le]=e}get destroyed(){return Gi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(yn(e)){let n=e[sc],r=n?n.indexOf(this):-1;r>-1&&(vc(e,r),tc(n,r))}this._attachedToViewContainer=!1}qd(this._lView[G],this._lView)}onDestroy(e){Em(this._lView,e)}markForCheck(){Uy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){id(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,Qb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=us(this._lView),n=this._lView[Bi];n!==null&&!e&&xy(n,this._lView),Lb(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e;let n=us(this._lView),r=this._lView[Bi];r!==null&&!n&&nS(r,this._lView),id(this._lView)}};function Kd(t,e,n,r,i){let o=t.data[e];if(o===null)o=oF(t,e,n,r,i),aT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=rT();o.injectorIndex=s===null?-1:s.injectorIndex}return ds(o,!0),o}function oF(t,e,n,r,i){let o=Cm(),s=Tm(),a=s?o:o&&o.parent,u=t.data[e]=aF(t,a,n,e,r,i);return sF(t,u,o,s),u}function sF(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function aF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return nT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cF(t){let e=t[fm]??[],r=t[it][Me],i=[];for(let o of e)o.data[gb]!==void 0?i.push(o):uF(o,r);t[fm]=i}function uF(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[pb];for(;n<i;){let o=r.nextSibling;bb(e,r,!1),r=o,n++}}}var lF=()=>null,dF=()=>null;function sy(t,e){return lF(t,e)}function rS(t,e,n){return dF(t,e,n)}var iS=class{},Qd=class{},ay=class{resolveComponentFactory(e){throw new L(917,!1)}},Ic=class{static NULL=new ay},Ji=class{},ro=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>hF()}return t})();function hF(){let t=ie(),e=Ft(),n=on(e.index,t);return(kn(n)?n:t)[Me]}var oS=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var vd={},cy=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,vd,r);return i!==vd||n===vd?i:this.parentInjector.get(e,n,r)}};function Ad(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Wg(i,a);else if(o==2){let u=a,l=e[++s];r=Wg(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ce(t,e=0){let n=ie();if(n===null)return te(t,e);let r=Ft();return sb(r,n,lt(t),e)}function fF(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}mF(t,e,n,a,o,u,l)}o!==null&&r!==null&&pF(n,r,o)}function pF(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new L(-301,!1);r.push(e[i],o)}}function gF(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mF(t,e,n,r,i,o,s){let a=r.length,u=null;for(let m=0;m<a;m++){let y=r[m];u===null&&Fn(y)&&(u=y,gF(t,n,m)),Xm(Dd(n,e),t,y.type)}wF(n,t.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Mb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=gs(n.mergedAttrs,y.hostAttrs),vF(t,n,e,p,y),IF(p,y,i),s!==null&&s.has(y)){let[R,A]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}yF(t,n,o)}function yF(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))xT(0,e,i,r),xT(1,e,i,r),kT(e,r,!1);else{let o=n.get(i);OT(0,e,o,r),OT(1,e,o,r),kT(e,r,!0)}}}function xT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),sS(e,o)}}function OT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),sS(e,s)}}function sS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function kT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Sy(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function vF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ur(i.type,!0)),s=new Qi(o,Fn(i),ce,null);t.blueprint[r]=s,n[r]=s,_F(t,e,r,Mb(t,n,i.hostVars,an),i)}function _F(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;EF(s)!=a&&s.push(a),s.push(n,r,o)}}function EF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Fn(e)&&(n[""]=t)}}function wF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function aS(t,e,n,r,i,o,s,a){let u=e[G],l=u.consts,h=Ln(l,s),p=Kd(u,t,n,r,h);return o&&fF(u,e,p,Ln(l,a),i),p.mergedAttrs=gs(p.mergedAttrs,p.attrs),p.attrs!==null&&Ad(p,p.attrs,!1),p.mergedAttrs!==null&&Ad(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function cS(t,e){_k(t,e),pm(e)&&t.queries.elementEnd(e)}function DF(t,e,n,r,i,o){let s=e.consts,a=Ln(s,i),u=Kd(e,t,n,r,a);if(u.mergedAttrs=gs(u.mergedAttrs,u.attrs),o!=null){let l=Ln(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Ad(u,u.attrs,!1),u.mergedAttrs!==null&&Ad(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function By(t,e,n){return t[e]=n}function Un(t,e,n){if(n===an)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Rd(t,e,n,r){let i=Un(t,e,n);return Un(t,e+1,r)||i}function CF(t,e,n,r,i,o){let s=Rd(t,e,n,r);return Rd(t,e+2,i,o)||s}function Hm(t,e,n){return function r(i){let o=Gr(t)?on(t.index,e):e;Uy(o,5);let s=e[Le],a=FT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=FT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function FT(t,e,n,r){let i=q(null);try{return ye(le.OutputStart,e,n),n(r)!==!1}catch(o){return $1(t,o),!1}finally{ye(le.OutputEnd,e,n),q(i)}}function TF(t,e,n,r,i,o,s,a){let u=td(t),l=!1,h=null;if(!r&&u&&(h=SF(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=vn(t,n),m=r?r(p):p;$k(n,m,o,a);let y=i.listen(m,o,a);if(!bF(o)){let w=r?R=>r(rn(R[t.index])):t.index;uS(w,e,n,o,a,y,!1)}}return l}function bF(t){return t.startsWith("animation")||t.startsWith("transition")}function SF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[as],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function uS(t,e,n,r,i,o,s){let a=e.firstCreatePass?JC(e):null,u=ZC(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function LT(t,e,n,r,i,o){let s=e[n],a=e[G],l=a.data[n].outputs[r],p=s[l].subscribe(o);uS(t.index,a,e,i,o,p,!0)}var uy=Symbol("BINDING");var Nd=class extends Ic{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Hr(e);return new ys(n,this.ngModule)}};function AF(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&$d.SignalBased)!==0};return i&&(o.transform=i),o})}function RF(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function NF(t,e,n){let r=e instanceof Xe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new cy(n,r):n}function MF(t){let e=t.get(Ji,null);if(e===null)throw new L(407,!1);let n=t.get(oS,null),r=t.get($r,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function PF(t,e){let n=lS(t);return Cb(e,n,n==="svg"?gm:n==="math"?WC:null)}function lS(t){return(t.selectors[0][0]||"div").toLowerCase()}var ys=class extends Qd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=AF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=RF(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=o1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ye(le.DynamicComponentStart);let a=q(null);try{let u=this.componentDef,l=xF(r,u,s,o),h=NF(u,i||this.ngModule,e),p=MF(h),m=p.rendererFactory.createRenderer(null,u),y=r?R1(m,r,u.encapsulation,h):PF(u,m),w=s?.some(VT)||o?.some(x=>typeof x!="function"&&x.bindings.some(VT)),R=Ry(null,l,null,512|Nb(u),null,null,p,m,h,null,vb(y,h,!0));R[Ve]=y,ad(R);let A=null;try{let x=aS(Ve,R,2,"#host",()=>l.directiveRegistry,!0,0);Sb(m,y,x),ms(y,R),Ub(l,R,x),Eb(l,x,R),cS(l,x),n!==void 0&&kF(x,this.ngContentSelectors,n),A=on(x.index,R),R[Le]=A[Le],Vy(l,R,null)}catch(x){throw A!==null&&ty(A),ty(R),x}finally{ye(le.DynamicComponentEnd),cd()}return new Md(this.componentType,R,!!w)}finally{q(a)}}};function xF(t,e,n,r){let i=t?["ng-version","21.0.6"]:s1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[uy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[uy].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=nm(p);u.push(m)}return Ay(0,null,OF(o,s),1,a,u,null,null,null,[i],null)}function OF(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function VT(t){let e=t[uy].kind;return e==="input"||e==="twoWay"}var Md=class extends iS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=cc(n[G],Ve),this.location=Ey(this._tNode,n),this.instance=on(this._tNode.index,n)[Le],this.hostView=this.changeDetectorRef=new Zi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Ly(r,i[G],i,e,n);this.previousInputValues.set(e,n);let s=on(r.index,i);Uy(s,1)}get injector(){return new Ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var wc=(()=>{class t{static __NG_ELEMENT_ID__=FF}return t})();function FF(){let t=Ft();return VF(t,ie())}var LF=wc,dS=class extends LF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ey(this._hostTNode,this._hostLView)}get injector(){return new Ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=_y(this._hostTNode,this._hostLView);if(eb(e)){let n=Id(e,this._hostLView),r=Ed(e),i=n[G].data[r+8];return new Ki(i,n)}else return new Ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=jT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-je}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=sy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,mc(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!pk(e),l;if(u)l=n;else{let A=n||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let h=u?e:new ys(Hr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(Xe,null);x&&(o=x)}let m=Hr(h.componentType??{}),y=sy(this._lContainer,m?.id??null),w=y?.firstChild??null,R=h.create(p,i,w,o,s,a);return this.insertImpl(R.hostView,l,mc(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(KC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[it],l=new dS(u,u[nn],u[it]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Wd(s,i,o,r),e.attachToViewContainerRef(),om(zm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=jT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=vc(this._lContainer,n);r&&(tc(zm(this._lContainer),n),qd(r[G],r))}detach(e){let n=this._adjustIndex(e,-1),r=vc(this._lContainer,n);return r&&tc(zm(this._lContainer),n)!=null?new Zi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function jT(t){return t[sc]}function zm(t){return t[sc]||(t[sc]=[])}function VF(t,e){let n,r=e[t.index];return yn(r)?n=r:(n=Xb(r,e,null,t),e[t.index]=n,Ny(e,n)),UF(n,e,t,r),new dS(n,t,e)}function jF(t,e){let n=t[Me],r=n.createComment(""),i=vn(e,t),o=n.parentNode(i);return bd(n,o,r,n.nextSibling(i),!1),r}var UF=HF,BF=()=>!1;function $F(t,e,n){return BF(t,e,n)}function HF(t,e,n,r){if(t[qr])return;let i;n.type&8?i=rn(r):i=jF(e,n),t[qr]=i}var Xi=class{},Yd=class{};var Pd=class extends Xi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Nd(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=tm(e);this._bootstrapComponents=Ab(o.bootstrap),this._r3Injector=Pm(e,n,[{provide:Xi,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver},...r],cr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xd=class extends Yd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Pd(this.moduleType,e,[])}};var _c=class extends Xi{injector;componentFactoryResolver=new Nd(this);instance=null;constructor(e){super();let n=new ki([...e.providers,{provide:Xi,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],e.parent||rc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Dc(t,e,n=null){return new _c({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var zF=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=cm(!1,n.type),i=r.length>0?Dc([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(te(Xe))})}return t})();function pr(t){return _s(()=>{let e=hS(t),n=ee(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Iy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(zF).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||In.Emulated,styles:t.styles||$t,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Qr("NgStandalone"),fS(n);let r=t.dependencies;return n.directiveDefs=UT(r,qF),n.pipeDefs=UT(r,PC),n.id=KF(n),n})}function qF(t){return Hr(t)||nm(t)}function Yr(t){return _s(()=>({type:t.type,bootstrap:t.bootstrap||$t,declarations:t.declarations||$t,imports:t.imports||$t,exports:t.exports||$t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function GF(t,e){if(t==null)return zr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=$d.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function WF(t){if(t==null)return zr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function qe(t){return _s(()=>{let e=hS(t);return fS(e),e})}function Cc(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function hS(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||zr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||$t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:GF(t.inputs,e),outputs:WF(t.outputs),debugInfo:null}}function fS(t){t.features?.forEach(e=>e(t))}function UT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function KF(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function QF(t){return Object.getPrototypeOf(t.prototype).constructor}function Kt(t){let e=QF(t.type),n=!0,r=[t];for(;e;){let i;if(Fn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=qm(t.inputs),s.declaredInputs=qm(t.declaredInputs),s.outputs=qm(t.outputs);let a=i.hostBindings;a&&eL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&JF(t,u),l&&XF(t,l),YF(t,i),MC(t.outputs,i.outputs),Fn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Kt&&(n=!1)}}e=Object.getPrototypeOf(e)}ZF(r)}function YF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function ZF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gs(i.hostAttrs,n=gs(n,i.hostAttrs))}}function qm(t){return t===zr?{}:t===$t?[]:t}function JF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function XF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function eL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function tL(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=gs(t.mergedAttrs,t.attrs);let h=t.tView=Ay(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),ds(t,!1);let u=nL(n,e,t,r);dd()&&Oy(n,e,u,t),ms(u,e);let l=Xb(u,e,u,t);e[r+Ve]=l,Ny(e,l),$F(l,t,e)}function Od(t,e,n,r,i,o,s,a,u,l,h){let p=n+Ve,m;if(e.firstCreatePass){if(m=Kd(e,p,4,s||null,a||null),l!=null){let y=Ln(e.consts,l);m.localNames=[];for(let w=0;w<y.length;w+=2)m.localNames.push(y[w],-1)}}else m=e.data[p];return tL(m,t,e,n,r,i,o,u),l!=null&&Fy(t,m,h),m}var nL=rL;function rL(t,e,n,r){return hd(!0),e[Me].createComment("")}var $y=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function pS(t){return typeof t=="function"&&t[bt]!==void 0}function Hy(t){return pS(t)&&typeof t.set=="function"}var zy=new j("");function gr(t){return!!t&&typeof t.then=="function"}function Zd(t){return!!t&&typeof t.subscribe=="function"}var gS=new j("");var qy=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(gS,{optional:!0})??[];injector=M(ze);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=et(this.injector,i);if(gr(o))n.push(o);else if(Zd(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jd=new j("");function mS(){hg(()=>{let t="";throw new L(600,t)})}function yS(t){return t.isBoundToModule}var iL=10;var Zr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Gt);afterRenderManager=M(Py);zonelessEnabled=M(hc);rootEffectScheduler=M(jm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new rt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(hr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(we(n=>!n))}constructor(){M(no,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(Xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ze.NULL){return this._injector.get(Ae).run(()=>{ye(le.BootstrapComponentStart);let s=n instanceof Qd;if(!this._injector.get(qy).done){let w="";throw new L(405,w)}let u;s?u=n:u=this._injector.get(Ic).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=yS(u)?void 0:this._injector.get(Xi),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(zy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),gc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ye(le.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ye(le.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Hd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ye(le.ChangeDetectionEnd),new L(101,!1);let n=q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,q(n),this.afterTick.next(),ye(le.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ji,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<iL;){ye(le.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ye(le.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!uc(i))continue;let o=r&&!this.zonelessEnabled?0:1;Qb(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>uc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;gc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Jd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>gc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new L(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Xd(t,e,n,r){let i=ie(),o=Wi();if(Un(i,o,e)){let s=vt(),a=ud();j1(a,i,t,e,n,r)}return Xd}var nK=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ly=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Gm(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function oL(t,e,n,r){let i,o,s=0,a=t.length-1,u=void 0;if(Array.isArray(e)){q(r);let l=e.length-1;for(q(null);s<=a&&s<=l;){let h=t.at(s),p=e[s],m=Gm(s,h,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(a),w=e[l],R=Gm(a,y,l,w,n);if(R!==0){R<0&&t.updateValue(a,w),a--,l--;continue}let A=n(s,h),x=n(a,y),U=n(s,p);if(Object.is(U,x)){let z=n(l,w);Object.is(z,A)?(t.swap(s,a),t.updateValue(a,w),l--,a--):t.move(a,s),t.updateValue(s,p),s++;continue}if(i??=new kd,o??=$T(t,s,a,n),dy(t,i,s,U))t.updateValue(s,p),s++,a++;else if(o.has(U))i.set(A,t.detach(s)),a--;else{let z=t.create(s,e[s]);t.attach(s,z),s++,a++}}for(;s<=l;)BT(t,i,n,s,e[s]),s++}else if(e!=null){q(r);let l=e[Symbol.iterator]();q(null);let h=l.next();for(;!h.done&&s<=a;){let p=t.at(s),m=h.value,y=Gm(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,h=l.next();else{i??=new kd,o??=$T(t,s,a,n);let w=n(s,m);if(dy(t,i,s,w))t.updateValue(s,m),s++,a++,h=l.next();else if(!o.has(w))t.attach(s,t.create(s,m)),s++,a++,h=l.next();else{let R=n(s,p);i.set(R,t.detach(s)),a--}}}for(;!h.done;)BT(t,i,n,t.length,h.value),h=l.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(l=>{t.destroy(l)})}function dy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function BT(t,e,n,r,i){if(dy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function $T(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var kd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function io(t,e,n,r,i,o,s,a){Qr("NgControlFlow");let u=ie(),l=vt(),h=Ln(l.consts,o);return Od(u,l,t,e,n,r,i,h,256,s,a),oo}function oo(t,e,n,r,i,o,s,a){Qr("NgControlFlow");let u=ie(),l=vt(),h=Ln(l.consts,o);return Od(u,l,t,e,n,r,i,h,512,s,a),oo}function so(t,e){Qr("NgControlFlow");let n=ie(),r=Wi(),i=n[r]!==an?n[r]:-1,o=i!==-1?Fd(n,Ve+i):void 0,s=0;if(Un(n,r,t)){let a=q(null);try{if(o!==void 0&&tS(o,s),t!==-1){let u=Ve+t,l=Fd(n,u),h=gy(n[G],u),p=rS(l,h,n),m=jy(n,h,e,{dehydratedView:p});Wd(l,m,s,mc(h,p))}}finally{q(a)}}else if(o!==void 0){let a=eS(o,s);a!==void 0&&(a[Le]=e)}}var hy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-je}};var fy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Gy(t,e,n,r,i,o,s,a,u,l,h,p,m){Qr("NgControlFlow");let y=ie(),w=vt(),R=u!==void 0,A=ie(),x=a?s.bind(A[zt][Le]):s,U=new fy(R,x);A[Ve+t]=U,Od(y,w,t+1,e,n,r,i,Ln(w.consts,o),256),R&&Od(y,w,t+2,u,l,h,p,Ln(w.consts,m),512)}var py=class extends ly{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-je}at(e){return this.getLView(e)[Le].$implicit}attach(e,n){let r=n[ss];this.needsIndexUpdate||=e!==this.length,Wd(this.lContainer,n,e,mc(this.templateTNode,r)),sL(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,aL(this.lContainer,e),cL(this.lContainer,e)}create(e,n){let r=sy(this.lContainer,this.templateTNode.tView.ssrId);return jy(this.hostLView,this.templateTNode,new hy(this.lContainer,n,e),{dehydratedView:r})}destroy(e){qd(e[G],e)}updateValue(e,n){this.getLView(e)[Le].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Le].$index=e}getLView(e){return uL(this.lContainer,e)}};function Wy(t){let e=q(null),n=dr();try{let r=ie(),i=r[G],o=r[n],s=n+1,a=Fd(r,s);if(o.liveCollection===void 0){let l=gy(i,s);o.liveCollection=new py(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(oL(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Wi(),h=u.length===0;if(Un(r,l,h)){let p=n+2,m=Fd(r,p);if(h){let y=gy(i,p),w=rS(m,y,r),R=jy(r,y,void 0,{dehydratedView:w});Wd(m,R,0,mc(y,w))}else i.firstUpdatePass&&cF(m),tS(m,0)}}}finally{q(e)}}function Fd(t,e){return t[e]}function sL(t,e){if(t.length<=je)return;let n=je+e,r=t[n],i=r?r[qi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[lr];f1(o,i),Yi.delete(r),i.detachedLeaveAnimationFns=void 0}}function aL(t,e){if(t.length<=je)return;let n=je+e,r=t[n],i=r?r[qi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function cL(t,e){return vc(t,e)}function uL(t,e){return eS(t,e)}function gy(t,e){return cc(t,e)}function Es(t,e,n){let r=ie(),i=Wi();if(Un(r,i,e)){let o=vt(),s=ud();Bb(s,r,t,e,r[Me],n)}return Es}function HT(t,e,n,r,i){Ly(e,t,n,i?"class":"style",r)}function fe(t,e,n,r){let i=ie(),o=i[G],s=t+Ve,a=o.firstCreatePass?aS(s,i,2,e,V1,tT(),n,r):o.data[s];if($b(a,i,t,e,vS),td(a)){let u=i[G];Ub(u,i,a),Eb(u,a,i)}return r!=null&&Fy(i,a),fe}function De(){let t=vt(),e=Ft(),n=Hb(e);return t.firstCreatePass&&cS(t,n),wm(n)&&Dm(),Im(),n.classesWithoutHost!=null&&Ik(n)&&HT(t,n,ie(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&wk(n)&&HT(t,n,ie(),n.stylesWithoutHost,!1),De}function Jr(t,e,n,r){return fe(t,e,n,r),De(),Jr}function Nt(t,e,n,r){let i=ie(),o=i[G],s=t+Ve,a=o.firstCreatePass?DF(s,o,2,e,n,r):o.data[s];return $b(a,i,t,e,vS),r!=null&&Fy(i,a),Nt}function Mt(){let t=Ft(),e=Hb(t);return wm(e)&&Dm(),Im(),Mt}function eh(t,e,n,r){return Nt(t,e,n,r),Mt(),eh}var vS=(t,e,n,r,i)=>(hd(!0),Cb(e[Me],r,gT()));function th(){return ie()}var fc=void 0;function lL(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var dL=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",fc,fc,fc],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",lL],Wm={};function Pt(t){let e=hL(t),n=zT(e);if(n)return n;let r=e.split("-")[0];if(n=zT(r),n)return n;if(r==="en")return dL;throw new L(701,!1)}function zT(t){return t in Wm||(Wm[t]=Fi.ng&&Fi.ng.common&&Fi.ng.common.locales&&Fi.ng.common.locales[t]),Wm[t]}var Pe=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(Pe||{});function hL(t){return t.toLowerCase().replace(/_/g,"-")}var Tc="en-US",fL="USD";var pL=Tc;function _S(t){typeof t=="string"&&(pL=t.toLowerCase().replace(/_/g,"-"))}function Qt(t,e,n){let r=ie(),i=vt(),o=Ft();return ES(i,r,r[Me],o,t,e,n),Qt}function ES(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Hm(r,e,o),TF(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Hm(r,e,o),LT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Hm(r,e,o),LT(r,e,p,i,i,u)}}function Is(t=1){return pT(t)}function gd(t,e){return t<<17|e<<2}function eo(t){return t>>17&32767}function gL(t){return(t&2)==2}function mL(t,e){return t&131071|e<<17}function my(t){return t|2}function vs(t){return(t&131068)>>2}function Km(t,e){return t&-131069|e<<2}function yL(t){return(t&1)===1}function yy(t){return t|1}function vL(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=eo(s),u=vs(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||os(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=eo(t[a+1]);t[r+1]=gd(m,a),m!==0&&(t[m+1]=Km(t[m+1],r)),t[a+1]=mL(t[a+1],r)}else t[r+1]=gd(a,0),a!==0&&(t[a+1]=Km(t[a+1],r)),a=r;else t[r+1]=gd(u,0),a===0?a=r:t[u+1]=Km(t[u+1],r),u=r;l&&(t[r+1]=my(t[r+1])),qT(t,h,r,!0),qT(t,h,r,!1),_L(e,h,t,r,o),s=gd(a,u),o?e.classBindings=s:e.styleBindings=s}function _L(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&os(o,e)>=0&&(n[r+1]=yy(n[r+1]))}function qT(t,e,n,r){let i=t[n+1],o=e===null,s=r?eo(i):vs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];EL(u,e)&&(a=!0,t[s+1]=r?yy(l):my(l)),s=r?eo(l):vs(l)}a&&(t[n+1]=r?my(i):yy(i))}function EL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?os(t,e)>=0:!1}function $n(t,e){return IL(t,e,null,!0),$n}function IL(t,e,n,r){let i=ie(),o=vt(),s=Am(2);if(o.firstUpdatePass&&DL(o,t,s,r),e!==an&&Un(i,s,e)){let a=o.data[dr()];AL(o,a,i,i[Me],t,i[s+1]=RL(e,n),r,s)}}function wL(t,e){return e>=t.expandoStartIndex}function DL(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[dr()],s=wL(t,n);NL(o,r)&&e===null&&!s&&(e=!1),e=CL(i,o,e,r),vL(i,o,e,n,s,r)}}function CL(t,e,n,r){let i=lT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Qm(null,t,e,n,r),n=Ec(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Qm(i,t,e,n,r),o===null){let u=TL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Qm(null,t,e,u[1],r),u=Ec(u,e.attrs,r),bL(t,e,r,u))}else o=SL(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function TL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(vs(r)!==0)return t[eo(r)]}function bL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[eo(i)]=r}function SL(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ec(r,s,n)}return Ec(r,e.attrs,n)}function Qm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ec(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ec(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),jC(t,s,n?!0:e[++o]))}return t===void 0?null:t}function AL(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=yL(l)?GT(u,e,n,i,vs(l),s):void 0;if(!Ld(h)){Ld(o)||gL(l)&&(o=GT(u,null,n,i,a,s));let p=mm(dr(),n);A1(r,s,p,i,o)}}function GT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===an&&(m=p?$t:void 0);let y=p?Xl(m,r):h===r?m:void 0;if(l&&!Ld(y)&&(y=Xl(u,r)),Ld(y)&&(a=y,s))return a;let w=t[i+1];i=s?eo(w):vs(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Xl(u,r))}return a}function Ld(t){return t!==void 0}function RL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=cr(Cy(t)))),t}function NL(t,e){return(t.flags&(e?8:16))!==0}function ve(t,e=""){let n=ie(),r=vt(),i=t+Ve,o=r.firstCreatePass?Kd(r,i,1,e,null):r.data[i],s=ML(r,n,o,e,t);n[i]=s,dd()&&Oy(r,n,s,o),ds(o,!1)}var ML=(t,e,n,r,i)=>(hd(!0),qk(e[Me],r));function PL(t,e,n,r=""){return Un(t,Wi(),n)?e+Vi(n)+r:an}function xL(t,e,n,r,i,o=""){let s=oT(),a=Rd(t,s,n,i);return Am(2),a?e+Vi(n)+r+Vi(i)+o:an}function nh(t){return bc("",t),nh}function bc(t,e,n){let r=ie(),i=PL(r,t,e,n);return i!==an&&IS(r,dr(),i),bc}function Sc(t,e,n,r,i){let o=ie(),s=xL(o,t,e,n,r,i);return s!==an&&IS(o,dr(),s),Sc}function IS(t,e,n){let r=mm(e,t);Gk(t[Me],r,n)}function ao(t,e,n){Hy(e)&&(e=e());let r=ie(),i=Wi();if(Un(r,i,e)){let o=vt(),s=ud();Bb(s,r,t,e,r[Me],n)}return ao}function ws(t,e){let n=Hy(t);return n&&t.set(e),n}function co(t,e){let n=ie(),r=vt(),i=Ft();return ES(r,n,n[Me],i,t,e),co}function WT(t,e,n){let r=vt();r.firstCreatePass&&wS(e,r.data,r.blueprint,Fn(t),n)}function wS(t,e,n,r,i){if(t=lt(t),Array.isArray(t))for(let o=0;o<t.length;o++)wS(t[o],e,n,r,i);else{let o=vt(),s=ie(),a=Ft(),u=Oi(t)?t:lt(t.provide),l=lm(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Oi(t)||!t.multi){let y=new Qi(l,i,ce,null),w=Zm(u,e,i?h:h+m,p);w===-1?(Xm(Dd(a,s),o,u),Ym(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=Zm(u,e,h+m,p),w=Zm(u,e,h,h+m),R=y>=0&&n[y],A=w>=0&&n[w];if(i&&!A||!i&&!R){Xm(Dd(a,s),o,u);let x=FL(i?kL:OL,n.length,i,r,l,t);!i&&A&&(n[w].providerFactory=x),Ym(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=DS(n[i?w:y],l,!i&&r);Ym(o,t,y>-1?y:w,x)}!i&&r&&A&&n[w].componentProviders++}}}function Ym(t,e,n,r){let i=Oi(e),o=zC(e);if(i||o){let u=(o?lt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function DS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Zm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function OL(t,e,n,r,i){return vy(this.multi,[])}function kL(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Cd(r,r[G],this.providerFactory.index,i);s=u.slice(0,a),vy(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],vy(o,s);return s}function vy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function FL(t,e,n,r,i,o){let s=new Qi(t,n,ce,null);return s.multi=[],s.index=e,s.componentProviders=0,DS(s,i,r&&!n),s}function mr(t,e){return n=>{n.providersResolver=(r,i)=>WT(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>WT(r,i?i(e):e,!0))}}function Ky(t,e){let n=t[e];return n===an?void 0:n}function LL(t,e,n,r,i,o){let s=e+n;return Un(t,s,i)?By(t,s+1,o?r.call(o,i):r(i)):Ky(t,s+1)}function VL(t,e,n,r,i,o,s){let a=e+n;return Rd(t,a,i,o)?By(t,a+2,s?r.call(s,i,o):r(i,o)):Ky(t,a+2)}function jL(t,e,n,r,i,o,s,a,u){let l=e+n;return CF(t,l,i,o,s,a)?By(t,l+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):Ky(t,l+4)}function Xr(t,e){let n=vt(),r,i=t+Ve;n.firstCreatePass?(r=UL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ur(r.type,!0)),s,a=Rt(ce);try{let u=wd(!1),l=o();return wd(u),ym(n,ie(),i,l),l}finally{Rt(a)}}function UL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ds(t,e,n){let r=t+Ve,i=ie(),o=nd(i,r);return Zy(i,r)?LL(i,od(),e,o.transform,n,o):o.transform(n)}function Qy(t,e,n,r){let i=t+Ve,o=ie(),s=nd(o,i);return Zy(o,i)?VL(o,od(),e,s.transform,n,r,s):s.transform(n,r)}function Yy(t,e,n,r,i,o){let s=t+Ve,a=ie(),u=nd(a,s);return Zy(a,s)?jL(a,od(),e,u.transform,n,r,i,o,u):u.transform(n,r,i,o)}function Zy(t,e){return t[G].data[e].pure}var Vd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Jy=(()=>{class t{compileModuleSync(n){return new xd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=tm(n),o=Ab(i.declarations).reduce((s,a)=>{let u=Hr(a);return u&&s.push(new ys(u)),s},[]);return new Vd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var CS=(()=>{class t{applicationErrorHandler=M(Gt);appRef=M(Zr);taskService=M(hr);ngZone=M(Ae);zonelessEnabled=M(hc);tracing=M(no,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ja):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Vm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Om:xm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ja+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Om(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TS(){return[{provide:$r,useExisting:CS},{provide:Ae,useClass:Xa},{provide:hc,useValue:!0}]}function BL(){return typeof $localize<"u"&&$localize.locale||Tc}var Cs=new j("",{factory:()=>M(Cs,{optional:!0,skipSelf:!0})||BL()}),Xy=new j("",{factory:()=>fL});function Ts(t,e){return fl(t,e?.equal)}var SS=Symbol("InputSignalNode#UNSET"),tV=ee(k({},pl),{transformFn:void 0,applyValueToInputSignal(t,e){Ha(t,e)}});function AS(t,e){let n=Object.create(tV);n.value=t,n.transformFn=e?.transform;function r(){if(Ua(n),n.value===SS){let i=null;throw new L(-950,i)}return n.value}return r[bt]=n,r}function bS(t,e){return AS(t,e)}function nV(t){return AS(SS,t)}var RS=(bS.required=nV,bS);var ev=new j(""),rV=new j("");function Ac(t){return!t.moduleRef}function iV(t){let e=Ac(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ae);return n.run(()=>{Ac(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Gt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ac(t)){let o=()=>e.destroy(),s=t.platformInjector.get(ev);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(ev);s.add(o),t.moduleRef.onDestroy(()=>{gc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return sV(r,n,()=>{let o=e.get(hr),s=o.add(),a=e.get(qy);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Cs,Tc);if(_S(u||Tc),!e.get(rV,!0))return Ac(t)?e.get(Zr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ac(t)){let h=e.get(Zr);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return oV?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var oV;function sV(t,e,n){try{let r=n();return gr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var rh=null;function aV(t=[],e){return ze.create({name:e,providers:[{provide:nc,useValue:"platform"},{provide:ev,useValue:new Set([()=>rh=null])},...t]})}function cV(t=[]){if(rh)return rh;let e=aV(t);return rh=e,mS(),uV(e),e}function uV(t){let e=t.get(Ud,null);et(t,()=>{e?.forEach(n=>n())})}function nv(){return!1}var uo=(()=>{class t{static __NG_ELEMENT_ID__=lV}return t})();function lV(t){return dV(Ft(),ie(),(t&16)===16)}function dV(t,e,n){if(Gr(t)&&!n){let r=on(t.index,e);return new Zi(r,r)}else if(t.type&175){let r=e[zt];return new Zi(r,e)}return null}function NS(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ye(le.BootstrapApplicationStart);try{let o=i?.injector??cV(r),s=[TS(),_T,...n||[]],a=new _c({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return iV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ye(le.BootstrapApplicationEnd)}}function ih(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var MS=null;function cn(){return MS}function rv(t){MS??=t}var Rc=class{},oh=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>M(PS),providedIn:"platform"})}return t})();var PS=(()=>{class t extends oh{_location;_history;_doc=M(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cn().getBaseHref(this._doc)}onPopState(n){let r=cn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=cn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function kS(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function xS(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ei(t){return t&&t[0]!=="?"?`?${t}`:t}var sh=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>M(fV),providedIn:"root"})}return t})(),hV=new j(""),fV=(()=>{class t extends sh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return kS(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ei(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ei(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ei(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(te(oh),te(hV,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bs=(()=>{class t{_subject=new rt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=mV(xS(OS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ei(r))}normalize(n){return t.stripTrailingSlash(gV(this._basePath,OS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ei(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ei(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ei;static joinWithSlash=kS;static stripTrailingSlash=xS;static \u0275fac=function(r){return new(r||t)(te(sh))};static \u0275prov=B({token:t,factory:()=>pV(),providedIn:"root"})}return t})();function pV(){return new bs(te(sh))}function gV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function OS(t){return t.replace(/\/index.html$/,"")}function mV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var jS={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KGS:[void 0,"\u20C0"],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XCG:["Cg."],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},dv=(function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t})(dv||{});var _t=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(_t||{}),Ce=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Ce||{}),Vt=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Vt||{}),jt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function US(t){return Pt(t)[Pe.LocaleId]}function BS(t,e,n){let r=Pt(t),i=[r[Pe.DayPeriodsFormat],r[Pe.DayPeriodsStandalone]],o=un(i,e);return un(o,n)}function $S(t,e,n){let r=Pt(t),i=[r[Pe.DaysFormat],r[Pe.DaysStandalone]],o=un(i,e);return un(o,n)}function HS(t,e,n){let r=Pt(t),i=[r[Pe.MonthsFormat],r[Pe.MonthsStandalone]],o=un(i,e);return un(o,n)}function zS(t,e){let r=Pt(t)[Pe.Eras];return un(r,e)}function Nc(t,e){let n=Pt(t);return un(n[Pe.DateFormat],e)}function Mc(t,e){let n=Pt(t);return un(n[Pe.TimeFormat],e)}function Pc(t,e){let r=Pt(t)[Pe.DateTimeFormat];return un(r,e)}function Hn(t,e){let n=Pt(t),r=n[Pe.NumberSymbols][e];if(typeof r>"u"){if(e===jt.CurrencyDecimal)return n[Pe.NumberSymbols][jt.Decimal];if(e===jt.CurrencyGroup)return n[Pe.NumberSymbols][jt.Group]}return r}function qS(t,e){return Pt(t)[Pe.NumberFormats][e]}function yV(t){return Pt(t)[Pe.Currencies]}function GS(t){if(!t[Pe.ExtraData])throw new L(2303,!1)}function WS(t){let e=Pt(t);return GS(e),(e[Pe.ExtraData][2]||[]).map(r=>typeof r=="string"?iv(r):[iv(r[0]),iv(r[1])])}function KS(t,e,n){let r=Pt(t);GS(r);let i=[r[Pe.ExtraData][0],r[Pe.ExtraData][1]],o=un(i,e)||[];return un(o,n)||[]}function un(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new L(2304,!1)}function iv(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function QS(t,e,n="en"){let r=yV(n)[t]||jS[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var vV=2;function YS(t){let e,n=jS[t];return n&&(e=n[2]),typeof e=="number"?e:vV}var _V=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ah={},EV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ZS(t,e,n,r){let i=RV(t);e=yr(n,e)||e;let s=[],a;for(;e;)if(a=EV.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=XS(r,u),i=AV(i,r));let l="";return s.forEach(h=>{let p=bV(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function hh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function yr(t,e){let n=US(t);if(ah[n]??={},ah[n][e])return ah[n][e];let r="";switch(e){case"shortDate":r=Nc(t,Vt.Short);break;case"mediumDate":r=Nc(t,Vt.Medium);break;case"longDate":r=Nc(t,Vt.Long);break;case"fullDate":r=Nc(t,Vt.Full);break;case"shortTime":r=Mc(t,Vt.Short);break;case"mediumTime":r=Mc(t,Vt.Medium);break;case"longTime":r=Mc(t,Vt.Long);break;case"fullTime":r=Mc(t,Vt.Full);break;case"short":let i=yr(t,"shortTime"),o=yr(t,"shortDate");r=ch(Pc(t,Vt.Short),[i,o]);break;case"medium":let s=yr(t,"mediumTime"),a=yr(t,"mediumDate");r=ch(Pc(t,Vt.Medium),[s,a]);break;case"long":let u=yr(t,"longTime"),l=yr(t,"longDate");r=ch(Pc(t,Vt.Long),[u,l]);break;case"full":let h=yr(t,"fullTime"),p=yr(t,"fullDate");r=ch(Pc(t,Vt.Full),[h,p]);break}return r&&(ah[n][e]=r),r}function ch(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function wn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function IV(t,e){return wn(t,3).substring(0,e)}function Ge(t,e,n=0,r=!1,i=!1){return function(o,s){let a=wV(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return IV(a,e);let u=Hn(s,jt.MinusSign);return wn(a,e,u,r,i)}}function wV(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new L(2301,!1)}}function be(t,e,n=_t.Format,r=!1){return function(i,o){return DV(i,o,t,e,n,r)}}function DV(t,e,n,r,i,o){switch(n){case 2:return HS(e,i,r)[t.getMonth()];case 1:return $S(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=WS(e),h=KS(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,w]=m,R=s>=y.hours&&a>=y.minutes,A=s<w.hours||s===w.hours&&a<w.minutes;if(y.hours<w.hours){if(R&&A)return!0}else if(R||A)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return BS(e,i,r)[s<12?0:1];case 3:return zS(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new L(2302,!1)}}function uh(t){return function(e,n,r){let i=-1*r,o=Hn(n,jt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+wn(s,2,o)+wn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+wn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+wn(s,2,o)+":"+wn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+wn(s,2,o)+":"+wn(Math.abs(i%60),2,o);default:throw new L(2310,!1)}}}var CV=0,dh=4;function TV(t){let e=hh(t,CV,1).getDay();return hh(t,0,1+(e<=dh?dh:dh+7)-e)}function JS(t){let e=t.getDay(),n=e===0?-3:dh-e;return hh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function ov(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=JS(n),s=TV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return wn(i,t,Hn(r,jt.MinusSign))}}function lh(t,e=!1){return function(n,r){let o=JS(n).getFullYear();return wn(o,t,Hn(r,jt.MinusSign),e)}}var sv={};function bV(t){if(sv[t])return sv[t];let e;switch(t){case"G":case"GG":case"GGG":e=be(3,Ce.Abbreviated);break;case"GGGG":e=be(3,Ce.Wide);break;case"GGGGG":e=be(3,Ce.Narrow);break;case"y":e=Ge(0,1,0,!1,!0);break;case"yy":e=Ge(0,2,0,!0,!0);break;case"yyy":e=Ge(0,3,0,!1,!0);break;case"yyyy":e=Ge(0,4,0,!1,!0);break;case"Y":e=lh(1);break;case"YY":e=lh(2,!0);break;case"YYY":e=lh(3);break;case"YYYY":e=lh(4);break;case"M":case"L":e=Ge(1,1,1);break;case"MM":case"LL":e=Ge(1,2,1);break;case"MMM":e=be(2,Ce.Abbreviated);break;case"MMMM":e=be(2,Ce.Wide);break;case"MMMMM":e=be(2,Ce.Narrow);break;case"LLL":e=be(2,Ce.Abbreviated,_t.Standalone);break;case"LLLL":e=be(2,Ce.Wide,_t.Standalone);break;case"LLLLL":e=be(2,Ce.Narrow,_t.Standalone);break;case"w":e=ov(1);break;case"ww":e=ov(2);break;case"W":e=ov(1,!0);break;case"d":e=Ge(2,1);break;case"dd":e=Ge(2,2);break;case"c":case"cc":e=Ge(7,1);break;case"ccc":e=be(1,Ce.Abbreviated,_t.Standalone);break;case"cccc":e=be(1,Ce.Wide,_t.Standalone);break;case"ccccc":e=be(1,Ce.Narrow,_t.Standalone);break;case"cccccc":e=be(1,Ce.Short,_t.Standalone);break;case"E":case"EE":case"EEE":e=be(1,Ce.Abbreviated);break;case"EEEE":e=be(1,Ce.Wide);break;case"EEEEE":e=be(1,Ce.Narrow);break;case"EEEEEE":e=be(1,Ce.Short);break;case"a":case"aa":case"aaa":e=be(0,Ce.Abbreviated);break;case"aaaa":e=be(0,Ce.Wide);break;case"aaaaa":e=be(0,Ce.Narrow);break;case"b":case"bb":case"bbb":e=be(0,Ce.Abbreviated,_t.Standalone,!0);break;case"bbbb":e=be(0,Ce.Wide,_t.Standalone,!0);break;case"bbbbb":e=be(0,Ce.Narrow,_t.Standalone,!0);break;case"B":case"BB":case"BBB":e=be(0,Ce.Abbreviated,_t.Format,!0);break;case"BBBB":e=be(0,Ce.Wide,_t.Format,!0);break;case"BBBBB":e=be(0,Ce.Narrow,_t.Format,!0);break;case"h":e=Ge(3,1,-12);break;case"hh":e=Ge(3,2,-12);break;case"H":e=Ge(3,1);break;case"HH":e=Ge(3,2);break;case"m":e=Ge(4,1);break;case"mm":e=Ge(4,2);break;case"s":e=Ge(5,1);break;case"ss":e=Ge(5,2);break;case"S":e=Ge(6,1);break;case"SS":e=Ge(6,2);break;case"SSS":e=Ge(6,3);break;case"Z":case"ZZ":case"ZZZ":e=uh(0);break;case"ZZZZZ":e=uh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=uh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=uh(2);break;default:return null}return sv[t]=e,e}function XS(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function SV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function AV(t,e,n){let i=t.getTimezoneOffset(),o=XS(e,i);return SV(t,-1*(o-i))}function RV(t){if(FS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return hh(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(_V))return NV(r)}let e=new Date(t);if(!FS(e))throw new L(2311,!1);return e}function NV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function FS(t){return t instanceof Date&&!isNaN(t.valueOf())}var MV=/^(\d+)?\.((\d+)(-(\d+))?)?$/,LS=22,fh=".",xc="0",PV=";",xV=",",av="#",VS="\xA4";function OV(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=Hn(n,jt.Infinity);else{let l=LV(t);s&&(l=FV(l));let h=e.minInt,p=e.minFrac,m=e.maxFrac;if(o){let U=o.match(MV);if(U===null)throw new L(2306,!1);let z=U[1],he=U[3],nt=U[5];z!=null&&(h=cv(z)),he!=null&&(p=cv(he)),nt!=null?m=cv(nt):he!=null&&p>m&&(m=p)}VV(l,p,m);let y=l.digits,w=l.integerLen,R=l.exponent,A=[];for(u=y.every(U=>!U);w<h;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?A=y.splice(w,y.length):(A=y,y=[0]);let x=[];for(y.length>=e.lgSize&&x.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)x.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&x.unshift(y.join("")),a=x.join(Hn(n,r)),A.length&&(a+=Hn(n,i)+A.join("")),R&&(a+=Hn(n,jt.Exponential)+"+"+R)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function eA(t,e,n,r,i){let o=qS(e,dv.Currency),s=kV(o,Hn(e,jt.MinusSign));return s.minFrac=YS(r),s.maxFrac=s.minFrac,OV(t,s,e,jt.CurrencyGroup,jt.CurrencyDecimal,i).replace(VS,n).replace(VS,"").trim()}function kV(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(PV),i=r[0],o=r[1],s=i.indexOf(fh)!==-1?i.split(fh):[i.substring(0,i.lastIndexOf(xc)+1),i.substring(i.lastIndexOf(xc)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(av));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===xc?n.minFrac=n.maxFrac=h+1:p===av?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(xV);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(av);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function FV(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function LV(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(fh))>-1&&(e=e.replace(fh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===xc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===xc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>LS&&(r=r.splice(0,LS-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function VV(t,e,n){if(e>n)throw new L(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,m,y,w){return m=m+p,w[y]=m<10?m:m-10,u&&(w[y]===0&&y>=l?w.pop():u=!1),m>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function cv(t){let e=parseInt(t);if(isNaN(e))throw new L(2305,!1);return e}function hv(t,e){return new L(2100,!1)}var uv=class{createSubscription(e,n,r){return Ue(()=>e.subscribe({next:n,error:r}))}dispose(e){Ue(()=>e.unsubscribe())}},lv=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},jV=new lv,UV=new uv,Oc=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(Gt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(gr(n))return jV;if(Zd(n))return UV;throw hv(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(ce(uo,16))};static \u0275pipe=Cc({name:"async",type:t,pure:!1})}return t})();var BV="mediumDate",tA=new j(""),nA=new j(""),fv=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??BV,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ZS(n,s,o||this.locale,a)}catch(s){throw hv(t,s.message)}}static \u0275fac=function(r){return new(r||t)(ce(Cs,16),ce(tA,24),ce(nA,24))};static \u0275pipe=Cc({name:"date",type:t,pure:!0})}return t})();var pv=(()=>{class t{_locale;_defaultCurrencyCode;constructor(n,r="USD"){this._locale=n,this._defaultCurrencyCode=r}transform(n,r=this._defaultCurrencyCode,i="symbol",o,s){if(!$V(n))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=QS(a,i==="symbol"?"wide":"narrow",s):a=i);try{let u=HV(n);return eA(u,s,a,r,o)}catch(u){throw hv(t,u.message)}}static \u0275fac=function(r){return new(r||t)(ce(Cs,16),ce(Xy,16))};static \u0275pipe=Cc({name:"currency",type:t,pure:!0})}return t})();function $V(t){return!(t==null||t===""||t!==t)}function HV(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new L(2309,!1);return t}var ti=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yr({type:t});static \u0275inj=ur({})}return t})();function gv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var kc=class{};var rA="browser";var Fc=class{_doc;constructor(e){this._doc=e}manager},ph=(()=>{class t extends Fc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(te(tt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),yh=new j(""),_v=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof ph));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof ph);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(te(yh),te(Ae))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),mv="ng-app-id";function oA(t){for(let e of t)e.remove()}function sA(t,e){let n=e.createElement("style");return n.textContent=t,n}function qV(t,e,n,r){let i=t.head?.querySelectorAll(`style[${mv}="${e}"],link[${mv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(mv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function vv(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Ev=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,qV(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,sA);r?.forEach(i=>this.addUsage(i,this.external,vv))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(oA(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])oA(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,sA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,vv(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(te(tt),te(jd),te(Bd,8),te(to))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),yv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Iv=/%COMP%/g;var cA="%COMP%",GV=`_nghost-${cA}`,WV=`_ngcontent-${cA}`,KV=!0,QV=new j("",{factory:()=>KV});function YV(t){return WV.replace(Iv,t)}function ZV(t){return GV.replace(Iv,t)}function uA(t,e){return e.map(n=>n.replace(Iv,t))}var wv=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.defaultRenderer=new Lc(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof mh?i.applyToHost(n):i instanceof Vc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case In.Emulated:o=new mh(u,l,r,this.appId,h,s,a,p);break;case In.ShadowDom:return new gh(u,n,r,s,a,this.nonce,p,l);case In.ExperimentalIsolatedShadowDom:return new gh(u,n,r,s,a,this.nonce,p);default:o=new Vc(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(te(_v),te(Ev),te(jd),te(QV),te(tt),te(Ae),te(Bd),te(no,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Lc=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(yv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(aA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(aA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=yv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=yv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(jn.DashCase|jn.Important)?e.style.setProperty(n,r,i&jn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&jn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=cn().getGlobalEventTarget(this.doc,e),!e))throw new L(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function aA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var gh=class extends Lc{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,u){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=uA(r.id,l);for(let p of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let p of h){let m=vv(p,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Vc=class extends Lc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?uA(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Yi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},mh=class extends Vc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=YV(l),this.hostAttr=ZV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var vh=class t extends Rc{supportsDOMEvents=!0;static makeCurrent(){rv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=JV();return n==null?null:XV(n)}resetBaseElement(){jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return gv(document.cookie,e)}},jc=null;function JV(){return jc=jc||document.head.querySelector("base"),jc?jc.getAttribute("href"):null}function XV(t){return new URL(t,document.baseURI).pathname}var e2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),lA=["alt","control","meta","shift"],t2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},n2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dA=(()=>{class t extends Fc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),lA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=t2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lA.forEach(s=>{if(s!==i){let a=n2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(te(tt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function Dv(t,e,n){let r=k({rootComponent:t,platformRef:n?.platformRef},r2(e));return NS(r)}function r2(t){return{appProviders:[...c2,...t?.providers??[]],platformProviders:a2}}function i2(){vh.makeCurrent()}function o2(){return new xn}function s2(){return wy(document),document}var a2=[{provide:to,useValue:rA},{provide:Ud,useValue:i2,multi:!0},{provide:tt,useFactory:s2}];var c2=[{provide:nc,useValue:"root"},{provide:xn,useFactory:o2},{provide:yh,useClass:ph,multi:!0},{provide:yh,useClass:dA,multi:!0},wv,Ev,_v,{provide:Ji,useExisting:wv},{provide:kc,useClass:e2},[]];var hA=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(te(tt))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z="primary",Yc=Symbol("RouteTitle"),Av=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ms(t){return new Av(t)}function d2(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ch(t){return new Promise((e,n)=>{t.pipe(sr()).subscribe({next:r=>e(r),error:r=>n(r)})})}function h2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!zn(t[n],e[n]))return!1;return!0}function zn(t,e){let n=t?Rv(t):void 0,r=e?Rv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!IA(t[i],e[i]))return!1;return!0}function Rv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function IA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function wA(t){return t.length>0?t[t.length-1]:null}function mo(t){return Fl(t)?t:gr(t)?Oe(Promise.resolve(t)):se(t)}function DA(t){return Fl(t)?Ch(t):Promise.resolve(t)}var f2={exact:TA,subset:bA},CA={exact:p2,subset:g2,ignored:()=>!0};function fA(t,e,n){return f2[n.paths](t.root,e.root,n.matrixParams)&&CA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function p2(t,e){return zn(t,e)}function TA(t,e,n){if(!fo(t.segments,e.segments)||!Ih(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!TA(t.children[r],e.children[r],n))return!1;return!0}function g2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>IA(t[n],e[n]))}function bA(t,e,n){return SA(t,e,e.segments,n)}function SA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!fo(i,n)||e.hasChildren()||!Ih(i,n,r))}else if(t.segments.length===n.length){if(!fo(t.segments,n)||!Ih(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!bA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!fo(t.segments,i)||!Ih(t.segments,i,r)||!t.children[Z]?!1:SA(t.children[Z],e,o,r)}}function Ih(t,e,n){return e.every((r,i)=>CA[n](t[i].parameters,r.parameters))}var qn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){return v2.serialize(this)}},_e=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wh(this)}},ho=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ms(this.parameters),this._parameterMap}toString(){return RA(this)}};function m2(t,e){return fo(t,e)&&t.every((n,r)=>zn(n.parameters,e[r].parameters))}function fo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function y2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var kh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new po,providedIn:"root"})}return t})(),po=class{parse(e){let n=new Mv(e);return new qn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Uc(e.root,!0)}`,r=I2(e.queryParams),i=typeof e.fragment=="string"?`#${_2(e.fragment)}`:"";return`${n}${r}${i}`}},v2=new po;function wh(t){return t.segments.map(e=>RA(e)).join("/")}function Uc(t,e){if(!t.hasChildren())return wh(t);if(e){let n=t.children[Z]?Uc(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${Uc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=y2(t,(r,i)=>i===Z?[Uc(t.children[Z],!1)]:[`${i}:${Uc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${wh(t)}/${n[0]}`:`${wh(t)}/(${n.join("//")})`}}function AA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _h(t){return AA(t).replace(/%3B/gi,";")}function _2(t){return encodeURI(t)}function Nv(t){return AA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dh(t){return decodeURIComponent(t)}function pA(t){return Dh(t.replace(/\+/g,"%20"))}function RA(t){return`${Nv(t.path)}${E2(t.parameters)}`}function E2(t){return Object.entries(t).map(([e,n])=>`;${Nv(e)}=${Nv(n)}`).join("")}function I2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${_h(n)}=${_h(i)}`).join("&"):`${_h(n)}=${_h(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var w2=/^[^\/()?;#]+/;function Cv(t){let e=t.match(w2);return e?e[0]:""}var D2=/^[^\/()?;=#]+/;function C2(t){let e=t.match(D2);return e?e[0]:""}var T2=/^[^=?&#]+/;function b2(t){let e=t.match(T2);return e?e[0]:""}var S2=/^[^&#]+/;function A2(t){let e=t.match(S2);return e?e[0]:""}var Mv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new _e(e,n)),r}parseSegment(){let e=Cv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new ho(Dh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=C2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Cv(this.remaining);i&&(r=i,this.capture(r))}e[Dh(n)]=Dh(r)}parseQueryParam(e){let n=b2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=A2(this.remaining);s&&(r=s,this.capture(r))}let i=pA(n),o=pA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o??Z]=Object.keys(s).length===1&&s[Z]?s[Z]:new _e([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function NA(t){return t.segments.length>0?new _e([],{[Z]:t}):t}function MA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=MA(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new _e(t.segments,e);return R2(n)}function R2(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new _e(t.segments.concat(e.segments),e.children)}return t}function Ps(t){return t instanceof qn}function N2(t,e,n=null,r=null,i=new po){let o=PA(t);return xA(o,e,n,r,i)}function PA(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new _e(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=NA(r);return e??i}function xA(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return Tv(o,o,o,n,r,i);let s=M2(e);if(s.toRoot())return Tv(o,o,new _e([],{}),n,r,i);let a=P2(s,o,t),u=a.processChildren?$c(a.segmentGroup,a.index,s.commands):kA(a.segmentGroup,a.index,s.commands);return Tv(o,a.segmentGroup,u,n,r,i)}function Th(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function qc(t){return typeof t=="object"&&t!=null&&t.outlets}function gA(t,e,n){t||="\u0275";let r=new qn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function Tv(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>gA(l,p,o)):gA(l,h,o);let a;t===e?a=n:a=OA(t,e,n);let u=NA(MA(a));return new qn(u,s,i)}function OA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=OA(o,e,n)}),new _e(t.segments,r)}var bh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Th(r[0]))throw new L(4003,!1);let i=r.find(qc);if(i&&i!==wA(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function M2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new bh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new bh(n,e,r)}var As=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function P2(t,e,n){if(t.isAbsolute)return new As(e,!0,0);if(!n)return new As(e,!1,NaN);if(n.parent===null)return new As(n,!0,0);let r=Th(t.commands[0])?0:1,i=n.segments.length-1+r;return x2(n,i,t.numberOfDoubleDots)}function x2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new As(r,!1,i-o)}function O2(t){return qc(t[0])?t[0].outlets:{[Z]:t}}function kA(t,e,n){if(t??=new _e([],{}),t.segments.length===0&&t.hasChildren())return $c(t,e,n);let r=k2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new _e(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new _e(t.segments.slice(r.pathIndex),t.children),$c(o,0,i)}else return r.match&&i.length===0?new _e(t.segments,{}):r.match&&!t.hasChildren()?Pv(t,e,n):r.match?$c(t,0,i):Pv(t,e,n)}function $c(t,e,n){if(n.length===0)return new _e(t.segments,{});{let r=O2(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=$c(t.children[Z],e,n);return new _e(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=kA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new _e(t.segments,i)}}function k2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(qc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!yA(u,l,s))return o;r+=2}else{if(!yA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Pv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(qc(o)){let u=F2(o.outlets);return new _e(r,u)}if(i===0&&Th(n[0])){let u=t.segments[e];r.push(new ho(u.path,mA(n[0]))),i++;continue}let s=qc(o)?o.outlets[Z]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Th(a)?(r.push(new ho(s,mA(a))),i+=2):(r.push(new ho(s,{})),i++)}return new _e(r,{})}function F2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Pv(new _e([],{}),0,r))}),e}function mA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function yA(t,e,n){return t==n.path&&zn(e,n.parameters)}var Hc="imperative",dt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(dt||{}),ln=class{id;url;constructor(e,n){this.id=e,this.url=n}},xs=class extends ln{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ni=class extends ln{urlAfterRedirects;type=dt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ut=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ut||{}),Sh=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Sh||{}),vr=class extends ln{reason;code;type=dt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ri=class extends ln{reason;code;type=dt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Gc=class extends ln{error;target;type=dt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ah=class extends ln{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xv=class extends ln{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ov=class extends ln{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kv=class extends ln{urlAfterRedirects;state;type=dt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fv=class extends ln{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lv=class{route;type=dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vv=class{route;type=dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jv=class{snapshot;type=dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uv=class{snapshot;type=dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bv=class{snapshot;type=dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$v=class{snapshot;type=dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wc=class{},Os=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function L2(t){return!(t instanceof Wc)&&!(t instanceof Os)}function V2(t,e){return t.providers&&!t._injector&&(t._injector=Dc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Dn(t){return t.outlet||Z}function j2(t,e){let n=t.filter(r=>Dn(r)===e);return n.push(...t.filter(r=>Dn(r)!==e)),n}function Fs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Hv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Fs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Zc(this.rootInjector)}},Zc=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Hv(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(te(Xe))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=zv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=zv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qv(e,this._root).map(n=>n.value)}};function zv(t,e){if(t===e.value)return e;for(let n of e.children){let r=zv(t,n);if(r)return r}return null}function qv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=qv(t,n);if(r.length)return r.unshift(e),r}return[]}var Yt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ss(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Nh=class extends Rh{snapshot;constructor(e,n){super(e),this.snapshot=n,Jv(this,e)}toString(){return this.snapshot.toString()}};function FA(t){let e=U2(t),n=new ut([new ho("",{})]),r=new ut({}),i=new ut({}),o=new ut({}),s=new ut(""),a=new go(n,r,o,s,i,Z,t,e.root);return a.snapshot=e.root,new Nh(new Yt(a,[]),e)}function U2(t){let e={},n={},r={},o=new Rs([],e,r,"",n,Z,t,null,{});return new Ph("",new Yt(o,[]))}var go=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(we(l=>l[Yc]))??se(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(we(e=>Ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(we(e=>Ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&VA(i)&&(r.resolve[Yc]=i.title),r}var Rs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Yc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ph=class extends Rh{url;constructor(e,n){super(n),this.url=e,Jv(this,n)}toString(){return LA(this._root)}};function Jv(t,e){e.value._routerState=t,e.children.forEach(n=>Jv(t,n))}function LA(t){let e=t.children.length>0?` { ${t.children.map(LA).join(", ")} } `:"";return`${t.value}${e}`}function bv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),zn(e.params,n.params)||t.paramsSubject.next(n.params),h2(e.url,n.url)||t.urlSubject.next(n.url),zn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gv(t,e){let n=zn(t.params,e.params)&&m2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gv(t.parent,e.parent))}function VA(t){return typeof t.title=="string"||t.title===null}var B2=new j(""),jA=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new He;deactivateEvents=new He;attachEvents=new He;detachEvents=new He;routerOutletData=RS();parentContexts=M(Zc);location=M(wc);changeDetector=M(uo);inputBinder=M(Fh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Wv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=qe({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[fr]})}return t})(),Wv=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===go?this.route:e===Zc?this.childContexts:e===B2?this.outletData:this.parent.get(e,n)}},Fh=new j("");var UA=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=pr({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Jr(0,"router-outlet")},dependencies:[jA],encapsulation:2})}return t})();function Xv(t){let e=t.children&&t.children.map(Xv),n=e?ee(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=UA),n}function $2(t,e,n){let r=Kc(t,e._root,n?n._root:void 0);return new Nh(r,e)}function Kc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=H2(t,e,n);return new Yt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Kc(t,a)),s}}let r=z2(e.value),i=e.children.map(o=>Kc(t,o));return new Yt(r,i)}}function H2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Kc(t,r,i);return Kc(t,r)})}function z2(t){return new go(new ut(t.url),new ut(t.params),new ut(t.queryParams),new ut(t.fragment),new ut(t.data),t.outlet,t.component,t)}var Qc=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},BA="ngNavigationCancelingError";function xh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ps(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$A(!1,Ut.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $A(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[BA]=!0,n.cancellationCode=e,n}function q2(t){return HA(t)&&Ps(t.url)}function HA(t){return!!t&&t[BA]}var G2=(t,e,n,r)=>we(i=>(new Kv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Kv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ss(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ss(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ss(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ss(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $v(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Uv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(bv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),bv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Oh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{component;route;constructor(e,n){this.component=e,this.route=n}};function W2(t,e,n){let r=t._root,i=e?e._root:null;return Bc(r,i,n,[r.value])}function K2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ls(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Qg(t)?t:e.get(t):r}function Bc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ss(e);return t.children.forEach(s=>{Q2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zc(a,n.getContext(s),i)),i}function Q2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Y2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Oh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Bc(t,e,a?a.children:null,r,i):Bc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,s))}else s&&zc(e,a,i),i.canActivateChecks.push(new Oh(r)),o.component?Bc(t,null,a?a.children:null,r,i):Bc(t,null,n,r,i);return i}function Y2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!fo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fo(t.url,e.url)||!zn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gv(t,e)||!zn(t.queryParams,e.queryParams);case"paramsChange":default:return!Gv(t,e)}}function zc(t,e,n){let r=Ss(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zc(s,e.children.getContext(o),n):zc(s,null,n):zc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ns(e.outlet.component,i)):n.canDeactivateChecks.push(new Ns(null,i)):n.canDeactivateChecks.push(new Ns(null,i))}function Jc(t){return typeof t=="function"}function Z2(t){return typeof t=="boolean"}function J2(t){return t&&Jc(t.canLoad)}function X2(t){return t&&Jc(t.canActivate)}function ej(t){return t&&Jc(t.canActivateChild)}function tj(t){return t&&Jc(t.canDeactivate)}function nj(t){return t&&Jc(t.canMatch)}function zA(t){return t instanceof Ni||t?.name==="EmptyError"}var Eh=Symbol("INITIAL_VALUE");function ks(){return Mn(t=>bg(t.map(e=>e.pipe(or(1),$l(Eh)))).pipe(we(e=>{for(let n of e)if(n!==!0){if(n===Eh)return Eh;if(n===!1||rj(n))return n}return!0}),gn(e=>e!==Eh),or(1)))}function rj(t){return Ps(t)||t instanceof Qc}function qA(t){return t.aborted?se(void 0).pipe(or(1)):new X(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function GA(t){return Ka(qA(t))}function ij(t,e){return St(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?se(ee(k({},n),{guardsResult:!0})):oj(s,r,i,t).pipe(St(a=>a&&Z2(a)?sj(r,o,t,e):se(a)),we(a=>ee(k({},n),{guardsResult:a})))})}function oj(t,e,n,r){return Oe(t).pipe(St(i=>dj(i.component,i.route,n,e,r)),sr(i=>i!==!0,!0))}function sj(t,e,n,r){return Oe(e).pipe(Ul(i=>ts(cj(i.route.parent,r),aj(i.route,r),lj(t,i.path,n),uj(t,i.route,n))),sr(i=>i!==!0,!0))}function aj(t,e){return t!==null&&e&&e(new Bv(t)),se(!0)}function cj(t,e){return t!==null&&e&&e(new jv(t)),se(!0)}function uj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Ga(()=>{let s=Fs(e)??n,a=Ls(o,s),u=X2(a)?a.canActivate(e,t):et(s,()=>a(e,t));return mo(u).pipe(sr())}));return se(i).pipe(ks())}function lj(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>K2(s)).filter(s=>s!==null).map(s=>Ga(()=>{let a=s.guards.map(u=>{let l=Fs(s.node)??n,h=Ls(u,l),p=ej(h)?h.canActivateChild(r,t):et(l,()=>h(r,t));return mo(p).pipe(sr())});return se(a).pipe(ks())}));return se(o).pipe(ks())}function dj(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let u=Fs(e)??i,l=Ls(a,u),h=tj(l)?l.canDeactivate(t,e,n,r):et(u,()=>l(t,e,n,r));return mo(h).pipe(sr())});return se(s).pipe(ks())}function hj(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return se(!0);let s=o.map(a=>{let u=Ls(a,t),l=J2(u)?u.canLoad(e,n):et(t,()=>u(e,n)),h=mo(l);return i?h.pipe(GA(i)):h});return se(s).pipe(ks(),WA(r))}function WA(t){return _l(At(e=>{if(typeof e!="boolean")throw xh(t,e)}),we(e=>e===!0))}function fj(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let u=Ls(a,t),l=nj(u)?u.canMatch(e,n):et(t,()=>u(e,n)),h=mo(l);return i?h.pipe(GA(i)):h});return se(s).pipe(ks(),WA(r))}var lo=class KA extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,KA.prototype)}},Qv=class QA extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,QA.prototype)}};function pj(t){throw new L(4e3,!1)}function gj(t){throw $A(!1,Ut.GuardRejected)}var mj=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Z])throw pj(`${e.redirectTo}`);i=i.children[Z]}}async applyRedirectCommands(e,n,r,i,o){let s=await yj(n,i,o);if(s instanceof qn)throw new Qv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Qv(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new qn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new _e(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function yj(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Ch(mo(et(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var Yv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vj(t,e,n,r,i,o){let s=YA(t,e,n);return s.matched?(r=V2(e,r),fj(r,e,n,i,o).pipe(we(a=>a===!0?s:k({},Yv)))):se(s)}function YA(t,e,n){if(e.path==="**")return _j(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},Yv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||d2)(n,t,e);if(!i)return k({},Yv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function _j(t){return{matched:!0,parameters:t.length>0?wA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function vA(t,e,n,r){return n.length>0&&wj(t,n,r)?{segmentGroup:new _e(e,Ij(r,new _e(n,t.children))),slicedSegments:[]}:n.length===0&&Dj(t,n,r)?{segmentGroup:new _e(t.segments,Ej(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function Ej(t,e,n,r){let i={};for(let o of n)if(Lh(t,e,o)&&!r[Dn(o)]){let s=new _e([],{});i[Dn(o)]=s}return k(k({},r),i)}function Ij(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&Dn(r)!==Z){let i=new _e([],{});n[Dn(r)]=i}return n}function wj(t,e,n){return n.some(r=>Lh(t,e,r)&&Dn(r)!==Z)}function Dj(t,e,n){return n.some(r=>Lh(t,e,r))}function Lh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Cj(t,e,n){return e.length===0&&!t.children[n]}var Tj=class{};async function bj(t,e,n,r,i,o,s="emptyOnly",a){return new Aj(t,e,n,r,i,s,o,a).recognize()}var Sj=31,Aj=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new mj(this.urlSerializer,this.urlTree)}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}async recognize(){let e=vA(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Yt(r,n),o=new Ph("",i),s=N2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Rs([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Z,n),rootSnapshot:n}}catch(r){if(r instanceof Qv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lo?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Yt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=j2(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=ZA(s);return Rj(a),a}async processSegment(e,n,r,i,o,s,a){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a)}catch(l){if(l instanceof lo||zA(l))continue;throw l}if(Cj(r,i,o))return new Tj;throw new lo(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,u){if(Dn(r)!==s&&(s===Z||!Lh(i,o,r)))throw new lo(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new lo(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=YA(n,i,o);if(!u)throw new lo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Sj&&(this.allowRedirects=!1));let y=new Rs(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,_A(i),Dn(i),i.component??i._loadedComponent??null,i,EA(i)),w=Mh(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(w.params),y.data=Object.freeze(w.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let R=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),A=await this.applyRedirects.lineralizeSegments(i,R);return this.processSegment(e,r,n,A.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Ch(vj(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new lo(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,y=new Rs(p,h,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,_A(r),Dn(r),r.component??r._loadedComponent??null,r,EA(r)),w=Mh(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let{segmentGroup:R,slicedSegments:A}=vA(n,p,m,u);if(A.length===0&&R.hasChildren()){let z=await this.processChildren(l,u,R,y);return new Yt(y,z)}if(u.length===0&&A.length===0)return new Yt(y,[]);let x=Dn(r)===o,U=await this.processSegment(l,u,R,A,x?Z:o,!0,y);return new Yt(y,U instanceof Yt?[U]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Ch(hj(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw gj(n)}return{routes:[],injector:e}}};function Rj(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function Nj(t){let e=t.value.routeConfig;return e&&e.path===""}function ZA(t){let e=[],n=new Set;for(let r of t){if(!Nj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ZA(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!n.has(r))}function _A(t){return t.data||{}}function EA(t){return t.resolve||{}}var Mj=new j("",{factory:()=>bj});function Pj(t,e,n,r,i,o,s){let a=t.get(Mj);return St(u=>se(u).pipe(Mn(l=>a(t,e,n,r,l.extractedUrl,i,o,s)),we(({state:l,tree:h})=>ee(k({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function xj(t,e){return St(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return se(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of JA(u))s.add(l);let a=0;return Oe(s).pipe(Ul(u=>o.has(u)?Oj(u,r,t,e):(u.data=Mh(u,u.parent,t).resolve,se(void 0))),At(()=>a++),Bl(1),St(u=>a===s.size?se(n):Ot))})}function JA(t){let e=t.children.map(n=>JA(n)).flat();return[t,...e]}function Oj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!VA(i)&&(o[Yc]=i.title),Ga(()=>(t.data=Mh(t,t.parent,n).resolve,kj(o,t,e,r).pipe(we(s=>(t._resolvedData=s,t.data=k(k({},t.data),s),null)))))}function kj(t,e,n,r){let i=Rv(t);if(i.length===0)return se({});let o={};return Oe(i).pipe(St(s=>Fj(t[s],e,n,r).pipe(sr(),At(a=>{if(a instanceof Qc)throw xh(new po,a);o[s]=a}))),Bl(1),we(()=>o),Wa(s=>zA(s)?Ot:Tg(s)))}function Fj(t,e,n,r){let i=Fs(e)??r,o=Ls(t,i),s=o.resolve?o.resolve(e,n):et(i,()=>o(e,n));return mo(s)}function Sv(t){return Mn(e=>{let n=t(e);return n?Oe(n).pipe(we(()=>e)):se(e)})}var XA=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[Yc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>M(Lj),providedIn:"root"})}return t})(),Lj=(()=>{class t extends XA{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(te(hA))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vh=new j("",{factory:()=>({})}),jh=new j(""),e0=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Jy);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await DA(et(n,()=>r.loadComponent())),s=await n0(t0(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await Vj(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function Vj(t,e,n,r){let i=await DA(et(n,()=>t.loadChildren())),o=await n0(t0(i)),s;o instanceof Yd||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(n).injector,u=a.get(jh,[],{optional:!0,self:!0}).flat()),{routes:u.map(Xv),injector:a}}function jj(t){return t&&typeof t=="object"&&"default"in t}function t0(t){return jj(t)?t.default:t}async function n0(t){return t}var e_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>M(Uj),providedIn:"root"})}return t})(),Uj=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),r0=new j("");var Bj=()=>{},i0=new j(""),o0=(()=>{class t{currentNavigation=sn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=sn(null);events=new rt;transitionAbortWithErrorSubject=new rt;configLoader=M(e0);environmentInjector=M(Xe);destroyRef=M(_n);urlSerializer=M(kh);rootContexts=M(Zc);location=M(bs);inputBindingEnabled=M(Fh,{optional:!0})!==null;titleStrategy=M(XA);options=M(Vh,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(e_);createViewTransition=M(r0,{optional:!0});navigationErrorHandler=M(i0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Lv(i)),r=i=>this.events.next(new Vv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Ue(()=>{this.transitions?.next(ee(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new ut(null),this.transitions.pipe(gn(r=>r!==null),Mn(r=>{let i=!1,o=new AbortController;return se(r).pipe(Mn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),Ot;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?ee(k({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new ri(s.id,this.urlSerializer.serialize(s.rawUrl),"",Sh.IgnoredSameUrlNavigation)),s.resolve(!1),Ot;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return se(s).pipe(Mn(h=>(this.events.next(new xs(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Ot:Promise.resolve(h))),Pj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),At(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Ah(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:y,extras:w}=s,R=new xs(h,this.urlSerializer.serialize(p),m,y);this.events.next(R);let A=FA(this.rootComponentType).snapshot;return this.currentTransition=r=ee(k({},s),{targetSnapshot:A,urlAfterRedirects:p,extras:ee(k({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=p,x)),se(r)}else return this.events.next(new ri(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Sh.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Ot}),At(s=>{let a=new xv(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),we(s=>(this.currentTransition=r=ee(k({},s),{guards:W2(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),ij(this.environmentInjector,s=>this.events.next(s)),At(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw xh(this.urlSerializer,s.guardsResult);let a=new Ov(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),gn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ut.GuardRejected),!1)),Sv(s=>{if(s.guards.canActivateChecks.length!==0)return se(s).pipe(At(a=>{let u=new kv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Mn(a=>{let u=!1;return se(a).pipe(xj(this.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Ut.NoDataFromResolver)}}))}),At(a=>{let u=new Fv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Sv(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Fs(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?se(s):Oe(Promise.all(u).then(()=>s))}),Sv(()=>this.afterPreactivation()),Mn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Oe(u).pipe(we(()=>r)):se(r)}),we(s=>{let a=$2(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ee(k({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),At(()=>{this.events.next(new Wc)}),G2(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),or(1),Ka(qA(o.signal).pipe(gn(()=>!i&&!r.targetRouterState),At(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ut.Aborted)}))),At({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=Bj,a)),this.lastSuccessfulNavigation.set(Ue(this.currentNavigation)),this.events.next(new ni(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ka(this.transitionAbortWithErrorSubject.pipe(At(s=>{throw s}))),Rg(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Wa(s=>{if(this.destroyed)return r.resolve(!1),Ot;if(i=!0,HA(s))this.events.next(new vr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),q2(s)?this.events.next(new Os(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Gc(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=et(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Qc){let{message:l,cancellationCode:h}=xh(this.urlSerializer,u);this.events.next(new vr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Os(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Ot}))}))}cancelNavigationTransition(n,r,i){let o=new vr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ue(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $j(t){return t!==Hc}var Hj=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>M(zj),providedIn:"root"})}return t})(),Zv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},zj=(()=>{class t extends Zv{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Bn(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),t_=(()=>{class t{urlSerializer=M(kh);options=M(Vh,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(bs);urlHandlingStrategy=M(e_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof qn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=FA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>M(s0),providedIn:"root"})}return t})(),s0=(()=>{class t extends t_{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof xs?this.updateStateMemento():n instanceof ri?this.commitTransition(r):n instanceof Ah?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Wc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof vr&&n.code!==Ut.SupersededByNewNavigation&&n.code!==Ut.Redirect?this.restoreHistory(r):n instanceof Gc?this.restoreHistory(r,!0):n instanceof ni&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Bn(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function a0(t,e){t.events.pipe(gn(n=>n instanceof ni||n instanceof vr||n instanceof Gc||n instanceof ri),we(n=>n instanceof ni||n instanceof ri?0:(n instanceof vr?n.code===Ut.Redirect||n.code===Ut.SupersededByNewNavigation:!1)?2:1),gn(n=>n!==2),or(1)).subscribe(()=>{e()})}var qj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},n_=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M($y);stateManager=M(t_);options=M(Vh,{optional:!0})||{};pendingTasks=M(hr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(o0);urlSerializer=M(kh);location=M(bs);urlHandlingStrategy=M(e_);injector=M(Xe);_events=new rt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(Hj);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(jh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Fh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ue(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof vr&&r.code!==Ut.Redirect&&r.code!==Ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ni)this.navigated=!0;else if(r instanceof Os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$j(i.source)},s);this.scheduleNavigation(a,Hc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}L2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Gt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ue(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Xv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=PA(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return xA(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ps(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Hc,null,r)}navigate(n,r={skipLocationChange:!1}){return Wj(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(is(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=k({},qj):r===!1?i=k({},Gj):i=r,Ps(n))return fA(this.currentUrlTree,n,i);let o=this.parseUrl(n);return fA(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return a0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Wj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new L(4008,!1)}var Kj=new j("");function r_(t,...e){return Ht([{provide:jh,multi:!0,useValue:t},[],{provide:go,useFactory:Qj},{provide:Jd,multi:!0,useFactory:Yj},e.map(n=>n.\u0275providers)])}function Qj(){return M(n_).routerState.root}function Yj(){let t=M(ze);return e=>{let n=t.get(Zr);if(e!==n.components[0])return;let r=t.get(n_),i=t.get(Zj);t.get(Jj)===1&&r.initialNavigation(),t.get(Xj,null,{optional:!0})?.setUpPreloading(),t.get(Kj,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Zj=new j("",{factory:()=>new rt}),Jj=new j("",{factory:()=>1});var Xj=new j("");var c0=[];var u0=()=>{};var h0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Uh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new o_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},o_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},nU=function(t){let e=h0(t);return Uh.encodeByteArray(e,!0)},eu=function(t){return nU(t).replace(/\./g,"")},Bh=function(t){try{return Uh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var rU=()=>a_().__FIREBASE_DEFAULTS__,iU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Bh(t[1]);return e&&JSON.parse(e)},$h=()=>{try{return u0()||rU()||iU()||oU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c_=t=>{var e,n;return(n=(e=$h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},f0=t=>{let e=c_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},u_=()=>{var t;return(t=$h())===null||t===void 0?void 0:t.config},l_=t=>{var e;return(e=$h())===null||e===void 0?void 0:e[`_${t}`]};var yo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ii(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hh(t){return(await fetch(t,{credentials:"include"})).ok}function p0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eu(JSON.stringify(n)),eu(JSON.stringify(s)),""].join(".")}var Xc={};function sU(){let t={prod:[],emulator:[]};for(let e of Object.keys(Xc))Xc[e]?t.emulator.push(e):t.prod.push(e);return t}function aU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var l0=!1;function zh(t,e){if(typeof window>"u"||typeof document>"u"||!ii(window.location.host)||Xc[t]===e||Xc[t]||l0)return;Xc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=sU().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{l0=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=aU(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),A=document.getElementById(R)||document.createElement("a"),x=n("preprendIcon"),U=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let z=m.element;a(z),h(A,R);let he=l();u(U,x),z.append(U,w,A,he),document.body.appendChild(z)}o?(w.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function cU(){var t;let e=(t=$h())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function v0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _0(){let t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E0(){return!cU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tu(){try{return typeof indexedDB=="object"}catch{return!1}}function I0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var uU="FirebaseError",Zt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}},Cn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?lU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Zt(i,a,r)}};function lU(t,e){return t.replace(dU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var dU=/\{\$([^}]+)}/g;function w0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(d0(o)&&d0(s)){if(!Gn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function d0(t){return t!==null&&typeof t=="object"}function Vs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function D0(t,e){let n=new s_(t,e);return n.subscribe.bind(n)}var s_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=i_),i.error===void 0&&(i.error=i_),i.complete===void 0&&(i.complete=i_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function hU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function i_(){}var Ere=14400*1e3;function ht(t){return t&&t._delegate?t._delegate:t}var xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var vo="[DEFAULT]";var d_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new yo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pU(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function fU(t){return t===vo?void 0:t}function pU(t){return t.instantiationMode==="EAGER"}var qh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new d_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var gU=[],oe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(oe||{}),mU={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},yU=oe.INFO,vU={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},_U=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=vU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wn=class{constructor(e){this.name=e,this._logLevel=yU,this._logHandler=_U,this._userLogHandler=null,gU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var EU=(t,e)=>e.some(n=>t instanceof n),C0,T0;function IU(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wU(){return T0||(T0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var b0=new WeakMap,f_=new WeakMap,S0=new WeakMap,h_=new WeakMap,g_=new WeakMap;function DU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Kn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&b0.set(n,t)}).catch(()=>{}),g_.set(e,t),e}function CU(t){if(f_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});f_.set(t,e)}var p_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return f_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||S0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function A0(t){p_=t(p_)}function TU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Gh(this),e,...n);return S0.set(r,e.sort?e.sort():[e]),Kn(r)}:wU().includes(t)?function(...e){return t.apply(Gh(this),e),Kn(b0.get(this))}:function(...e){return Kn(t.apply(Gh(this),e))}}function bU(t){return typeof t=="function"?TU(t):(t instanceof IDBTransaction&&CU(t),EU(t,IU())?new Proxy(t,p_):t)}function Kn(t){if(t instanceof IDBRequest)return DU(t);if(h_.has(t))return h_.get(t);let e=bU(t);return e!==t&&(h_.set(t,e),g_.set(e,t)),e}var Gh=t=>g_.get(t);function N0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Kn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Kn(s.result),u.oldVersion,u.newVersion,Kn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var SU=["get","getKey","getAll","getAllKeys","count"],AU=["put","add","delete","clear"],m_=new Map;function R0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(m_.get(e))return m_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=AU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SU.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return m_.set(e,o),o}A0(t=>ee(k({},t),{get:(e,n,r)=>R0(e,n)||t.get(e,n,r),has:(e,n)=>!!R0(e,n)||t.has(e,n)}));var v_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function RU(t){let e=t.getComponent();return e?.type==="VERSION"}var __="@firebase/app",M0="0.13.2";var _r=new Wn("@firebase/app"),NU="@firebase/app-compat",MU="@firebase/analytics-compat",PU="@firebase/analytics",xU="@firebase/app-check-compat",OU="@firebase/app-check",kU="@firebase/auth",FU="@firebase/auth-compat",LU="@firebase/database",VU="@firebase/data-connect",jU="@firebase/database-compat",UU="@firebase/functions",BU="@firebase/functions-compat",$U="@firebase/installations",HU="@firebase/installations-compat",zU="@firebase/messaging",qU="@firebase/messaging-compat",GU="@firebase/performance",WU="@firebase/performance-compat",KU="@firebase/remote-config",QU="@firebase/remote-config-compat",YU="@firebase/storage",ZU="@firebase/storage-compat",JU="@firebase/firestore",XU="@firebase/ai",eB="@firebase/firestore-compat",tB="firebase",nB="11.10.0";var E_="[DEFAULT]",rB={[__]:"fire-core",[NU]:"fire-core-compat",[PU]:"fire-analytics",[MU]:"fire-analytics-compat",[OU]:"fire-app-check",[xU]:"fire-app-check-compat",[kU]:"fire-auth",[FU]:"fire-auth-compat",[LU]:"fire-rtdb",[VU]:"fire-data-connect",[jU]:"fire-rtdb-compat",[UU]:"fire-fn",[BU]:"fire-fn-compat",[$U]:"fire-iid",[HU]:"fire-iid-compat",[zU]:"fire-fcm",[qU]:"fire-fcm-compat",[GU]:"fire-perf",[WU]:"fire-perf-compat",[KU]:"fire-rc",[QU]:"fire-rc-compat",[YU]:"fire-gcs",[ZU]:"fire-gcs-compat",[JU]:"fire-fst",[eB]:"fire-fst-compat",[XU]:"fire-vertex","fire-js":"fire-js",[tB]:"fire-js-all"};var nu=new Map,iB=new Map,I_=new Map;function P0(t,e){try{t.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){let e=t.name;if(I_.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;I_.set(e,t);for(let n of nu.values())P0(n,t);for(let n of iB.values())P0(n,t);return!0}function js(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jt(t){return t==null?!1:t.settings!==void 0}var oB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new Cn("app","Firebase",oB);var w_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}};var si=nB;function T_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:E_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(n||(n=u_()),!n)throw oi.create("no-options");let o=nu.get(i);if(o){if(Gn(n,o.options)&&Gn(r,o.config))return o;throw oi.create("duplicate-app",{appName:i})}let s=new qh(i);for(let u of I_.values())s.addComponent(u);let a=new w_(n,r,s);return nu.set(i,a),a}function _o(t=E_){let e=nu.get(t);if(!e&&t===E_&&u_())return T_();if(!e)throw oi.create("no-app",{appName:t});return e}function Wh(){return Array.from(nu.values())}function ke(t,e,n){var r;let i=(r=rB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(a.join(" "));return}Tn(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var sB="firebase-heartbeat-database",aB=1,ru="firebase-heartbeat-store",y_=null;function F0(){return y_||(y_=N0(sB,aB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(t=>{throw oi.create("idb-open",{originalErrorMessage:t.message})})),y_}async function cB(t){try{let n=(await F0()).transaction(ru),r=await n.objectStore(ru).get(L0(t));return await n.done,r}catch(e){if(e instanceof Zt)_r.warn(e.message);else{let n=oi.create("idb-get",{originalErrorMessage:e?.message});_r.warn(n.message)}}}async function x0(t,e){try{let r=(await F0()).transaction(ru,"readwrite");await r.objectStore(ru).put(e,L0(t)),await r.done}catch(n){if(n instanceof Zt)_r.warn(n.message);else{let r=oi.create("idb-set",{originalErrorMessage:n?.message});_r.warn(r.message)}}}function L0(t){return`${t.name}!${t.options.appId}`}var uB=1024,lB=30,D_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new C_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=O0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>lB){let s=hB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=O0(),{heartbeatsToSend:r,unsentEntries:i}=dB(this._heartbeatsCache.heartbeats),o=eu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return _r.warn(n),""}}};function O0(){return new Date().toISOString().substring(0,10)}function dB(t,e=uB){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),k0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),k0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var C_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tu()?I0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await cB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return x0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return x0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function k0(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}function hB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function fB(t){Tn(new xt("platform-logger",e=>new v_(e),"PRIVATE")),Tn(new xt("heartbeat",e=>new D_(e),"PRIVATE")),ke(__,M0,t),ke(__,M0,"esm2017"),ke("fire-js","")}fB("");var pB="firebase",gB="11.10.0";ke(pB,gB,"app");function V0(t){t===void 0&&(t=M(ze));let e=t.get(hs);return n=>new X(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ai=new Pi("ANGULARFIRE2_VERSION");function iu(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Bs=(t,e)=>{let n=e?[e]:Wh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Us=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Us||{}),j0=nv()&&typeof Zone<"u"?Us.WARN:Us.SILENT;var Kh=class{zone;delegate;constructor(e,n=Cg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},ci=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(Ae);this.outsideAngular=n.runOutsideAngular(()=>new Kh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Kh(typeof Zone>"u"?void 0:Zone.current,Dg))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),U0=!1;function mB(t,e){!U0&&(j0>Us.SILENT||nv())&&(U0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),j0>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function yB(t){let e=M(Ae,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Eo(t){let e=M(Ae,{optional:!0});return e?e.run(()=>t()):t()}var vB=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),et(n,()=>Eo(()=>t.apply(void 0,r)))),Et=(t,e,n)=>(n||=e?Us.WARN:Us.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(ci),s=M(hs),a=M(Xe)}catch{return mB(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Eo(()=>s.add())),i[l]=vB(i[l],r,a));let u=yB(()=>t.apply(this,i));return e?u instanceof X?u.pipe(jr(o.outsideAngular),Vr(o.insideAngular),V0(a)):u instanceof Promise?Eo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>et(a,()=>Eo(()=>h(m))),m=>et(a,()=>Eo(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Eo(()=>u):u instanceof X?u.pipe(jr(o.outsideAngular),Vr(o.insideAngular)):Eo(()=>u)});var Er=class{constructor(e){return e}},Io=class{constructor(){return Wh()}};function _B(t){return t&&t.length===1?t[0]:new Er(_o())}var b_=new j("angularfire2._apps"),EB={provide:Er,useFactory:_B,deps:[[new Wt,b_]]},IB={provide:Io,deps:[[new Wt,b_]]};function wB(t){return(e,n)=>{let r=n.get(to);ke("angularfire",ai.full,"core"),ke("angularfire",ai.full,"app"),ke("angular",Gg.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Er(i)}}function B0(t,...e){return Ht([EB,IB,{provide:b_,useFactory:wB(t),multi:!0,deps:[Ae,ze,ci,...e]}])}var $0=Et(T_,!0);var DB=new Map,CB={activated:!1,tokenObservers:[]},TB={initialized:!1,enabled:!1};function bn(t){return DB.get(t)||Object.assign({},CB)}function G0(){return TB}var bB="https://content-firebaseappcheck.googleapis.com/v1";var SB="exchangeDebugToken",H0={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Eie=1440*60*1e3;var R_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new yo,this.pending.promise.catch(n=>{}),await AB(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new yo,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function AB(t){return new Promise(e=>{setTimeout(e,t)})}var RB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ui=new Cn("appCheck","AppCheck",RB);function W0(t){if(!bn(t).activated)throw ui.create("use-before-activation",{appName:t.name})}async function K0({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw ui.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw ui.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw ui.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function Q0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${bB}/projects/${n}/apps/${r}:${SB}?key=${i}`,body:{debug_token:e}}}var NB="firebase-app-check-database",MB=1,N_="firebase-app-check-store";var Qh=null;function PB(){return Qh||(Qh=new Promise((t,e)=>{try{let n=indexedDB.open(NB,MB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ui.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(N_,{keyPath:"compositeKey"})}}}catch(n){e(ui.create("storage-open",{originalErrorMessage:n?.message}))}}),Qh)}function xB(t,e){return OB(kB(t),e)}async function OB(t,e){let r=(await PB()).transaction(N_,"readwrite"),o=r.objectStore(N_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ui.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function kB(t){return`${t.options.appId}-${t.name}`}var ou=new Wn("@firebase/app-check");function S_(t,e){return tu()?xB(t,e).catch(n=>{ou.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Y0(){return G0().enabled}async function Z0(){let t=G0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var FB={error:"UNKNOWN_ERROR"};function LB(t){return Uh.encodeString(JSON.stringify(t),!1)}async function M_(t,e=!1,n=!1){let r=t.app;W0(r);let i=bn(r),o=i.token,s;if(o&&!su(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(su(l)?o=l:await S_(r,void 0))}if(!e&&o&&su(o))return{token:o.token};let a=!1;if(Y0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=K0(Q0(r,await Z0()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await S_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ou.warn(l.message):n&&ou.error(l),A_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await bn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ou.warn(l.message):n&&ou.error(l),s=l}let u;return o?s?su(o)?u={token:o.token,internalError:s}:u=A_(s):(u={token:o.token},i.token=o,await S_(r,o)):u=A_(s),a&&BB(r,u),u}async function VB(t){let e=t.app;W0(e);let{provider:n}=bn(e);if(Y0()){let r=await Z0(),{token:i}=await K0(Q0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function jB(t,e,n,r){let{app:i}=t,o=bn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&su(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),z0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>z0(t))}function J0(t,e){let n=bn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function z0(t){let{app:e}=t,n=bn(e),r=n.tokenRefresher;r||(r=UB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function UB(t){let{app:e}=t;return new R_(async()=>{let n=bn(e),r;if(n.token?r=await M_(t,!0):r=await M_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=bn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},H0.RETRIAL_MIN_WAIT,H0.RETRIAL_MAX_WAIT)}function BB(t,e){let n=bn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function su(t){return t.expireTimeMillis-Date.now()>0}function A_(t){return{token:LB(FB),error:t}}var P_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=bn(this.app);for(let n of e)J0(this.app,n.next);return Promise.resolve()}};function $B(t,e){return new P_(t,e)}function HB(t){return{getToken:e=>M_(t,e),getLimitedUseToken:()=>VB(t),addTokenListener:e=>jB(t,"INTERNAL",e),removeTokenListener:e=>J0(t.app,e)}}var zB="@firebase/app-check",qB="0.10.1";var GB="app-check",q0="app-check-internal";function WB(){Tn(new xt(GB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return $B(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(q0).initialize()})),Tn(new xt(q0,t=>{let e=t.getProvider("app-check").getImmediate();return HB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ke(zB,qB)}WB();var KB="app-check";var $s=class{constructor(){return Bs(KB)}};var QB=["localhost","0.0.0.0","127.0.0.1"],Pie=typeof window<"u"&&QB.includes(window.location.hostname);function fR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pR=fR,gR=new Cn("auth","Firebase",fR());var tf=new Wn("@firebase/auth");function YB(t,...e){tf.logLevel<=oe.WARN&&tf.warn(`Auth (${si}): ${t}`,...e)}function Zh(t,...e){tf.logLevel<=oe.ERROR&&tf.error(`Auth (${si}): ${t}`,...e)}function Yn(t,...e){throw Y_(t,...e)}function Sn(t,...e){return Y_(t,...e)}function Q_(t,e,n){let r=Object.assign(Object.assign({},pR()),{[e]:n});return new Cn("auth","Firebase",r).create(e,{appName:t.name})}function wo(t){return Q_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZB(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Yn(t,"argument-error"),Q_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Y_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gR.create(t,...e)}function W(t,e,...n){if(!t)throw Y_(e,...n)}function Ir(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Zh(e),new Error(e)}function Dr(t,e){t||Ir(e)}function k_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JB(){return X0()==="http:"||X0()==="https:"}function X0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function XB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JB()||y0()||"connection"in navigator)?navigator.onLine:!0}function e$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Do=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dr(n>e,"Short delay should be less than long delay!"),this.isMobile=g0()||v0()}get(){return XB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Z_(t,e){Dr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var nf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var t$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var n$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r$=new Do(3e4,6e4);function J_(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zs(t,e,n,r,i={}){return mR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Vs(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return m0()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ii(t.emulatorConfig.host)&&(l.credentials="include"),nf.fetch()(await yR(t,t.config.apiHost,n,a),l)})}async function mR(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},t$),e);try{let i=new F_(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Yh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Yh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Yh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Q_(t,h,l);Yn(t,h)}}catch(i){if(i instanceof Zt)throw i;Yn(t,"network-request-failed",{message:String(i)})}}async function i$(t,e,n,r,i={}){let o=await zs(t,e,n,r,i);return"mfaPendingCredential"in o&&Yn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function yR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Z_(t.config,i):`${t.config.apiScheme}://${i}`;return n$.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var F_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),r$.get())})}};function Yh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Sn(t,e,r);return i.customData._tokenResponse=n,i}async function o$(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function rf(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}function au(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function X_(t,e=!1){let n=ht(t),r=await n.getIdToken(e),i=eE(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:au(x_(i.auth_time)),issuedAtTime:au(x_(i.iat)),expirationTime:au(x_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function x_(t){return Number(t)*1e3}function eE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bh(n);return i?JSON.parse(i):(Zh("Failed to decode base64 JWT payload"),null)}catch(i){return Zh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eR(t){let e=eE(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function uu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zt&&s$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function s$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var L_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var lu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function of(t){var e;let n=t.auth,r=await t.getIdToken(),i=await uu(t,rf(n,{idToken:r}));W(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?vR(o.providerUserInfo):[],a=a$(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new lu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function tE(t){let e=ht(t);await of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vR(t){return t.map(e=>{var{providerId:n}=e,r=Tl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function c$(t,e){let n=await mR(t,{},async()=>{let r=Vs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await yR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&ii(t.emulatorConfig.host)&&(u.credentials="include"),nf.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function u$(t,e){return zs(t,"POST","/v2/accounts:revokeToken",J_(t,e))}var cu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=eR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await c$(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ir("not implemented")}};function li(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var di=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Tl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new L_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await uu(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return X_(this,e)}reload(){return tE(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jt(this.auth.app))return Promise.reject(wo(this.auth));let e=await this.getIdToken();return await uu(this,o$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:he,isAnonymous:nt,providerData:Ie,stsTokenManager:D}=n;W(z&&D,e,"internal-error");let v=cu.fromJSON(this.name,D);W(typeof z=="string",e,"internal-error"),li(p,e.name),li(m,e.name),W(typeof he=="boolean",e,"internal-error"),W(typeof nt=="boolean",e,"internal-error"),li(y,e.name),li(w,e.name),li(R,e.name),li(A,e.name),li(x,e.name),li(U,e.name);let E=new t({uid:z,auth:e,email:m,emailVerified:he,displayName:p,isAnonymous:nt,photoURL:w,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:x,lastLoginAt:U});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(I=>Object.assign({},I))),A&&(E._redirectEventId=A),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new cu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await of(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?vR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new cu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new lu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var tR=new Map;function wr(t){Dr(t instanceof Function,"Expected a class definition");let e=tR.get(t);return e?(Dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tR.set(t,e),e)}var l$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),V_=l$;function Jh(t,e,n){return`firebase:${t}:${e}:${n}`}var sf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Jh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Jh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await rf(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(wr(V_),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||wr(V_),s=Jh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await rf(e,{idToken:h}).catch(()=>{});if(!m)break;p=await di._fromGetAccountInfoResponse(e,m,h)}else p=di._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function nR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_R(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CR(e))return"Blackberry";if(TR(e))return"Webos";if(ER(e))return"Safari";if((e.includes("chrome/")||IR(e))&&!e.includes("edge/"))return"Chrome";if(DR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function _R(t=ot()){return/firefox\//i.test(t)}function ER(t=ot()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IR(t=ot()){return/crios\//i.test(t)}function wR(t=ot()){return/iemobile/i.test(t)}function DR(t=ot()){return/android/i.test(t)}function CR(t=ot()){return/blackberry/i.test(t)}function TR(t=ot()){return/webos/i.test(t)}function nE(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function d$(t=ot()){var e;return nE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h$(){return _0()&&document.documentMode===10}function bR(t=ot()){return nE(t)||DR(t)||TR(t)||CR(t)||/windows phone/i.test(t)||wR(t)}function SR(t,e=[]){let n;switch(t){case"Browser":n=nR(ot());break;case"Worker":n=`${nR(ot())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${si}/${r}`}var j_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function f$(t,e={}){return zs(t,"GET","/v2/passwordPolicy",J_(t,e))}var p$=6,U_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:p$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var B_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new af(this),this.idTokenSubscription=new af(this),this.beforeStateQueue=new j_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wr(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await sf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await rf(this,{idToken:e}),r=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await of(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jt(this.app))return Promise.reject(wo(this));let n=e?ht(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jt(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jt(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await f$(this),n=new U_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await u$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&wr(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await sf.create(this,[wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&YB(`Error while retrieving App Check token: ${n.error}`),n?.token}};function gf(t){return ht(t)}var af=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=D0(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g$(t){rE=t}function m$(t){return rE.loadJS(t)}function y$(){return rE.gapiScript}function AR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function iE(t,e){let n=js(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Gn(o,e??{}))return i;Yn(i,"already-initialized")}return n.initialize({options:e})}function v$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(wr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function oE(t,e,n){let r=gf(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=RR(e),{host:s,port:a}=_$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(Gn(l,r.config.emulator)&&Gn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ii(s)?(Hh(`${o}//${s}${u}`),zh("Auth",!0)):i||E$()}function RR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _$(t){let e=RR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:rR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:rR(s)}}}function rR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function E$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var du=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}};async function Hs(t,e){return i$(t,"POST","/v1/accounts:signInWithIdp",J_(t,e))}var I$="http://localhost",cf=class t extends du{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Tl(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Hs(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}buildRequest(){let e={requestUri:I$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vs(n)}return e}};var hu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var uf=class extends hu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var sE=(()=>{class t extends uf{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return cf._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var fu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await di._fromIdTokenResponse(e,r,i),s=iR(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=iR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function iR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var $_=class t extends Zt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function NR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$_._fromErrorAndOperation(t,o,e,r):o})}async function w$(t,e,n=!1){let r=await uu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fu._forOperation(t,"link",r)}async function D$(t,e,n=!1){let{auth:r}=t;if(Jt(r.app))return Promise.reject(wo(r));let i="reauthenticate";try{let o=await uu(t,NR(r,i,e,t),n);W(o.idToken,r,"internal-error");let s=eE(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(t.uid===a,r,"user-mismatch"),fu._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Yn(r,"user-mismatch"),o}}async function C$(t,e,n=!1){if(Jt(t.app))return Promise.reject(wo(t));let r="signIn",i=await NR(t,r,e),o=await fu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function gu(t,e,n,r){return ht(t).onIdTokenChanged(e,n,r)}function aE(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function cE(t){return ht(t).signOut()}var lf="__sak";var df=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lf,"1"),this.storage.removeItem(lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var T$=1e3,b$=10,S$=(()=>{class t extends df{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);h$()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,b$):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},T$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),MR=S$;var A$=(()=>{class t extends df{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),uE=A$;function R$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var N$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await R$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function lE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var H_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=lE("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Qn(){return window}function M$(t){Qn().location.href=t}function PR(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}async function P$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function x$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O$(){return PR()?self:null}var xR="firebaseLocalStorageDb",k$=1,hf="firebaseLocalStorage",OR="fbase_key",Co=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function mf(t,e){return t.transaction([hf],e?"readwrite":"readonly").objectStore(hf)}function F$(){let t=indexedDB.deleteDatabase(xR);return new Co(t).toPromise()}function z_(){let t=indexedDB.open(xR,k$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(hf,{keyPath:OR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(hf)?e(r):(r.close(),await F$(),e(await z_()))})})}async function oR(t,e,n){let r=mf(t,!0).put({[OR]:e,value:n});return new Co(r).toPromise()}async function L$(t,e){let n=mf(t,!1).get(e),r=await new Co(n).toPromise();return r===void 0?null:r.value}function sR(t,e){let n=mf(t,!0).delete(e);return new Co(n).toPromise()}var V$=800,j$=3,U$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await z_(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>j$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=N$._getInstance(O$()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await P$(),!this.activeServiceWorker)return;this.sender=new H_(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||x$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await z_();return await oR(n,lf,"1"),await sR(n,lf),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>oR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>L$(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=mf(o,!1).getAll();return new Co(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),kR=U$;var $ie=AR("rcb"),Hie=new Do(3e4,6e4);function FR(t,e){return e?wr(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var pu=class extends du{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function B$(t){return C$(t.auth,new pu(t),t.bypassAuthState)}function $$(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),D$(n,new pu(t),t.bypassAuthState)}async function H$(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),w$(n,new pu(t),t.bypassAuthState)}var ff=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B$;case"linkViaPopup":case"linkViaRedirect":return H$;case"reauthViaPopup":case"reauthViaRedirect":return $$;default:Yn(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var z$=new Do(2e3,1e4);async function dE(t,e,n){if(Jt(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));let r=gf(t);ZB(t,e,hu);let i=FR(r,n);return new q$(r,"signInViaPopup",e,i).executeNotNull()}var q$=(()=>{class t extends ff{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let n=await this.execute();return W(n,this.auth,"internal-error"),n}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");let n=lE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,z$.get())};n()}}t.currentPopupAction=null;return t})(),G$="pendingRedirect",Xh=new Map,q_=class extends ff{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{let r=await W$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function W$(t,e){let n=Y$(e),r=Q$(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function K$(t,e){Xh.set(t._key(),e)}function Q$(t){return wr(t._redirectPersistence)}function Y$(t){return Jh(G$,t.config.apiKey,t.name)}async function Z$(t,e,n=!1){if(Jt(t.app))return Promise.reject(wo(t));let r=gf(t),i=FR(r,e),s=await new q_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var J$=600*1e3,G_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J$&&this.cachedEventUids.clear(),this.cachedEventUids.has(aR(e))}saveEventToCache(e){this.cachedEventUids.add(aR(e)),this.lastProcessedEventTime=Date.now()}};function aR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function X$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LR(t);default:return!1}}async function eH(t,e={}){return zs(t,"GET","/v1/projects",e)}var tH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nH=/^https?/;async function rH(t){if(t.config.emulator)return;let{authorizedDomains:e}=await eH(t);for(let n of e)try{if(iH(n))return}catch{}Yn(t,"unauthorized-domain")}function iH(t){let e=k_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!nH.test(n))return!1;if(tH.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var oH=new Do(3e4,6e4);function cR(){let t=Qn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sH(t){return new Promise((e,n)=>{var r,i,o;function s(){cR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cR(),n(Sn(t,"network-request-failed"))},timeout:oH.get()})}if(!((i=(r=Qn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Qn().gapi)===null||o===void 0)&&o.load)s();else{let a=AR("iframefcb");return Qn()[a]=()=>{gapi.load?s():n(Sn(t,"network-request-failed"))},m$(`${y$()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ef=null,e})}var ef=null;function aH(t){return ef=ef||sH(t),ef}var cH=new Do(5e3,15e3),uH="__/auth/iframe",lH="emulator/auth/iframe",dH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fH(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Z_(e,lH):`https://${t.config.authDomain}/${uH}`,r={apiKey:e.apiKey,appName:t.name,v:si},i=hH.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Vs(r).slice(1)}`}async function pH(t){let e=await aH(t),n=Qn().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:fH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dH,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Sn(t,"network-request-failed"),a=Qn().setTimeout(()=>{o(s)},cH.get());function u(){Qn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var gH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mH=500,yH=600,vH="_blank",_H="http://localhost",pf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function EH(t,e,n,r=mH,i=yH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},gH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ot().toLowerCase();n&&(a=IR(l)?vH:n),_R(l)&&(e=e||_H,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,w])=>`${m}${y}=${w},`,"");if(d$(l)&&a!=="_self")return IH(e||"",a),new pf(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new pf(p)}function IH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var wH="__/auth/handler",DH="emulator/auth/handler",CH=encodeURIComponent("fac");async function uR(t,e,n,r,i,o){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:si,eventId:i};if(e instanceof hu){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",w0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof uf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await t._getAppCheckToken(),l=u?`#${CH}=${encodeURIComponent(u)}`:"";return`${TH(t)}?${Vs(a).slice(1)}${l}`}function TH({config:t}){return t.emulator?Z_(t,DH):`https://${t.authDomain}/${wH}`}var O_="webStorageSupport",W_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uE,this._completeRedirectFn=Z$,this._overrideRedirectResult=K$}async _openPopup(e,n,r,i){var o;Dr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await uR(e,n,r,k_(),i);return EH(e,s,lE())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await uR(e,n,r,k_(),i);return M$(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Dr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await pH(e),r=new G_(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(O_,{type:O_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[O_];s!==void 0&&n(!!s),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bR()||ER()||nE()}},VR=W_;var lR="@firebase/auth",dR="1.10.8";var K_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function bH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SH(t){Tn(new xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SR(t)},l=new B_(r,i,o,u);return v$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new xt("auth-internal",e=>{let n=gf(e.getProvider("auth").getImmediate());return(r=>new K_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(lR,dR,bH(t)),ke(lR,dR,"esm2017")}var AH=300,RH=l_("authIdTokenMaxAge")||AH,hR=null,NH=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RH)return;let i=n?.token;hR!==i&&(hR=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hE(t=_o()){let e=js(t,"auth");if(e.isInitialized())return e.getImmediate();let n=iE(t,{popupRedirectResolver:VR,persistence:[kR,MR,uE]}),r=l_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=NH(o.toString());aE(n,s,()=>s(n.currentUser)),gu(n,a=>s(a))}}let i=c_("auth");return i&&oE(n,`http://${i}`),n}function MH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}g$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Sn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",MH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SH("Browser");function BR(t){return new X(function(e){var n=gu(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var $R="auth",To=class{constructor(e){return e}},mu=class{constructor(){return Bs($R)}};var fE=new j("angularfire2.auth-instances");function E4(t,e){let n=iu($R,t,e);return n&&new To(n)}function I4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new To(r)}}var w4={provide:mu,deps:[[new Wt,fE]]},D4={provide:To,useFactory:E4,deps:[[new Wt,fE],Er]};function HR(t,...e){return ke("angularfire",ai.full,"auth"),Ht([D4,w4,{provide:fE,useFactory:I4(t),multi:!0,deps:[Ae,ze,ci,Io,[new Wt,$s],...e]}])}var zR=Et(BR,!0);var qR=Et(hE,!0);var GR=Et(dE,!0,2);var WR=Et(cE,!0,2);var KR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QR={};var Cr,pE;(function(){var t;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(I,C,b){for(var _=Array(arguments.length-2),nr=2;nr<arguments.length;nr++)_[nr-2]=arguments[nr];return v.prototype[C].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(C=0;16>C;++C)I[C]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],C=D.g[2];var b=D.g[3],_=v+(b^E&(C^b))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=b+(C^v&(E^C))+I[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(E^b&(v^E))+I[2]+606105819&4294967295,C=b+(_<<17&4294967295|_>>>15),_=E+(v^C&(b^v))+I[3]+3250441966&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(b^E&(C^b))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(C^v&(E^C))+I[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(E^b&(v^E))+I[6]+2821735955&4294967295,C=b+(_<<17&4294967295|_>>>15),_=E+(v^C&(b^v))+I[7]+4249261313&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(b^E&(C^b))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(C^v&(E^C))+I[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(E^b&(v^E))+I[10]+4294925233&4294967295,C=b+(_<<17&4294967295|_>>>15),_=E+(v^C&(b^v))+I[11]+2304563134&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(b^E&(C^b))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(C^v&(E^C))+I[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=C+(E^b&(v^E))+I[14]+2792965006&4294967295,C=b+(_<<17&4294967295|_>>>15),_=E+(v^C&(b^v))+I[15]+1236535329&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(C^b&(E^C))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^C&(v^E))+I[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(b^v))+I[11]+643717713&4294967295,C=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(C^b))+I[0]+3921069994&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(C^b&(E^C))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^C&(v^E))+I[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(b^v))+I[15]+3634488961&4294967295,C=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(C^b))+I[4]+3889429448&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(C^b&(E^C))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^C&(v^E))+I[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(b^v))+I[3]+4107603335&4294967295,C=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(C^b))+I[8]+1163531501&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(C^b&(E^C))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^C&(v^E))+I[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(b^v))+I[7]+1735328473&4294967295,C=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(C^b))+I[12]+2368359562&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(E^C^b)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^C)+I[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^E)+I[11]+1839030562&4294967295,C=b+(_<<16&4294967295|_>>>16),_=E+(C^b^v)+I[14]+4259657740&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(E^C^b)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^C)+I[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^E)+I[7]+4139469664&4294967295,C=b+(_<<16&4294967295|_>>>16),_=E+(C^b^v)+I[10]+3200236656&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(E^C^b)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^C)+I[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^E)+I[3]+3572445317&4294967295,C=b+(_<<16&4294967295|_>>>16),_=E+(C^b^v)+I[6]+76029189&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(E^C^b)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^C)+I[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=C+(b^v^E)+I[15]+530742520&4294967295,C=b+(_<<16&4294967295|_>>>16),_=E+(C^b^v)+I[2]+3299628645&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(C^(E|~b))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~C))+I[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~E))+I[14]+2878612391&4294967295,C=b+(_<<15&4294967295|_>>>17),_=E+(b^(C|~v))+I[5]+4237533241&4294967295,E=C+(_<<21&4294967295|_>>>11),_=v+(C^(E|~b))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~C))+I[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~E))+I[10]+4293915773&4294967295,C=b+(_<<15&4294967295|_>>>17),_=E+(b^(C|~v))+I[1]+2240044497&4294967295,E=C+(_<<21&4294967295|_>>>11),_=v+(C^(E|~b))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~C))+I[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~E))+I[6]+2734768916&4294967295,C=b+(_<<15&4294967295|_>>>17),_=E+(b^(C|~v))+I[13]+1309151649&4294967295,E=C+(_<<21&4294967295|_>>>11),_=v+(C^(E|~b))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~C))+I[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=C+(v^(b|~E))+I[2]+718787259&4294967295,C=b+(_<<15&4294967295|_>>>17),_=E+(b^(C|~v))+I[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+b&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,I=this.B,C=this.h,b=0;b<v;){if(C==0)for(;b<=E;)i(this,D,b),b+=this.blockSize;if(typeof D=="string"){for(;b<v;)if(I[C++]=D.charCodeAt(b++),C==this.blockSize){i(this,I),C=0;break}}else for(;b<v;)if(I[C++]=D[b++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)D[E++]=this.g[v]>>>I&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],I=!0,C=D.length-1;0<=C;C--){var b=D[C]|0;I&&b==v||(E[C]=b,I=!1)}this.g=E}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return A(l(-D));for(var v=[],E=1,I=0;D>=E;I++)v[I]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return A(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,C=0;C<D.length;C+=8){var b=Math.min(8,D.length-C),_=parseInt(D.substring(C,C+b),v);8>b?(b=l(Math.pow(v,b)),I=I.j(b).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-A(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);D+=(0<=I?I:4294967296+I)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(R(this))return"-"+A(this).toString(D);for(var v=l(Math.pow(D,6)),E=this,I="";;){var C=he(E,v).g;E=x(E,C.j(v));var b=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=C,w(E))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function R(D){return D.h==-1}t.l=function(D){return D=x(this,D),R(D)?-1:w(D)?0:1};function A(D){for(var v=D.g.length,E=[],I=0;I<v;I++)E[I]=~D.g[I];return new s(E,~D.h).add(m)}t.abs=function(){return R(this)?A(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0,C=0;C<=v;C++){var b=I+(this.i(C)&65535)+(D.i(C)&65535),_=(b>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);I=_>>>16,b&=65535,_&=65535,E[C]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function x(D,v){return D.add(A(v))}t.j=function(D){if(w(this)||w(D))return p;if(R(this))return R(D)?A(this).j(A(D)):A(A(this).j(D));if(R(D))return A(this.j(A(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<D.g.length;C++){var b=this.i(I)>>>16,_=this.i(I)&65535,nr=D.i(C)>>>16,Ea=D.i(C)&65535;E[2*I+2*C]+=_*Ea,U(E,2*I+2*C),E[2*I+2*C+1]+=b*Ea,U(E,2*I+2*C+1),E[2*I+2*C+1]+=_*nr,U(E,2*I+2*C+1),E[2*I+2*C+2]+=b*nr,U(E,2*I+2*C+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function U(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function z(D,v){this.g=D,this.h=v}function he(D,v){if(w(v))throw Error("division by zero");if(w(D))return new z(p,p);if(R(D))return v=he(A(D),v),new z(A(v.g),A(v.h));if(R(v))return v=he(D,A(v)),new z(A(v.g),v.h);if(30<D.g.length){if(R(D)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(D);)E=nt(E),I=nt(I);var C=Ie(E,1),b=Ie(I,1);for(I=Ie(I,2),E=Ie(E,2);!w(I);){var _=b.add(I);0>=_.l(D)&&(C=C.add(E),b=_),I=Ie(I,1),E=Ie(E,1)}return v=x(D,C.j(v)),new z(C,v)}for(C=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=l(E),_=b.j(v);R(_)||0<_.l(D);)E-=I,b=l(E),_=b.j(v);w(b)&&(b=m),C=C.add(b),D=x(D,_)}return new z(C,D)}t.A=function(D){return he(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&D.i(I);return new s(E,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|D.i(I);return new s(E,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^D.i(I);return new s(E,this.h^D.h)};function nt(D){for(var v=D.g.length+1,E=[],I=0;I<v;I++)E[I]=D.i(I)<<1|D.i(I-1)>>>31;return new s(E,D.h)}function Ie(D,v){var E=v>>5;v%=32;for(var I=D.g.length-E,C=[],b=0;b<I;b++)C[b]=0<v?D.i(b+E)>>>v|D.i(b+E+1)<<32-v:D.i(b+E);return new s(C,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pE=QR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Cr=QR.Integer=s}).apply(typeof KR<"u"?KR:typeof self<"u"?self:typeof window<"u"?window:{});var yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tr={};var gE,C4,qs,mE,yu,vf,yE,vE,_E;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yf=="object"&&yf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,S){for(var O=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)O[Te-2]=arguments[Te];return d.prototype[T].apply(g,O)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function A(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,S=g.length||0;c.length=T+S;for(let O=0;O<S;O++)c[T+O]=g[O]}else c.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function U(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var nt=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Ie(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let S=0;S<E.length;S++)f=E[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function b(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Mp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class nr{constructor(){this.h=this.g=null}add(d,f){let g=Ea.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ea=new x(()=>new px,c=>c.reset());class px{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ia,wa=!1,Mp=new nr,zw=()=>{let c=a.Promise.resolve(void 0);Ia=()=>{c.then(gx)}};var gx=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){b(f)}var d=Ea;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}wa=!1};function xr(){this.s=this.s,this.C=this.C}xr.prototype.s=!1,xr.prototype.ma=function(){this.s||(this.s=!0,this.N())},xr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var mx=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Da(c,d){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(nt){e:{try{he(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:yx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Da.aa.h.call(this)}}w(Da,ft);var yx={2:"touch",3:"pen",4:"mouse"};Da.prototype.h=function(){Da.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ca="closure_listenable_"+(1e6*Math.random()|0),vx=0;function _x(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++vx,this.da=this.fa=!1}function qu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gu(c){this.src=c,this.g={},this.h=0}Gu.prototype.add=function(c,d,f,g,T){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var O=xp(c,d,g,T);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new _x(d,this.src,S,!!g,T),d.fa=f,c.push(d)),d};function Pp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(g,T,1),S&&(qu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function xp(c,d,f,g){for(var T=0;T<c.length;++T){var S=c[T];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return T}return-1}var Op="closure_lm_"+(1e6*Math.random()|0),kp={};function qw(c,d,f,g,T){if(g&&g.once)return Ww(c,d,f,g,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)qw(c,d[S],f,g,T);return null}return f=jp(f),c&&c[Ca]?c.K(d,f,l(g)?!!g.capture:!!g,T):Gw(c,d,f,!1,g,T)}function Gw(c,d,f,g,T,S){if(!d)throw Error("Invalid event type");var O=l(T)?!!T.capture:!!T,Te=Lp(c);if(Te||(c[Op]=Te=new Gu(c)),f=Te.add(d,f,g,O,S),f.proxy)return f;if(g=Ex(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)mx||(T=O),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(Qw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ex(){function c(f){return d.call(c.src,c.listener,f)}let d=Ix;return c}function Ww(c,d,f,g,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Ww(c,d[S],f,g,T);return null}return f=jp(f),c&&c[Ca]?c.L(d,f,l(g)?!!g.capture:!!g,T):Gw(c,d,f,!0,g,T)}function Kw(c,d,f,g,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)Kw(c,d[S],f,g,T);else g=l(g)?!!g.capture:!!g,f=jp(f),c&&c[Ca]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=xp(S,f,g,T),-1<f&&(qu(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=Lp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=xp(d,f,g,T)),(f=-1<c?d[c]:null)&&Fp(f))}function Fp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ca])Pp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Qw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Lp(d))?(Pp(f,c),f.h==0&&(f.src=null,d[Op]=null)):qu(c)}}}function Qw(c){return c in kp?kp[c]:kp[c]="on"+c}function Ix(c,d){if(c.da)c=!0;else{d=new Da(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Fp(c),c=f.call(g,d)}return c}function Lp(c){return c=c[Op],c instanceof Gu?c:null}var Vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function jp(c){return typeof c=="function"?c:(c[Vp]||(c[Vp]=function(d){return c.handleEvent(d)}),c[Vp])}function pt(){xr.call(this),this.i=new Gu(this),this.M=this,this.F=null}w(pt,xr),pt.prototype[Ca]=!0,pt.prototype.removeEventListener=function(c,d,f,g){Kw(this,c,d,f,g)};function Ct(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ft(d,c);else if(d instanceof ft)d.target=d.target||c;else{var T=d;d=new ft(g,c),I(d,T)}if(T=!0,f)for(var S=f.length-1;0<=S;S--){var O=d.g=f[S];T=Wu(O,g,!0,d)&&T}if(O=d.g=c,T=Wu(O,g,!0,d)&&T,T=Wu(O,g,!1,d)&&T,f)for(S=0;S<f.length;S++)O=d.g=f[S],T=Wu(O,g,!1,d)&&T}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)qu(f[g]);delete c.g[d],c.h--}}this.F=null},pt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},pt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Wu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var O=d[S];if(O&&!O.da&&O.capture==f){var Te=O.listener,ct=O.ha||O.src;O.fa&&Pp(c.i,O),T=Te.call(ct,g)!==!1&&T}}return T&&!g.defaultPrevented}function Yw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Zw(c){c.g=Yw(()=>{c.g=null,c.i&&(c.i=!1,Zw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class wx extends xr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Zw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ta(c){xr.call(this),this.h=c,this.g={}}w(Ta,xr);var Jw=[];function Xw(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&Fp(d)},c),c.g={}}Ta.prototype.N=function(){Ta.aa.N.call(this),Xw(this)},Ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Up=a.JSON.stringify,Dx=a.JSON.parse,Cx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Bp(){}Bp.prototype.h=null;function eD(c){return c.h||(c.h=c.i())}function tD(){}var ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $p(){ft.call(this,"d")}w($p,ft);function Hp(){ft.call(this,"c")}w(Hp,ft);var wi={},nD=null;function Ku(){return nD=nD||new pt}wi.La="serverreachability";function rD(c){ft.call(this,wi.La,c)}w(rD,ft);function Sa(c){let d=Ku();Ct(d,new rD(d))}wi.STAT_EVENT="statevent";function iD(c,d){ft.call(this,wi.STAT_EVENT,c),this.stat=d}w(iD,ft);function Tt(c){let d=Ku();Ct(d,new iD(d,c))}wi.Ma="timingevent";function oD(c,d){ft.call(this,wi.Ma,c),this.size=d}w(oD,ft);function Aa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ra(){this.g=!0}Ra.prototype.xa=function(){this.g=!1};function Tx(c,d,f,g,T,S){c.info(function(){if(c.g)if(S)for(var O="",Te=S.split("&"),ct=0;ct<Te.length;ct++){var de=Te[ct].split("=");if(1<de.length){var gt=de[0];de=de[1];var mt=gt.split("_");O=2<=mt.length&&mt[1]=="type"?O+(gt+"="+de+"&"):O+(gt+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+O})}function bx(c,d,f,g,T,S,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+S+" "+O})}function $o(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ax(c,f)+(g?" "+g:"")})}function Sx(c,d){c.info(function(){return"TIMEOUT: "+d})}Ra.prototype.info=function(){};function Ax(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return Up(f)}catch{return d}}var Qu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zp;function Yu(){}w(Yu,Bp),Yu.prototype.g=function(){return new XMLHttpRequest},Yu.prototype.i=function(){return{}},zp=new Yu;function Or(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ta(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new aD}function aD(){this.i=null,this.g="",this.h=!1}var cD={},qp={};function Gp(c,d,f){c.L=1,c.v=el(rr(d)),c.m=f,c.P=!0,uD(c,null)}function uD(c,d){c.F=Date.now(),Zu(c),c.A=rr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),DD(f.i,"t",g),c.C=0,f=c.j.J,c.h=new aD,c.g=BD(c.j,f?d:null,!c.m),0<c.O&&(c.M=new wx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(Jw[0]=T.toString()),T=Jw);for(var S=0;S<T.length;S++){var O=qw(f,T[S],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Sa(),Tx(c.i,c.u,c.A,c.l,c.R,c.m)}Or.prototype.ca=function(c){c=c.target;let d=this.M;d&&ir(c)==3?d.j():this.Y(c)},Or.prototype.Y=function(c){try{if(c==this.g)e:{let mt=ir(this.g);var d=this.g.Ba();let qo=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||ND(this.g)))){this.J||mt!=4||d==7||(d==8||0>=qo?Sa(3):Sa(2)),Wp(this);var f=this.g.Z();this.X=f;t:if(lD(this)){var g=ND(this.g);c="";var T=g.length,S=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Di(this),Na(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,bx(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ct=this.g;if((Te=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Te)){var de=Te;break t}}de=null}if(f=de)$o(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kp(this,f);else{this.o=!1,this.s=3,Tt(12),Di(this),Na(this);break e}}if(this.P){f=!0;let hn;for(;!this.J&&this.C<O.length;)if(hn=Rx(this,O),hn==qp){mt==4&&(this.s=4,Tt(14),f=!1),$o(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==cD){this.s=4,Tt(15),$o(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else $o(this.i,this.l,hn,null),Kp(this,hn);if(lD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||O.length!=0||this.h.h||(this.s=1,Tt(16),f=!1),this.o=this.o&&f,!f)$o(this.i,this.l,O,"[Invalid Chunked Response]"),Di(this),Na(this);else if(0<O.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),eg(gt),gt.M=!0,Tt(11))}}else $o(this.i,this.l,O,null),Kp(this,O);mt==4&&Di(this),this.o&&!this.J&&(mt==4?LD(this.j,this):(this.o=!1,Zu(this)))}else Gx(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Di(this),Na(this)}}}catch{}finally{}};function lD(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Rx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?qp:(f=Number(d.substring(f,g)),isNaN(f)?cD:(g+=1,g+f>d.length?qp:(d=d.slice(g,g+f),c.C=g+f,d)))}Or.prototype.cancel=function(){this.J=!0,Di(this)};function Zu(c){c.S=Date.now()+c.I,dD(c,c.I)}function dD(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Aa(m(c.ba,c),d)}function Wp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Or.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Sx(this.i,this.A),this.L!=2&&(Sa(),Tt(17)),Di(this),this.s=2,Na(this)):dD(this,this.S-c)};function Na(c){c.j.G==0||c.J||LD(c.j,c)}function Di(c){Wp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Xw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Kp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Qp(f.h,c))){if(!c.K&&Qp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ol(f),rl(f);else break e;Xp(f),Tt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Aa(m(f.Za,f),6e3));if(1>=pD(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ti(f,11)}else if((c.K||f.g==c)&&ol(f),!U(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let de=T[d];if(f.T=de[0],de=de[1],f.G==2)if(de[0]=="c"){f.K=de[1],f.ia=de[2];let gt=de[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=de[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let qo=de[5];qo!=null&&typeof qo=="number"&&0<qo&&(g=1.5*qo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let hn=c.g;if(hn){let al=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var S=g.h;S.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Yp(S,S.h),S.h=null))}if(g.D){let tg=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;tg&&(g.ya=tg,Se(g.I,g.D,tg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=UD(g,g.J?g.ia:null,g.W),O.K){gD(g.h,O);var Te=O,ct=g.L;ct&&(Te.I=ct),Te.B&&(Wp(Te),Zu(Te)),g.g=O}else kD(g);0<f.i.length&&il(f)}else de[0]!="stop"&&de[0]!="close"||Ti(f,7);else f.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Ti(f,7):Jp(f):de[0]!="noop"&&f.l&&f.l.ta(de),f.v=0)}}Sa(4)}catch{}}var Nx=class{constructor(c,d){this.g=c,this.map=d}};function hD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function pD(c){return c.h?1:c.g?c.g.size:0}function Qp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Yp(c,d){c.g?c.g.add(d):c.h=d}function gD(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}hD.prototype.cancel=function(){if(this.i=mD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function mD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function Mx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Px(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function yD(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Px(c),g=Mx(c),T=g.length,S=0;S<T;S++)d.call(void 0,g[S],f&&f[S],c)}var vD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var S=c[f].substring(0,g);T=c[f].substring(g+1)}else S=c[f];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Ci(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ci){this.h=c.h,Ju(this,c.j),this.o=c.o,this.g=c.g,Xu(this,c.s),this.l=c.l;var d=c.i,f=new xa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),_D(this,f),this.m=c.m}else c&&(d=String(c).match(vD))?(this.h=!1,Ju(this,d[1]||"",!0),this.o=Ma(d[2]||""),this.g=Ma(d[3]||"",!0),Xu(this,d[4]),this.l=Ma(d[5]||"",!0),_D(this,d[6]||"",!0),this.m=Ma(d[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}Ci.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Pa(d,ED,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Pa(d,ED,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Pa(f,f.charAt(0)=="/"?Fx:kx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Pa(f,Vx)),c.join("")};function rr(c){return new Ci(c)}function Ju(c,d,f){c.j=f?Ma(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Xu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function _D(c,d,f){d instanceof xa?(c.i=d,jx(c.i,c.h)):(f||(d=Pa(d,Lx)),c.i=new xa(d,c.h))}function Se(c,d,f){c.i.set(d,f)}function el(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ma(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Pa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Ox),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ox(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ED=/[#\/\?@]/g,kx=/[#\?:]/g,Fx=/[#\?]/g,Lx=/[#\?@]/g,Vx=/#/g;function xa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function kr(c){c.g||(c.g=new Map,c.h=0,c.i&&xx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=xa.prototype,t.add=function(c,d){kr(this),this.i=null,c=Ho(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function ID(c,d){kr(c),d=Ho(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function wD(c,d){return kr(c),d=Ho(c,d),c.g.has(d)}t.forEach=function(c,d){kr(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},t.na=function(){kr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let S=0;S<T.length;S++)f.push(d[g])}return f},t.V=function(c){kr(this);let d=[];if(typeof c=="string")wD(this,c)&&(d=d.concat(this.g.get(Ho(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return kr(this),this.i=null,c=Ho(this,c),wD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function DD(c,d,f){ID(c,d),0<f.length&&(c.i=null,c.g.set(Ho(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var T=S;O[g]!==""&&(T+="="+encodeURIComponent(String(O[g]))),c.push(T)}}return this.i=c.join("&")};function Ho(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function jx(c,d){d&&!c.j&&(kr(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(ID(this,g),DD(this,T,f))},c)),c.j=d}function Ux(c,d){let f=new Ra;if(a.Image){let g=new Image;g.onload=y(Fr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Fr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Fr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Fr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Bx(c,d){let f=new Ra,g=new AbortController,T=setTimeout(()=>{g.abort(),Fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(T),S.ok?Fr(f,"TestPingServer: ok",!0,d):Fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Fr(f,"TestPingServer: error",!1,d)})}function Fr(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function $x(){this.g=new Cx}function Hx(c,d,f){let g=f||"";try{yD(c,function(T,S){let O=T;l(T)&&(O=Up(T)),d.push(g+S+"="+encodeURIComponent(O))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Oa(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Oa,Bp),Oa.prototype.g=function(){return new tl(this.l,this.j)},Oa.prototype.i=(function(c){return function(){return c}})({});function tl(c,d){pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(tl,pt),t=tl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Fa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ka(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fa(this)),this.g&&(this.readyState=3,Fa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;CD(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function CD(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ka(this):Fa(this),this.readyState==3&&CD(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ka(this))},t.Qa=function(c){this.g&&(this.response=c,ka(this))},t.ga=function(){this.g&&ka(this)};function ka(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fa(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Fa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function TD(c){let d="";return Ie(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Zp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=TD(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Se(c,d,f))}function xe(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(xe,pt);var zx=/^https?$/i,qx=["POST","PUT"];t=xe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zp.g(),this.v=this.o?eD(this.o):eD(zp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){bD(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qx,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of f)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{RD(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){bD(this,S)}};function bD(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,SD(c),nl(c)}function SD(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?AD(this):this.bb())},t.bb=function(){AD(this)};function AD(c){if(c.h&&typeof s<"u"&&(!c.v[1]||ir(c)!=4||c.Z()!=2)){if(c.u&&ir(c)==4)Yw(c.Ea,0,c);else if(Ct(c,"readystatechange"),ir(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var T=String(c.D).match(vD)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!zx.test(T?T.toLowerCase():"")}f=g}if(f)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var S=2<ir(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",SD(c)}}finally{nl(c)}}}}function nl(c,d){if(c.g){RD(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ct(c,"ready");try{f.onreadystatechange=g}catch{}}}function RD(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ir(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Dx(d)}};function ND(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Gx(c){let d={};c=(c.g&&2<=ir(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(U(c[g]))continue;var f=C(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[T]||[];d[T]=S,S.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function La(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function MD(c){this.Aa=0,this.i=[],this.j=new Ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=La("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=La("baseRetryDelayMs",5e3,c),this.cb=La("retryDelaySeedMs",1e4,c),this.Wa=La("forwardChannelMaxRetries",2,c),this.wa=La("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new hD(c&&c.concurrentRequestLimit),this.Da=new $x,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=MD.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Tt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=UD(this,null,this.W),il(this)};function Jp(c){if(PD(c),c.G==3){var d=c.U++,f=rr(c.I);if(Se(f,"SID",c.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),Va(c,f),d=new Or(c,c.j,d),d.L=2,d.v=el(rr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=BD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zu(d)}jD(c)}function rl(c){c.g&&(eg(c),c.g.cancel(),c.g=null)}function PD(c){rl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ol(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function il(c){if(!fD(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ia||zw(),wa||(Ia(),wa=!0),Mp.add(d,c),c.B=0}}function Wx(c,d){return pD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Aa(m(c.Ga,c,d),VD(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Or(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=OD(this,T,d),f=rr(this.I),Se(f,"RID",c),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Va(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(TD(S)))+"&"+d:this.m&&Zp(f,this.m,S)),Yp(this.h,T),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),T.T=!0,Gp(T,f,null)):Gp(T,f,d),this.G=2}}else this.G==3&&(c?xD(this,c):this.i.length==0||fD(this.h)||xD(this))};function xD(c,d){var f;d?f=d.l:f=c.U++;let g=rr(c.I);Se(g,"SID",c.K),Se(g,"RID",f),Se(g,"AID",c.T),Va(c,g),c.m&&c.o&&Zp(g,c.m,c.o),f=new Or(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=OD(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Yp(c.h,f),Gp(f,g,d)}function Va(c,d){c.H&&Ie(c.H,function(f,g){Se(d,g,f)}),c.l&&yD({},function(f,g){Se(d,g,f)})}function OD(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let S=-1;for(;;){let O=["count="+f];S==-1?0<f?(S=T[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let Te=!0;for(let ct=0;ct<f;ct++){let de=T[ct].g,gt=T[ct].map;if(de-=S,0>de)S=Math.max(0,T[ct].g-100),Te=!1;else try{Hx(gt,O,"req"+de+"_")}catch{g&&g(gt)}}if(Te){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function kD(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ia||zw(),wa||(Ia(),wa=!0),Mp.add(d,c),c.v=0}}function Xp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Aa(m(c.Fa,c),VD(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,FD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Aa(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),rl(this),FD(this))};function eg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function FD(c){c.g=new Or(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=rr(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),Va(c,d),c.m&&c.o&&Zp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=el(rr(d)),f.m=null,f.P=!0,uD(f,c)}t.Za=function(){this.C!=null&&(this.C=null,rl(this),Xp(this),Tt(19))};function ol(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function LD(c,d){var f=null;if(c.g==d){ol(c),eg(c),c.g=null;var g=2}else if(Qp(c.h,d))f=d.D,gD(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=Ku(),Ct(g,new oD(g,f)),il(c)}else kD(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&Wx(c,d)||g==2&&Xp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function VD(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ti(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new Ci(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ju(g,"https"),el(g),T?Ux(g.toString(),f):Bx(g.toString(),f)}else Tt(2);c.G=0,c.l&&c.l.sa(d),jD(c),PD(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function jD(c){if(c.G=0,c.ka=[],c.l){let d=mD(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ka,d),A(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function UD(c,d,f){var g=f instanceof Ci?rr(f):new Ci(f);if(g.g!="")d&&(g.g=d+"."+g.g),Xu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new Ci(null);g&&Ju(S,g),d&&(S.g=d),T&&Xu(S,T),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Se(g,f,d),Se(g,"VER",c.la),Va(c,g),g}function BD(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new xe(new Oa({eb:f})):new xe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $D(){}t=$D.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sl(){}sl.prototype.g=function(c,d){return new Bt(c,d)};function Bt(c,d){pt.call(this),this.g=new MD(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!U(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!U(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new zo(this)}w(Bt,pt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Jp(this.g)},Bt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Up(c),c=f);d.i.push(new Nx(d.Ya++,c)),d.G==3&&il(d)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Jp(this.g),delete this.g,Bt.aa.N.call(this)};function HD(c){$p.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(HD,$p);function zD(){Hp.call(this),this.status=1}w(zD,Hp);function zo(c){this.g=c}w(zo,$D),zo.prototype.ua=function(){Ct(this.g,"a")},zo.prototype.ta=function(c){Ct(this.g,new HD(c))},zo.prototype.sa=function(c){Ct(this.g,new zD)},zo.prototype.ra=function(){Ct(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,_E=Tr.createWebChannelTransport=function(){return new sl},vE=Tr.getStatEventTarget=function(){return Ku()},yE=Tr.Event=wi,vf=Tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qu.NO_ERROR=0,Qu.TIMEOUT=8,Qu.HTTP_ERROR=6,yu=Tr.ErrorCode=Qu,sD.COMPLETE="complete",mE=Tr.EventType=sD,tD.EventType=ba,ba.OPEN="a",ba.CLOSE="b",ba.ERROR="c",ba.MESSAGE="d",pt.prototype.listen=pt.prototype.K,qs=Tr.WebChannel=tD,C4=Tr.FetchXmlHttpFactory=Oa,xe.prototype.listenOnce=xe.prototype.L,xe.prototype.getLastError=xe.prototype.Ka,xe.prototype.getLastErrorCode=xe.prototype.Ba,xe.prototype.getStatus=xe.prototype.Z,xe.prototype.getResponseJson=xe.prototype.Oa,xe.prototype.getResponseText=xe.prototype.oa,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Ha,gE=Tr.XhrIo=xe}).apply(typeof yf<"u"?yf:typeof self<"u"?self:typeof window<"u"?window:{});var YR="@firebase/firestore",ZR="4.8.0";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var ha="11.10.0";var Mo=new Wn("@firebase/firestore");function Gs(){return Mo.logLevel}function V(t,...e){if(Mo.logLevel<=oe.DEBUG){let n=e.map(cw);Mo.debug(`Firestore (${ha}): ${t}`,...n)}}function Sr(t,...e){if(Mo.logLevel<=oe.ERROR){let n=e.map(cw);Mo.error(`Firestore (${ha}): ${t}`,...n)}}function mi(t,...e){if(Mo.logLevel<=oe.WARN){let n=e.map(cw);Mo.warn(`Firestore (${ha}): ${t}`,...n)}}function cw(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function H(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zN(t,r,n)}function zN(t,e,n){let r=`FIRESTORE (${ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sr(r),new Error(r)}function Ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||zN(e,i,r)}function Q(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var br=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Tf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},CE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}},TE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},bE=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new br;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new br,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new br)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Tf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new st(e)}},SE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},AE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new SE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},RE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function T4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function qN(){return new TextEncoder}var Cu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=T4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function NE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return re(r,i);{let o=qN(),s=b4(o.encode(JR(t,n)),o.encode(JR(e,n)));return s!==0?s:re(r,i)}}n+=r>65535?2:1}return re(t.length,e.length)}function JR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function b4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return re(t[n],e[n]);return re(t.length,e.length)}function ea(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var XR="__name__",Sf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&H(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return re(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):NE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}},Ne=class t extends Sf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},S4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xt=class t extends Sf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return S4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XR}static keyField(){return new t([XR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};function GN(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A4(t,e,n,r){if(e===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eN(t){if(!$.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tN(t){if($.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H(12329,{type:typeof t})}function _u(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=op(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ye(t,e){let n={typeString:t};return e&&(n.value=e),n}function ku(t,e){if(!WN(t))throw new F(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(N.INVALID_ARGUMENT,n);return!0}var nN=-62135596800,rN=1e6,Ze=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rN);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nN)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rN}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-nN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Ye("string",Ze._jsonSchemaVersion),seconds:Ye("number"),nanoseconds:Ye("number")};var J=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ze(0,0))}static max(){return new t(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Tu=-1,ME=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};ME.UNKNOWN_ID=-1;function R4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new Po(i,$.empty(),e)}function N4(t){return new Po(t.readTime,t.key,Tu)}var Po=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(J.min(),$.empty(),Tu)}static max(){return new t(J.max(),$.empty(),Tu)}};function M4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var P4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",PE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function fa(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==P4)throw t;V("LocalStore","Unexpectedly lost primary lease")}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function x4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(t){return t.name==="IndexedDbTransactionError"}var uw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),lw=-1;function sp(t){return t==null}function bu(t){return t===0&&1/t==-1/0}function O4(t){return typeof t=="number"&&Number.isInteger(t)&&!bu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var KN="";function k4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iN(e)),e=F4(t.get(n),e);return iN(e)}function F4(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case KN:n+="";break;default:n+=o}}return n}function iN(t){return t+KN+""}var L4="remoteDocuments",QN="owner";var YN="mutationQueues";var ZN="mutations";var JN="documentMutations",V4="remoteDocumentsV14";var XN="remoteDocumentGlobal";var eM="targets";var tM="targetDocuments";var nM="targetGlobal",rM="collectionParents";var iM="clientMetadata";var oM="bundles";var sM="namedQueries";var j4="indexConfiguration";var U4="indexState";var B4="indexEntries";var aM="documentOverlays";var $4="globals";var H4=[YN,ZN,JN,L4,eM,QN,nM,tM,iM,XN,rM,oM,sM],Qoe=[...H4,aM],z4=[YN,ZN,JN,V4,eM,QN,nM,tM,iM,XN,rM,oM,sM,aM],q4=z4,G4=[...q4,j4,U4,B4];var Yoe=[...G4,$4];function oN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Fe=class t{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ys(this.root,e,this.comparator,!0)}},Ys=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}};Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class t{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Af(this.data.getIterator())}getIteratorFrom(e){return new Af(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Af=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zn=class t{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new t([])}unionWith(e){let n=new at(Xt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Rf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Rf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var W4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(Ee(!!t,39018),typeof t=="string"){let e=0,n=W4.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}var uM="server_timestamp",lM="__type__",dM="__previous_value__",hM="__local_write_time__";function dw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[lM])===null||n===void 0?void 0:n.stringValue)===uM}function ap(t){let e=t.mapValue.fields[dM];return dw(e)?ap(e):e}function Su(t){let e=Ar(t.mapValue.fields[hM].timestampValue);return new Ze(e.seconds,e.nanos)}var xE=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Nf="(default)",Mf=class t{constructor(e,n){this.projectId=e,this.database=n||Nf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Nf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var hw="__type__",fM="__max__",_f={mapValue:{fields:{__type__:{stringValue:fM}}}},fw="__vector__",ta="value";function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dw(t)?4:gM(t)?9007199254740991:pM(t)?10:11:H(28295,{value:t})}function tr(t,e){if(t===e)return!0;let n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ar(i.timestampValue),a=Ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Rr(i.bytesValue).isEqual(Rr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Re(i.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Re(i.integerValue)===Re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Re(i.doubleValue),a=Re(o.doubleValue);return s===a?bu(s)===bu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return ea(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(oN(s)!==oN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!tr(s[u],a[u])))return!1;return!0})(t,e);default:return H(52216,{left:t})}}function Au(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function na(t,e){if(t===e)return 0;let n=yi(t),r=yi(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Re(o.integerValue||o.doubleValue),u=Re(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return sN(t.timestampValue,e.timestampValue);case 4:return sN(Su(t),Su(e));case 5:return NE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Rr(o),u=Rr(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=re(Re(o.latitude),Re(s.latitude));return a!==0?a:re(Re(o.longitude),Re(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return aN(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ta])===null||a===void 0?void 0:a.arrayValue,w=(u=m[ta])===null||u===void 0?void 0:u.arrayValue,R=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:aN(y,w)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===_f.mapValue&&s===_f.mapValue)return 0;if(o===_f.mapValue)return 1;if(s===_f.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=NE(u[p],h[p]);if(m!==0)return m;let y=na(a[u[p]],l[h[p]]);if(y!==0)return y}return re(u.length,h.length)})(t.mapValue,e.mapValue);default:throw H(23264,{le:n})}}function sN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=Ar(t),r=Ar(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function aN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=na(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function ra(t){return OE(t)}function OE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Ar(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Rr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return $.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=OE(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${OE(n.fields[s])}`;return i+"}"})(t.mapValue):H(61005,{value:t})}function wf(t){switch(yi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ap(t);return e?16+wf(e):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+wf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return jo(r.fields,(o,s)=>{i+=o.length+wf(s)}),i})(t.mapValue);default:throw H(13486,{value:t})}}function cN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kE(t){return!!t&&"integerValue"in t}function pw(t){return!!t&&"arrayValue"in t}function uN(t){return!!t&&"nullValue"in t}function lN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Df(t){return!!t&&"mapValue"in t}function pM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[hw])===null||n===void 0?void 0:n.stringValue)===fw}function Eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return jo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fM}var Joe={mapValue:{fields:{[hw]:{stringValue:fw},[ta]:{arrayValue:{}}}}};var An=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Df(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Eu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Df(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Df(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){jo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Eu(this.value))}};function mM(t){let e=[];return jo(t.fields,(n,r)=>{let i=new Xt([n]);if(Df(r)){let o=mM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zn(e)}var Rn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),An.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),An.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ia=class{constructor(e,n){this.position=e,this.inclusive=n}};function dN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=na(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}var xo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function K4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Pf=class{},Qe=class t extends Pf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LE(e,n,r):n==="array-contains"?new UE(e,r):n==="in"?new BE(e,r):n==="not-in"?new $E(e,r):n==="array-contains-any"?new HE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VE(e,r):new jE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(na(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(na(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nn=class t extends Pf{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return yM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function yM(t){return t.op==="and"}function vM(t){return Q4(t)&&yM(t)}function Q4(t){for(let e of t.filters)if(e instanceof Nn)return!1;return!0}function FE(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+ra(t.value);if(vM(t))return t.filters.map(e=>FE(e)).join(",");{let e=t.filters.map(n=>FE(n)).join(",");return`${t.op}(${e})`}}function _M(t,e){return t instanceof Qe?(function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&tr(r.value,i.value)})(t,e):t instanceof Nn?(function(r,i){return i instanceof Nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&_M(s,i.filters[a]),!0):!1})(t,e):void H(19439)}function EM(t){return t instanceof Qe?(function(n){return`${n.field.canonicalString()} ${n.op} ${ra(n.value)}`})(t):t instanceof Nn?(function(n){return n.op.toString()+" {"+n.getFilters().map(EM).join(" ,")+"}"})(t):"Filter"}var LE=class extends Qe{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},VE=class extends Qe{constructor(e,n){super(e,"in",n),this.keys=IM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},jE=class extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=IM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function IM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var UE=class extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return pw(n)&&Au(n.arrayValue,this.value)}},BE=class extends Qe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Au(this.value.arrayValue,n)}},$E=class extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Au(this.value.arrayValue,n)}},HE=class extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!pw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}};var zE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function fN(t,e=null,n=[],r=[],i=null,o=null,s=null){return new zE(t,e,n,r,i,o,s)}function gw(t){let e=Q(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>FE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ra(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ra(r)).join(",")),e.Pe=n}return e.Pe}function mw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_M(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hN(t.startAt,e.startAt)&&hN(t.endAt,e.endAt)}function qE(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var vi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Y4(t,e,n,r,i,o,s,a){return new vi(t,e,n,r,i,o,s,a)}function yw(t){return new vi(t)}function pN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wM(t){return t.collectionGroup!==null}function Iu(t){let e=Q(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new at(Xt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new xo(o,r))}),n.has(Xt.keyField().canonicalString())||e.Te.push(new xo(Xt.keyField(),r))}return e.Te}function Xn(t){let e=Q(t);return e.Ie||(e.Ie=Z4(e,Iu(t))),e.Ie}function Z4(t,e){if(t.limitType==="F")return fN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xo(i.field,o)});let n=t.endAt?new ia(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ia(t.startAt.position,t.startAt.inclusive):null;return fN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function GE(t,e){let n=t.filters.concat([e]);return new vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function WE(t,e,n){return new vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cp(t,e){return mw(Xn(t),Xn(e))&&t.limitType===e.limitType}function DM(t){return`${gw(Xn(t))}|lt:${t.limitType}`}function Ws(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EM(i)).join(", ")}]`),sp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ra(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ra(i)).join(",")),`Target(${r})`})(Xn(t))}; limitType=${t.limitType})`}function up(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Iu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=dN(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Iu(r),i)||r.endAt&&!(function(s,a,u){let l=dN(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Iu(r),i))})(t,e)}function J4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CM(t){return(e,n)=>{let r=!1;for(let i of Iu(t)){let o=X4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function X4(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?na(u,l):H(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:t.dir})}}var Nr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cM(this.inner)}size(){return this.innerSize}};var ez=new Fe($.comparator);function Mr(){return ez}var TM=new Fe($.comparator);function vu(...t){let e=TM;for(let n of t)e=e.insert(n.key,n);return e}function bM(t){let e=TM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bo(){return wu()}function SM(){return wu()}function wu(){return new Nr(t=>t.toString(),(t,e)=>t.isEqual(e))}var tz=new Fe($.comparator),nz=new at($.comparator);function ae(...t){let e=nz;for(let n of t)e=e.add(n);return e}var rz=new at(re);function iz(){return rz}function vw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function AM(t){return{integerValue:""+t}}function oz(t,e){return O4(e)?AM(e):vw(t,e)}var oa=class{constructor(){this._=void 0}};function sz(t,e,n){return t instanceof sa?(function(i,o){let s={fields:{[lM]:{stringValue:uM},[hM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&dw(o)&&(o=ap(o)),o&&(s.fields[dM]=o),{mapValue:s}})(n,e):t instanceof Oo?NM(t,e):t instanceof ko?MM(t,e):(function(i,o){let s=RM(i,o),a=gN(s)+gN(i.Ee);return kE(s)&&kE(i.Ee)?AM(a):vw(i.serializer,a)})(t,e)}function az(t,e,n){return t instanceof Oo?NM(t,e):t instanceof ko?MM(t,e):n}function RM(t,e){return t instanceof aa?(function(r){return kE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var sa=class extends oa{},Oo=class extends oa{constructor(e){super(),this.elements=e}};function NM(t,e){let n=PM(e);for(let r of t.elements)n.some(i=>tr(i,r))||n.push(r);return{arrayValue:{values:n}}}var ko=class extends oa{constructor(e){super(),this.elements=e}};function MM(t,e){let n=PM(e);for(let r of t.elements)n=n.filter(i=>!tr(i,r));return{arrayValue:{values:n}}}var aa=class extends oa{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function gN(t){return Re(t.integerValue||t.doubleValue)}function PM(t){return pw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cz(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Oo&&i instanceof Oo||r instanceof ko&&i instanceof ko?ea(r.elements,i.elements,tr):r instanceof aa&&i instanceof aa?tr(r.Ee,i.Ee):r instanceof sa&&i instanceof sa})(t.transform,e.transform)}var KE=class{constructor(e,n){this.version=e,this.transformResults=n}},Ro=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Cf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ca=class{};function xM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xf(t.key,Ro.none()):new Fo(t.key,t.data,Ro.none());{let n=t.data,r=An.empty(),i=new at(Xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pr(t.key,r,new Zn(i.toArray()),Ro.none())}}function uz(t,e,n){t instanceof Fo?(function(i,o,s){let a=i.value.clone(),u=yN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Pr?(function(i,o,s){if(!Cf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=yN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(OM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Du(t,e,n,r){return t instanceof Fo?(function(o,s,a,u){if(!Cf(o.precondition,s))return a;let l=o.value.clone(),h=vN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Pr?(function(o,s,a,u){if(!Cf(o.precondition,s))return a;let l=vN(o.fieldTransforms,u,s),h=s.data;return h.setAll(OM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Cf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function lz(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=RM(r.transform,i||null);o!=null&&(n===null&&(n=An.empty()),n.set(r.field,o))}return n||null}function mN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ea(r,i,(o,s)=>cz(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Fo=class extends ca{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pr=class extends ca{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function OM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function yN(t,e,n){let r=new Map;Ee(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,az(s,a,n[i]))}return r}function vN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,sz(o,s,e))}return r}var xf=class extends ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},QE=class extends ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var YE=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&uz(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=SM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=xM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(n,r)=>mN(n,r))&&ea(this.baseMutations,e.baseMutations,(n,r)=>mN(n,r))}},ZE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return tz})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var JE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var XE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var We,ue;function dz(t){switch(t){case N.OK:return H(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return H(15467,{code:t})}}function kM(t){if(t===void 0)return Sr("GRPC error has no .code"),N.UNKNOWN;switch(t){case We.OK:return N.OK;case We.CANCELLED:return N.CANCELLED;case We.UNKNOWN:return N.UNKNOWN;case We.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case We.INTERNAL:return N.INTERNAL;case We.UNAVAILABLE:return N.UNAVAILABLE;case We.UNAUTHENTICATED:return N.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case We.NOT_FOUND:return N.NOT_FOUND;case We.ALREADY_EXISTS:return N.ALREADY_EXISTS;case We.PERMISSION_DENIED:return N.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case We.ABORTED:return N.ABORTED;case We.OUT_OF_RANGE:return N.OUT_OF_RANGE;case We.UNIMPLEMENTED:return N.UNIMPLEMENTED;case We.DATA_LOSS:return N.DATA_LOSS;default:return H(39323,{code:t})}}(ue=We||(We={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";var _N=null;var hz=new Cr([4294967295,4294967295],0);function EN(t){let e=qN().encode(t),n=new pE;return n.update(e),new Uint8Array(n.digest())}function IN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Cr([n,r],0),new Cr([i,o],0)]}var eI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Cr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Cr.fromNumber(r)));return i.compare(hz)===1&&(i=new Cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=EN(e),[r,i]=IN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=EN(e),[r,i]=IN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},So=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Of=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(J.min(),i,new Fe(re),Mr(),ae())}},Ru=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ae(),ae(),ae())}};var Zs=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},kf=class{constructor(e,n){this.targetId=e,this.De=n}},Ff=class{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Lf=class{constructor(){this.ve=0,this.Ce=wN(),this.Fe=Dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),n=ae(),r=ae();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H(38017,{changeType:o})}}),new Ru(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=wN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},tI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Mr(),this.je=Ef(),this.Je=Ef(),this.He=new Fe(re)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(qE(o))if(r===0){let s=new $(o.path);this.Xe(n,s,Rn.newNoDocument(s,J.min()))}else Ee(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}_N?.ct((function(h,p,m,y,w){var R,A,x,U,z,he;let nt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ie=p.unchangedNames;return Ie&&(nt.bloomFilter={applied:w===0,hashCount:(R=Ie?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(U=(x=(A=Ie?.bits)===null||A===void 0?void 0:A.bitmap)===null||x===void 0?void 0:x.length)!==null&&U!==void 0?U:0,padding:(he=(z=Ie?.bits)===null||z===void 0?void 0:z.padding)!==null&&he!==void 0?he:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),nt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Rr(r).toUint8Array()}catch(u){if(u instanceof Rf)return mi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new eI(s,i,o)}catch(u){return mi(u instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&qE(a.target)){let u=new $(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Rn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ae();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Of(e,n,this.He,this.ze,r);return this.ze=Mr(),this.je=Ef(),this.Je=Ef(),this.He=new Fe(re),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Lf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new at(re),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new at(re),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Lf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Ef(){return new Fe($.comparator)}function wN(){return new Fe($.comparator)}var fz={asc:"ASCENDING",desc:"DESCENDING"},pz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gz={and:"AND",or:"OR"},nI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function rI(t,e){return t.useProto3Json||sp(e)?e:{value:e}}function Vf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mz(t,e){return Vf(t,e.toTimestamp())}function er(t){return Ee(!!t,49232),J.fromTimestamp((function(n){let r=Ar(n);return new Ze(r.seconds,r.nanos)})(t))}function _w(t,e){return iI(t,e).canonicalString()}function iI(t,e){let n=(function(i){return new Ne(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function LM(t){let e=Ne.fromString(t);return Ee($M(e),10190,{key:e.toString()}),e}function oI(t,e){return _w(t.databaseId,e.path)}function EE(t,e){let n=LM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(jM(n))}function VM(t,e){return _w(t.databaseId,e)}function yz(t){let e=LM(t);return e.length===4?Ne.emptyPath():jM(e)}function sI(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jM(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function DN(t,e,n){return{name:oI(t,e),fields:n.value.mapValue.fields}}function vz(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),Dt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Dt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:kM(l.code);return new F(h,l.message||"")})(s);n=new Ff(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=EE(t,r.document.name),o=er(r.document.updateTime),s=r.document.createTime?er(r.document.createTime):J.min(),a=new An({mapValue:{fields:r.document.fields}}),u=Rn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Zs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=EE(t,r.document),o=r.readTime?er(r.readTime):J.min(),s=Rn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Zs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=EE(t,r.document),o=r.removedTargetIds||[];n=new Zs([],o,i,null)}else{if(!("filter"in e))return H(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new XE(i,o),a=r.targetId;n=new kf(a,s)}}return n}function _z(t,e){let n;if(e instanceof Fo)n={update:DN(t,e.key,e.value)};else if(e instanceof xf)n={delete:oI(t,e.key)};else if(e instanceof Pr)n={update:DN(t,e.key,e.data),updateMask:Az(e.fieldMask)};else{if(!(e instanceof QE))return H(16599,{Rt:e.type});n={verify:oI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof sa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ko)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof aa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw H(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:mz(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H(27497)})(t,e.precondition)),n}function Ez(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?er(i.updateTime):er(o);return s.isEqual(J.min())&&(s=er(o)),new KE(s,i.transformResults||[])})(n,e))):[]}function Iz(t,e){return{documents:[VM(t,e.path)]}}function wz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VM(t,i);let o=(function(l){if(l.length!==0)return BM(Nn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Ks(m.field),direction:Tz(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=rI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function Dz(t){let e=yz(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=UM(p);return m instanceof Nn&&vM(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(w){return new xo(Qs(w.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,sp(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new ia(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new ia(y,m)})(n.endAt)),Y4(e,i,s,o,a,"F",u,l)}function Cz(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UM(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Qs(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qs(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qs(n.unaryFilter.field);return Qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qs(n.unaryFilter.field);return Qe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Qe.create(Qs(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Nn.create(n.compositeFilter.filters.map(r=>UM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H(1026)}})(n.compositeFilter.op))})(t):H(30097,{filter:t})}function Tz(t){return fz[t]}function bz(t){return pz[t]}function Sz(t){return gz[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Qs(t){return Xt.fromServerFormat(t.fieldPath)}function BM(t){return t instanceof Qe?(function(n){if(n.op==="=="){if(lN(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(uN(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lN(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(uN(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:bz(n.op),value:n.value}}})(t):t instanceof Nn?(function(n){let r=n.getFilters().map(i=>BM(i));return r.length===1?r[0]:{compositeFilter:{op:Sz(n.op),filters:r}}})(t):H(54877,{filter:t})}function Az(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $M(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Nu=class t{constructor(e,n,r,i,o=J.min(),s=J.min(),a=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var aI=class{constructor(e){this.gt=e}};function Rz(t){let e=Dz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?WE(e,e.limit,"L"):e}var jf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),bu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Ar(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Rr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?gM(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):pM(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):H(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=ta,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Re(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),$.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};jf.Ut=new jf;var cI=class{constructor(){this.Dn=new uI}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Po.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},uI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Ne.comparator)).toArray()}};var Xoe=new Uint8Array(0);var CN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HM=41943040,dn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(HM,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var Mu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var TN="LruGarbageCollector",Nz=1048576;function bN([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var lI=class{constructor(e){this.Tr=e,this.buffer=new at(bN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();bN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},dI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(TN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pa(n)?V(TN,"Ignoring IndexedDB error during garbage collection: ",n):await fa(n)}await this.Rr(3e5)})}},hI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(uw.ue);let r=new lI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(CN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Gs()<=oe.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Mz(t,e){return new hI(t,e)}var fI=class{constructor(){this.changes=new Nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var pI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var gI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Du(r.mutation,i,Zn.empty(),Ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){let i=bo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=vu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=bo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Mr(),s=wu(),a=(function(){return wu()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Pr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Du(h.mutation,l,h.mutation.getFieldMask(),Ze.now())):s.set(l.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new pI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=wu(),i=new Fe((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Zn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=SM();h.forEach(m=>{if(!o.has(m)){let y=xM(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(bo()),a=Tu,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(h=>({batchId:a,changes:bM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=vu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=vu();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,m){return new vi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Rn.newInvalidDocument(h)))});let a=vu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Du(h.mutation,l,Zn.empty(),Ze.now()),up(n,l)&&(a=a.insert(u,l))}),a})}};var mI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:er(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:Rz(i.bundledQuery),readTime:er(i.readTime)}})(n)),P.resolve()}};var yI=class{constructor(){this.overlays=new Fe($.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=bo();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=bo(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Fe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=bo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=bo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new JE(n,r));let o=this.kr.get(n);o===void 0&&(o=ae(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var vI=class{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Pu=class{constructor(){this.qr=new at(Ke.Qr),this.$r=new at(Ke.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Ke(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ke(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new $(new Ne([])),r=new Ke(n,e),i=new Ke(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new $(new Ne([])),r=new Ke(n,e),i=new Ke(n,e+1),o=ae();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ke(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return $.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||$.comparator(e.key,n.key)}};var _I=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new at(Ke.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new YE(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?lw:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(re);return n.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new $(o),0),a=new at(re);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new Ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Ke(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var EI=class{constructor(e){this.ni=e,this.docs=(function(){return new Fe($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let r=Mr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Rn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Mr(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||M4(N4(h),r)<=0||(i.has(h.key)||up(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){H(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new II(this)}getSize(e){return P.resolve(this.size)}},II=class extends fI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var wI=class{constructor(e){this.persistence=e,this.ii=new Nr(n=>gw(n),mw),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new Pu,this.targetCount=0,this._i=Mu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Mu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var Uf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new uw(0),this.ci=!1,this.ci=!0,this.li=new vI,this.referenceDelegate=e(this),this.hi=new wI(this),this.indexManager=new cI,this.remoteDocumentCache=(function(i){return new EI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new aI(n),this.Ti=new mI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new _I(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new DI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},DI=class extends PE{constructor(e){super(),this.currentSequenceNumber=e}},CI=class t{constructor(e){this.persistence=e,this.Ai=new Pu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw H(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=$.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Bf=class t{constructor(e,n){this.persistence=e,this.gi=new Nr(r=>k4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Mz(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wf(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var TI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ae(),i=ae();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var bI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var SI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return E0()?8:x4(ot())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new bI;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Gs()<=oe.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Gs()<=oe.DEBUG&&V("QueryEngine","Query:",Ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Gs()<=oe.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):P.resolve())}ps(e,n){if(pN(n))return P.resolve(null);let r=Xn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=WE(n,null,"F"),r=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,WE(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return pN(n)||i.isEqual(J.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Gs()<=oe.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(n)),this.vs(e,s,n,R4(i,Tu)).next(a=>a))})}bs(e,n){let r=new at(CM(e));return n.forEach((i,o)=>{up(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Gs()<=oe.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ws(n)),this.gs.getDocumentsMatchingQuery(e,n,Po.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ew="LocalStore",Pz=3e8,AI=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Fe(re),this.Ms=new Nr(o=>gw(o),mw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function xz(t,e,n,r){return new AI(t,e,n,r)}async function zM(t,e){let n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function Oz(t,e){let n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(R=>{let A=l.docVersions.get(w);Ee(A!==null,48541),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qM(t){let e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function kz(t,e){let n=Q(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,A,x){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Pz?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=Mr(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Fz(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(J.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function Fz(t,e,n){let r=ae(),i=ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Mr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(Ew,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function Lz(t,e){let n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vz(t,e){let n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Nu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function RI(t,e,n){let r=Q(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pa(s))throw s;V(Ew,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function SN(t,e,n){let r=Q(t),i=J.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=Q(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Xn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:ae())).next(a=>(jz(r,J4(e),a),{documents:a,qs:o})))}function jz(t,e,n){let r=t.xs.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var $f=class{constructor(){this.activeTargetIds=iz()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var NI=class{constructor(){this.Fo=new $f,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $f,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var MI=class{xo(e){}shutdown(){}};var AN="ConnectivityMonitor",Hf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(AN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(AN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var If=null;function PI(){return If===null?If=(function(){return 268435456+Math.round(2147483648*Math.random())})():If++,"0x"+If.toString(16)}var IE="RestConnection",Uz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},xI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Nf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=PI(),a=this.Go(e,n.toUriEncodedString());V(IE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=ii(l);return this.jo(e,a,u,r,h).then(p=>(V(IE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw mi(IE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ha})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=Uz[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var OI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var It="WebChannelConnection",kI=class extends xI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=PI();return new Promise((a,u)=>{let l=new gE;l.setWithCredentials(!0),l.listenOnce(mE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yu.NO_ERROR:let p=l.getResponseJson();V(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case yu.TIMEOUT:V(It,`RPC '${e}' ${s} timed out`),u(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:let m=l.getStatus();if(V(It,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let R=(function(x){let U=x.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(U)>=0?U:N.UNKNOWN})(w.status);u(new F(R,w.message))}else u(new F(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(N.UNAVAILABLE,"Connection failed."));break;default:H(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(It,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(It,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=PI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_E(),a=vE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(It,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,w=new OI({Ho:A=>{y?V(It,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(V(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(It,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),R=(A,x,U)=>{A.listen(x,z=>{try{U(z)}catch(he){setTimeout(()=>{throw he},0)}})};return R(p,qs.EventType.OPEN,()=>{y||(V(It,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),R(p,qs.EventType.CLOSE,()=>{y||(y=!0,V(It,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),R(p,qs.EventType.ERROR,A=>{y||(y=!0,mi(It,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),w.__(new F(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,qs.EventType.MESSAGE,A=>{var x;if(!y){let U=A.data[0];Ee(!!U,16349);let z=U,he=z?.error||((x=z[0])===null||x===void 0?void 0:x.error);if(he){V(It,`RPC '${e}' stream ${i} received error:`,he);let nt=he.status,Ie=(function(E){let I=We[E];if(I!==void 0)return kM(I)})(nt),D=he.message;Ie===void 0&&(Ie=N.INTERNAL,D="Unknown error status: "+nt+" with message "+he.message),y=!0,w.__(new F(Ie,D)),p.close()}else V(It,`RPC '${e}' stream ${i} received:`,U),w.a_(U)}}),R(a,yE.STAT_EVENT,A=>{A.stat===vf.PROXY?V(It,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===vf.NOPROXY&&V(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function wE(){return typeof document<"u"?document:null}function lp(t){return new nI(t,!0)}var zf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var RN="PersistentStream",qf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zf(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return V(RN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(V(RN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},FI=class extends qf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=vz(this.serializer,e),r=(function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?er(s.readTime):J.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=sI(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=qE(u)?{documents:Iz(o,u)}:{query:wz(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=FM(o,s.resumeToken);let l=rI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Vf(o,s.snapshotVersion.toTimestamp());let l=rI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Cz(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=sI(this.serializer),n.removeTarget=e,this.k_(n)}},LI=class extends qf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=Ez(e.writeResults,e.commitTime),r=er(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=sI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>_z(this.serializer,r))};this.k_(n)}};var VI=class{},jI=class extends VI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,iI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,iI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},UI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Sr(n),this._a=!1):V("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Lo="RemoteStore",BI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Uo(this)&&(V(Lo,"Restarting streams for network reachability change."),await(async function(u){let l=Q(u);l.Ia.add(4),await Fu(l),l.Aa.set("Unknown"),l.Ia.delete(4),await dp(l)})(this))})}),this.Aa=new UI(r,i)}};async function dp(t){if(Uo(t))for(let e of t.da)await e(!0)}async function Fu(t){for(let e of t.da)await e(!1)}function GM(t,e){let n=Q(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Cw(n)?Dw(n):ga(n).x_()&&ww(n,e))}function Iw(t,e){let n=Q(t),r=ga(n);n.Ta.delete(e),r.x_()&&WM(n,e),n.Ta.size===0&&(r.x_()?r.B_():Uo(n)&&n.Aa.set("Unknown"))}function ww(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).H_(e)}function WM(t,e){t.Ra.$e(e),ga(t).Y_(e)}function Dw(t){t.Ra=new tI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.Aa.aa()}function Cw(t){return Uo(t)&&!ga(t).M_()&&t.Ta.size>0}function Uo(t){return Q(t).Ia.size===0}function KM(t){t.Ra=void 0}async function Bz(t){t.Aa.set("Online")}async function $z(t){t.Ta.forEach((e,n)=>{ww(t,e)})}async function Hz(t,e){KM(t),Cw(t)?(t.Aa.la(e),Dw(t)):t.Aa.set("Unknown")}async function zz(t,e,n){if(t.Aa.set("Online"),e instanceof Ff&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){V(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gf(t,r)}else if(e instanceof Zs?t.Ra.Ye(e):e instanceof kf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(J.min()))try{let r=await qM(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Dt.EMPTY_BYTE_STRING,h.snapshotVersion)),WM(o,u);let p=new Nu(h.target,u,l,h.sequenceNumber);ww(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){V(Lo,"Failed to raise snapshot:",r),await Gf(t,r)}}async function Gf(t,e,n){if(!pa(e))throw e;t.Ia.add(1),await Fu(t),t.Aa.set("Offline"),n||(n=()=>qM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{V(Lo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await dp(t)})}function QM(t,e){return e().catch(n=>Gf(t,n,e))}async function hp(t){let e=Q(t),n=_i(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lw;for(;qz(e);)try{let i=await Lz(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,Gz(e,i)}catch(i){await Gf(e,i)}YM(e)&&ZM(e)}function qz(t){return Uo(t)&&t.Pa.length<10}function Gz(t,e){t.Pa.push(e);let n=_i(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function YM(t){return Uo(t)&&!_i(t).M_()&&t.Pa.length>0}function ZM(t){_i(t).start()}async function Wz(t){_i(t).na()}async function Kz(t){let e=_i(t);for(let n of t.Pa)e.X_(n.mutations)}async function Qz(t,e,n){let r=t.Pa.shift(),i=ZE.from(r,e,n);await QM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hp(t)}async function Yz(t,e){e&&_i(t).Z_&&await(async function(r,i){if((function(s){return dz(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();_i(r).N_(),await QM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await hp(r)}})(t,e),YM(t)&&ZM(t)}async function NN(t,e){let n=Q(t);n.asyncQueue.verifyOperationInProgress(),V(Lo,"RemoteStore received new credentials");let r=Uo(n);n.Ia.add(3),await Fu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await dp(n)}async function Zz(t,e){let n=Q(t);e?(n.Ia.delete(2),await dp(n)):e||(n.Ia.add(2),await Fu(n),n.Aa.set("Unknown"))}function ga(t){return t.Va||(t.Va=(function(n,r,i){let o=Q(n);return o.ia(),new FI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Bz.bind(null,t),e_:$z.bind(null,t),n_:Hz.bind(null,t),J_:zz.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Cw(t)?Dw(t):t.Aa.set("Unknown")):(await t.Va.stop(),KM(t))})),t.Va}function _i(t){return t.ma||(t.ma=(function(n,r,i){let o=Q(n);return o.ia(),new LI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Wz.bind(null,t),n_:Yz.bind(null,t),ea:Kz.bind(null,t),ta:Qz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await hp(t)):(await t.ma.stop(),t.Pa.length>0&&(V(Lo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var $I=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Tw(t,e){if(Sr("AsyncQueue",`${e}: ${t}`),pa(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Wf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=vu(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Kf=class{constructor(){this.fa=new Fe($.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):H(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},ua=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Wf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var HI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},zI=class{constructor(){this.queries=MN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Q(n),o=i.queries;i.queries=MN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new F(N.ABORTED,"Firestore shutting down"))}};function MN(){return new Nr(t=>DM(t),cp)}async function Jz(t,e){let n=Q(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new HI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=Tw(s,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&bw(n)}async function Xz(t,e){let n=Q(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function eq(t,e){let n=Q(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&bw(n)}function tq(t,e,n){let r=Q(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function bw(t){t.Da.forEach(e=>{e.next()})}var qI,PN;(PN=qI||(qI={})).Fa="default",PN.Cache="cache";var GI=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==qI.Cache}};var Qf=class{constructor(e){this.key=e}},Yf=class{constructor(e){this.key=e}},WI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=CM(e),this.eu=new Wf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Kf,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=up(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;m&&y?m.data.isEqual(y.data)?w!==R&&(r.track({type:3,doc:y}),A=!0):this.iu(m,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,w){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{At:A})}};return R(y)-R(w)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new ua(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Kf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Yf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Qf(r))}),n}uu(e){this.Ha=e.qs,this.Za=ae();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ua.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Sw="SyncEngine",KI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},QI=class{constructor(e){this.key=e,this.lu=!1}},YI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Nr(a=>DM(a),cp),this.Tu=new Map,this.Iu=new Set,this.du=new Fe($.comparator),this.Eu=new Map,this.Au=new Pu,this.Ru={},this.Vu=new Map,this.mu=Mu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function nq(t,e,n=!0){let r=rP(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await JM(r,e,n,!0),i}async function rq(t,e){let n=rP(t);await JM(n,e,!0,!1)}async function JM(t,e,n,r){let i=await Vz(t.localStore,Xn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await iq(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&GM(t.remoteStore,i),a}async function iq(t,e,n,r,i){t.gu=(p,m,y)=>(async function(R,A,x,U){let z=A.view.nu(x);z.Ds&&(z=await SN(R.localStore,A.query,!1).then(({documents:D})=>A.view.nu(D,z)));let he=U&&U.targetChanges.get(A.targetId),nt=U&&U.targetMismatches.get(A.targetId)!=null,Ie=A.view.applyChanges(z,R.isPrimaryClient,he,nt);return ON(R,A.targetId,Ie._u),Ie.snapshot})(t,p,m,y);let o=await SN(t.localStore,e,!0),s=new WI(e,o.qs),a=s.nu(o.documents),u=Ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);ON(t,n,l._u);let h=new KI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function oq(t,e,n){let r=Q(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!cp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await RI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Iw(r.remoteStore,i.targetId),ZI(r,i.targetId)}).catch(fa)):(ZI(r,i.targetId),await RI(r.localStore,i.targetId,!0))}async function sq(t,e){let n=Q(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Iw(n.remoteStore,r.targetId))}async function aq(t,e,n){let r=pq(t);try{let i=await(function(s,a){let u=Q(s),l=Ze.now(),h=a.reduce((y,w)=>y.add(w.key),ae()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Mr(),R=ae();return u.Os.getEntries(y,h).next(A=>{w=A,w.forEach((x,U)=>{U.isValidDocument()||(R=R.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(A=>{p=A;let x=[];for(let U of a){let z=lz(U,p.get(U.key).overlayedDocument);z!=null&&x.push(new Pr(U.key,z,mM(z.value.mapValue),Ro.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(A=>{m=A;let x=A.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,A.batchId,x)})}).then(()=>({batchId:m.batchId,changes:bM(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Fe(re)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),await Lu(r,i.changes),await hp(r.remoteStore)}catch(i){let o=Tw(i,"Failed to persist write");n.reject(o)}}async function XM(t,e){let n=Q(t);try{let r=await kz(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ee(s.lu,14607):i.removedDocuments.size>0&&(Ee(s.lu,42227),s.lu=!1))}),await Lu(n,r,e)}catch(r){await fa(r)}}function xN(t,e,n){let r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=Q(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&bw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cq(t,e,n){let r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Fe($.comparator);s=s.insert(o,Rn.newNoDocument(o,J.min()));let a=ae().add(o),u=new Of(J.min(),new Map,new Fe(re),s,a);await XM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Aw(r)}else await RI(r.localStore,e,!1).then(()=>ZI(r,e,n)).catch(fa)}async function uq(t,e){let n=Q(t),r=e.batch.batchId;try{let i=await Oz(n.localStore,e);tP(n,r,null),eP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lu(n,i)}catch(i){await fa(i)}}async function lq(t,e,n){let r=Q(t);try{let i=await(function(s,a){let u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);tP(r,e,n),eP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lu(r,i)}catch(i){await fa(i)}}function eP(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function tP(t,e,n){let r=Q(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ZI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||nP(t,r)})}function nP(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(Iw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Aw(t))}function ON(t,e,n){for(let r of n)r instanceof Qf?(t.Au.addReference(r.key,e),dq(t,r)):r instanceof Yf?(V(Sw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||nP(t,r.key)):H(19791,{yu:r})}function dq(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(V(Sw,"New document in limbo: "+n),t.Iu.add(r),Aw(t))}function Aw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new $(Ne.fromString(e)),r=t.mu.next();t.Eu.set(r,new QI(n)),t.du=t.du.insert(n,r),GM(t.remoteStore,new Nu(Xn(yw(n.path)),r,"TargetPurposeLimboResolution",uw.ue))}}async function Lu(t,e,n){let r=Q(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=TI.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=Q(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!pa(p))throw p;V(Ew,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),w=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(m,R)}}})(r.localStore,o))}async function hq(t,e){let n=Q(t);if(!n.currentUser.isEqual(e)){V(Sw,"User change. New user:",e.toKey());let r=await zM(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new F(N.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lu(n,r.Bs)}}function fq(t,e){let n=Q(t),r=n.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let i=ae(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function rP(t){let e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cq.bind(null,e),e.hu.J_=eq.bind(null,e.eventManager),e.hu.pu=tq.bind(null,e.eventManager),e}function pq(t){let e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lq.bind(null,e),e}var iP=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=lp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return xz(this.persistence,new SI,n.initialUser,this.serializer)}Du(n){return new Uf(CI.Vi,this.serializer)}bu(n){return new NI}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),JI=class extends iP{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ee(this.persistence.referenceDelegate instanceof Bf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new dI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Uf(r=>Bf.Vi(r,n),this.serializer)}};var gq=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hq.bind(null,this.syncEngine),await Zz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new zI})()}createDatastore(n){let r=lp(n.databaseInfo.databaseId),i=(function(s){return new kI(s)})(n.databaseInfo);return(function(s,a,u,l){return new jI(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new BI(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>xN(this.syncEngine,r,0),(function(){return Hf.C()?new Hf:new MI})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let m=new YI(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=Q(o);V(Lo,"RemoteStore shutting down."),s.Ia.add(5),await Fu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var XI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ei="FirestoreClient",ew=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=Cu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(Ei,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(Ei,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Tw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function DE(t,e){t.asyncQueue.verifyOperationInProgress(),V(Ei,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await zM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{mi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{mi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function kN(t,e){t.asyncQueue.verifyOperationInProgress();let n=await mq(t);V(Ei,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>NN(e.remoteStore,i)),t._onlineComponents=e}async function mq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(Ei,"Using user provided OfflineComponentProvider");try{await DE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;mi("Error using user provided cache. Falling back to memory cache: "+n),await DE(t,new iP)}}else V(Ei,"Using default OfflineComponentProvider"),await DE(t,new JI(void 0));return t._offlineComponents}async function oP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(Ei,"Using user provided OnlineComponentProvider"),await kN(t,t._uninitializedComponentsProvider._online)):(V(Ei,"Using default OnlineComponentProvider"),await kN(t,new gq))),t._onlineComponents}function yq(t){return oP(t).then(e=>e.syncEngine)}async function FN(t){let e=await oP(t),n=e.eventManager;return n.onListen=nq.bind(null,e.syncEngine),n.onUnlisten=oq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sq.bind(null,e.syncEngine),n}function sP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var LN=new Map;var aP="firestore.googleapis.com",VN=!0,Zf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aP,this.ssl=VN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:VN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nz)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},la=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CE;switch(r.type){case"firstParty":return new AE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=LN.get(n);r&&(V("ComponentProvider","Removing Datastore"),LN.delete(n),r.terminate())})(this),Promise.resolve()}};function cP(t,e,n,r={}){var i;t=_u(t,la);let o=ii(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Hh(`https://${u}`),zh("Firestore",!0)),s.host!==aP&&s.host!==u&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Gn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=st.MOCK_USER;else{h=p0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new st(m)}t._authCredentials=new TE(new Tf(h,p))}}var Vo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},wt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ku(n,t._jsonSchema))return new t(e,r||null,new $(Ne.fromString(n.referencePath)))}};wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Ye("string",wt._jsonSchemaVersion),referencePath:Ye("string")};var hi=class t extends Vo{constructor(e,n,r){super(e,n,yw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function uP(t,e,...n){if(t=ht(t),GN("collection","path",e),t instanceof la){let r=Ne.fromString(e,...n);return tN(r),new hi(t,null,r)}{if(!(t instanceof wt||t instanceof hi))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return tN(r),new hi(t.firestore,null,r)}}function lP(t,e,...n){if(t=ht(t),arguments.length===1&&(e=Cu.newId()),GN("doc","path",e),t instanceof la){let r=Ne.fromString(e,...n);return eN(r),new wt(t,null,new $(r))}{if(!(t instanceof wt||t instanceof hi))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return eN(r),new wt(t.firestore,t instanceof hi?t.converter:null,new $(r))}}var jN="AsyncQueue",Jf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zf(this,"async_queue_retry"),this.oc=()=>{let r=wE();r&&V(jN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=wE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=wE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new br;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pa(e))throw e;V(jN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Sr("INTERNAL UNHANDLED ERROR: ",UN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=$I.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&H(47125,{hc:UN(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function UN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function BN(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var da=class extends la{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jf(e),this._firestoreClient=void 0,await e}}};function dP(t,e){let n=typeof t=="object"?t:_o(),r=typeof t=="string"?t:e||Nf,i=js(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=f0("firestore");o&&cP(i,...o)}return i}function hP(t){if(t._terminated)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vq(t),t._firestoreClient}function vq(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new xE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,sP(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ew(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var fi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Dt.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:Ye("string",fi._jsonSchemaVersion),bytes:Ye("string")};var xu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xf=class{constructor(e){this._methodName=e}};var pi=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(ku(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:Ye("string",pi._jsonSchemaVersion),latitude:Ye("number"),longitude:Ye("number")};var gi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:Ye("string",gi._jsonSchemaVersion),vectorValues:Ye("object")};var _q=/^__.*__$/,tw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fo(e,this.data,n,this.fieldTransforms)}};function fP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ec:t})}}var nw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ep(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fP(this.Ec)&&_q.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},rw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lp(e)}Dc(e,n,r,i=!1){return new nw({Ec:e,methodName:n,bc:r,path:Xt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function pP(t){let e=t._freezeSettings(),n=lp(t._databaseId);return new rw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Eq(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);yP("Data must be an object, but it was:",s,r);let a=gP(r,s),u,l;if(o.merge)u=new Zn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=wq(e,p,n);if(!s.contains(m))throw new F(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Cq(h,m)||h.push(m)}u=new Zn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new tw(new An(a),u,l)}function Iq(t,e,n,r=!1){return Rw(n,t.Dc(r?4:3,e))}function Rw(t,e){if(mP(t=ht(t)))return yP("Unsupported field value:",e,t),gP(t,e);if(t instanceof Xf)return(function(r,i){if(!fP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Rw(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ze.fromDate(r);return{timestampValue:Vf(i.serializer,o)}}if(r instanceof Ze){let o=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vf(i.serializer,o)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fi)return{bytesValue:FM(i.serializer,r._byteString)};if(r instanceof wt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_w(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gi)return(function(s,a){return{mapValue:{fields:{[hw]:{stringValue:fw},[ta]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return vw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${op(r)}`)})(t,e)}function gP(t,e){let n={};return cM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(t,(r,i)=>{let o=Rw(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function mP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof pi||t instanceof fi||t instanceof wt||t instanceof Xf||t instanceof gi)}function yP(t,e,n){if(!mP(n)||!WN(n)){let r=op(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function wq(t,e,n){if((e=ht(e))instanceof xu)return e._internalPath;if(typeof e=="string")return vP(t,e);throw ep("Field path arguments must be of type string or ",t,!1,void 0,n)}var Dq=new RegExp("[~\\*/\\[\\]]");function vP(t,e,n){if(e.search(Dq)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xu(...e.split("."))._internalPath}catch{throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ep(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(N.INVALID_ARGUMENT,a+t+u)}function Cq(t,e){return t.some(n=>n.isEqual(e))}var tp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(fp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},iw=class extends tp{data(){return super.data()}};function fp(t,e){return typeof e=="string"?vP(t,e):e instanceof xu?e._internalPath:e._delegate._internalPath}function Tq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ou=class{},np=class extends Ou{};function _P(t,e,...n){let r=[];e instanceof Ou&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof ow).length,a=o.filter(u=>u instanceof rp).length;if(s>1||s>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var rp=class t extends np{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return wP(e._query,n),new Vo(e.firestore,e.converter,GE(e._query,n))}_parse(e){let n=pP(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){HN(p,h);let w=[];for(let R of p)w.push($N(u,o,R));m={arrayValue:{values:w}}}else m=$N(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||HN(p,h),m=Iq(a,s,p,h==="in"||h==="not-in");return Qe.create(l,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function EP(t,e,n){let r=e,i=fp("where",t);return rp._create(i,r,n)}var ow=class t extends Ou{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)wP(s,u),s=GE(s,u)})(e._query,n),new Vo(e.firestore,e.converter,GE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var sw=class t extends np{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xo(o,s)})(e._query,this._field,this._direction);return new Vo(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new vi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function IP(t,e="asc"){let n=e,r=fp("orderBy",t);return sw._create(r,n)}function $N(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wM(e)&&n.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ne.fromString(n));if(!$.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cN(t,new $(r))}if(n instanceof wt)return cN(t,n._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(n)}.`)}function HN(t,e){if(!Array.isArray(t)||t.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wP(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var aw=class{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return jo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ta].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Re(s.doubleValue));return new gi(o)}convertGeoPoint(e){return new pi(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){let n=Ar(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);Ee($M(r),9688,{name:e});let i=new Mf(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||Sr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function bq(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ao=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},No=class t extends tp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Js(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(fp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};No._jsonSchemaVersion="firestore/documentSnapshot/1.0",No._jsonSchema={type:Ye("string",No._jsonSchemaVersion),bundleSource:Ye("string","DocumentSnapshot"),bundleName:Ye("string"),bundle:Ye("string")};var Js=class extends No{data(e={}){return super.data(e)}},Xs=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ao(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Js(this._firestore,this._userDataWriter,r.key,r,new Ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Js(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Js(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Sq(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Sq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:t})}}Xs._jsonSchemaVersion="firestore/querySnapshot/1.0",Xs._jsonSchema={type:Ye("string",Xs._jsonSchemaVersion),bundleSource:Ye("string","QuerySnapshot"),bundleName:Ye("string"),bundle:Ye("string")};var ip=class extends aw{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}};function DP(t,e){let n=_u(t.firestore,da),r=lP(t),i=bq(t.converter,e);return Aq(n,[Eq(pP(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ro.exists(!1))]).then(()=>r)}function Nw(t,...e){var n,r,i;t=ht(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||BN(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(BN(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof wt)l=_u(t.firestore,da),h=yw(t._key.path),u={next:p=>{e[s]&&e[s](Rq(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=_u(t,Vo);l=_u(p.firestore,da),h=p._query;let m=new ip(l);u={next:y=>{e[s]&&e[s](new Xs(l,m,p,y))},error:e[s+1],complete:e[s+2]},Tq(t._query)}return(function(m,y,w,R){let A=new XI(R),x=new GI(y,A,w);return m.asyncQueue.enqueueAndForget(async()=>Jz(await FN(m),x)),()=>{A.Ou(),m.asyncQueue.enqueueAndForget(async()=>Xz(await FN(m),x))}})(hP(l),h,a,u)}function Aq(t,e){return(function(r,i){let o=new br;return r.asyncQueue.enqueueAndForget(async()=>aq(await yq(r),i,o)),o.promise})(hP(t),e)}function Rq(t,e,n){let r=n.docs.get(e._key),i=new ip(t);return new No(t,i,e._key,r,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ha=i})(si),Tn(new xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new da(new bE(r.getProvider("auth-internal")),new RE(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ke(YR,ZR,e),ke(YR,ZR,"esm2017")})();var pp=function(){return pp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},pp.apply(this,arguments)};var Pq={includeMetadataChanges:!1};function CP(t,e){return e===void 0&&(e=Pq),new X(function(n){var r=Nw(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function TP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:pp(pp({},r),(n={},n[e.idField]=t.id,n))}function bP(t){return CP(t,{includeMetadataChanges:!0}).pipe(we(function(e){return e.docs}))}function SP(t,e){return e===void 0&&(e={}),bP(t).pipe(we(function(n){return n.map(function(r){return TP(r,e)})}))}var Bo=class{constructor(e){return e}},AP="firestore",Mw=class{constructor(){return Bs(AP)}};var Pw=new j("angularfire2.firestore-instances");function xq(t,e){let n=iu(AP,t,e);return n&&new Bo(n)}function Oq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bo(r)}}var kq={provide:Mw,deps:[[new Wt,Pw]]},Fq={provide:Bo,useFactory:xq,deps:[[new Wt,Pw],Er]};function RP(t,...e){return ke("angularfire",ai.full,"fst"),Ht([Fq,kq,{provide:Pw,useFactory:Oq(t),multi:!0,deps:[Ae,ze,ci,Io,[new Wt,mu],[new Wt,$s],...e]}])}var NP=Et(SP,!0);var MP=Et(DP,!0,2);var PP=Et(uP,!0,2);var xP=Et(dP,!0);var OP=Et(IP,!0,2),kP=Et(_P,!0,2);var FP=Et(EP,!0,2);var LP={production:!1,firebase:{apiKey:"AIzaSyDeExC8bd-Xdt3Ud69pnkOkjKyGMtFTpyQ",authDomain:"financeproject-2026.firebaseapp.com",projectId:"financeproject-2026",storageBucket:"financeproject-2026.firebasestorage.app",messagingSenderId:"673940962766",appId:"1:673940962766:web:3e1a237289c022e48d7f9f"}};var VP={providers:[Lm(),r_(c0),B0(()=>$0(LP.firebase)),HR(()=>qR()),RP(()=>xP())]};var KP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ce(ro),ce(Kr))};static \u0275dir=qe({type:t})}return t})(),Dp=(()=>{class t extends KP{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Bn(t)))(i||t)}})();static \u0275dir=qe({type:t,features:[Kt]})}return t})(),zu=new j("");var Lq={provide:zu,useExisting:en(()=>Cp),multi:!0};function Vq(){let t=cn()?cn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var jq=new j(""),Cp=(()=>{class t extends KP{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Vq())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ce(ro),ce(Kr),ce(jq,8))};static \u0275dir=qe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Qt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[mr([Lq]),Kt]})}return t})();function Uq(t){return t==null||Bq(t)===0}function Bq(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var kw=new j(""),QP=new j("");function $q(t){return Uq(t.value)?{required:!0}:null}function jP(t){return null}function YP(t){return t!=null}function ZP(t){return gr(t)?Oe(t):t}function JP(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function XP(t,e){return e.map(n=>n(t))}function Hq(t){return!t.validate}function ex(t){return t.map(e=>Hq(e)?e:n=>e.validate(n))}function zq(t){if(!t)return null;let e=t.filter(YP);return e.length==0?null:function(n){return JP(XP(n,e))}}function Fw(t){return t!=null?zq(ex(t)):null}function qq(t){if(!t)return null;let e=t.filter(YP);return e.length==0?null:function(n){let r=XP(n,e).map(ZP);return Sg(r).pipe(we(JP))}}function Lw(t){return t!=null?qq(ex(t)):null}function UP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Gq(t){return t._rawValidators}function Wq(t){return t._rawAsyncValidators}function xw(t){return t?Array.isArray(t)?t:[t]:[]}function mp(t,e){return Array.isArray(t)?t.includes(e):t===e}function BP(t,e){let n=xw(e);return xw(t).forEach(i=>{mp(n,i)||n.push(i)}),n}function $P(t,e){return xw(e).filter(n=>!mp(t,n))}var yp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Fw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Lw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},va=class extends yp{name;get formDirective(){return null}get path(){return null}},Hu=class extends yp{_parent=null;name=null;valueAccessor=null},vp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var tx=(()=>{class t extends vp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ce(Hu,2))};static \u0275dir=qe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&$n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Kt]})}return t})(),nx=(()=>{class t extends vp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ce(va,10))};static \u0275dir=qe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&$n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Kt]})}return t})();var Vu="VALID",gp="INVALID",ma="PENDING",ju="DISABLED",Ii=class{},_p=class extends Ii{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Bu=class extends Ii{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},$u=class extends Ii{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},ya=class extends Ii{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Ow=class extends Ii{source;constructor(e){super(),this.source=e}},Ep=class extends Ii{source;constructor(e){super(),this.source=e}};function rx(t){return(Tp(t)?t.validators:t)||null}function Kq(t){return Array.isArray(t)?Fw(t):t||null}function ix(t,e){return(Tp(e)?e.asyncValidators:t)||null}function Qq(t){return Array.isArray(t)?Lw(t):t||null}function Tp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Yq(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new L(1e3,"");if(!r[n])throw new L(1001,"")}function Zq(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new L(1002,"")})}var Ip=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ue(this.statusReactive)}set status(e){Ue(()=>this.statusReactive.set(e))}_status=Ts(()=>this.statusReactive());statusReactive=sn(void 0);get valid(){return this.status===Vu}get invalid(){return this.status===gp}get pending(){return this.status==ma}get disabled(){return this.status===ju}get enabled(){return this.status!==ju}errors;get pristine(){return Ue(this.pristineReactive)}set pristine(e){Ue(()=>this.pristineReactive.set(e))}_pristine=Ts(()=>this.pristineReactive());pristineReactive=sn(!0);get dirty(){return!this.pristine}get touched(){return Ue(this.touchedReactive)}set touched(e){Ue(()=>this.touchedReactive.set(e))}_touched=Ts(()=>this.touchedReactive());touchedReactive=sn(!1);get untouched(){return!this.touched}_events=new rt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(BP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($P(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($P(e,this._rawAsyncValidators))}hasValidator(e){return mp(this._rawValidators,e)}hasAsyncValidator(e){return mp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new $u(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new $u(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Bu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Bu(!0,r))}markAsPending(e={}){this.status=ma;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ya(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ju,this.errors=null,this._forEachChild(i=>{i.disable(ee(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _p(this.value,r)),this._events.next(new ya(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Vu,this._forEachChild(r=>{r.enable(ee(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vu||this.status===ma)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _p(this.value,n)),this._events.next(new ya(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ju:Vu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ma,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=ZP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ya(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?ju:this.errors?gp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ma)?ma:this._anyControlsHaveStatus(gp)?gp:Vu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Bu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new $u(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Kq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Qq(this._rawAsyncValidators)}},wp=class extends Ip{constructor(e,n,r){super(rx(n),ix(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Zq(this,!0,e),Object.keys(e).forEach(r=>{Yq(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,ee(k({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Ep(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Vw=new j("",{factory:()=>jw}),jw="always";function Jq(t,e){return[...e.path,t]}function ox(t,e,n=jw){sx(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),e3(t,e),n3(t,e),t3(t,e),Xq(t,e)}function HP(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Xq(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function sx(t,e){let n=Gq(t);e.validator!==null?t.setValidators(UP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Wq(t);e.asyncValidator!==null?t.setAsyncValidators(UP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();HP(e._rawValidators,i),HP(e._rawAsyncValidators,i)}function e3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ax(t,e)})}function t3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ax(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ax(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function n3(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function r3(t,e){t==null,sx(t,e)}function i3(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function o3(t){return Object.getPrototypeOf(t.constructor)===Dp}function s3(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function a3(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Cp?n=o:o3(o)?r=o:i=o}),i||r||n||null}var c3={provide:va,useExisting:en(()=>Uw)},Uu=Promise.resolve(),Uw=(()=>{class t extends va{callSetDisabledState;get submitted(){return Ue(this.submittedReactive)}_submitted=Ts(()=>this.submittedReactive());submittedReactive=sn(!1);_directives=new Set;form;ngSubmit=new He;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new wp({},Fw(n),Lw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Uu.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),ox(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Uu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Uu.then(()=>{let r=this._findContainer(n.path),i=new wp({});r3(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Uu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Uu.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),s3(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Ow(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(ce(kw,10),ce(QP,10),ce(Vw,8))};static \u0275dir=qe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Qt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[mr([c3]),Kt]})}return t})();function zP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function qP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var u3=class extends Ip{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(rx(n),ix(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(qP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Ep(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var l3={provide:Hu,useExisting:en(()=>Bw)},GP=Promise.resolve(),Bw=(()=>{class t extends Hu{_changeDetectorRef;callSetDisabledState;control=new u3;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new He;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=a3(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),i3(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ox(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){GP.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&ih(r);GP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Jq(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ce(va,9),ce(kw,10),ce(QP,10),ce(zu,10),ce(uo,8),ce(Vw,8))};static \u0275dir=qe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[mr([l3]),Kt,fr]})}return t})();var cx=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=qe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),d3={provide:zu,useExisting:en(()=>$w),multi:!0},$w=(()=>{class t extends Dp{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Bn(t)))(i||t)}})();static \u0275dir=qe({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Qt("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[mr([d3]),Kt]})}return t})();var h3={provide:zu,useExisting:en(()=>bp),multi:!0};function ux(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function f3(t){return t.split(":")[0]}var bp=(()=>{class t extends Dp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=M(Zr).injector;destroyRef=M(_n);cdr=M(uo);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,zd({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=ux(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=f3(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Bn(t)))(i||t)}})();static \u0275dir=qe({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Qt("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[mr([h3]),Kt]})}return t})(),lx=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(ux(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(ce(Kr),ce(ro),ce(bp,9))};static \u0275dir=qe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),p3={provide:zu,useExisting:en(()=>dx),multi:!0};function WP(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function g3(t){return t.split(":")[0]}var dx=(()=>{class t extends Dp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=g3(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Bn(t)))(i||t)}})();static \u0275dir=qe({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Qt("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[mr([p3]),Kt]})}return t})(),hx=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(WP(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(WP(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(ce(Kr),ce(ro),ce(dx,9))};static \u0275dir=qe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var m3=(()=>{class t{_validator=jP;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):jP,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=qe({type:t,features:[fr]})}return t})();var y3={provide:kw,useExisting:en(()=>Hw),multi:!0};var Hw=(()=>{class t extends m3{required;inputName="required";normalizeInput=ih;createValidator=n=>$q;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Bn(t)))(i||t)}})();static \u0275dir=qe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Xd("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[mr([y3]),Kt]})}return t})();var v3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yr({type:t});static \u0275inj=ur({})}return t})();var fx=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Vw,useValue:n.callSetDisabledState??jw}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yr({type:t});static \u0275inj=ur({imports:[v3]})}return t})();var _a=class t{firestore=M(Bo);transactionsCollection=PP(this.firestore,"transactions");addTransaction(e,n){let r=ee(k({},e),{userId:n,date:new Date});return MP(this.transactionsCollection,r)}getTransactions(e){let n=kP(this.transactionsCollection,FP("userId","==",e),OP("date","desc"));return NP(n,{idField:"id"})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Sp=class t{userId;transactionService=M(_a);model={amount:0,type:"expense",category:"Comida",description:"",date:new Date};async onSubmit(){if(this.userId){console.log("Guardando...",this.model);try{await this.transactionService.addTransaction(this.model,this.userId),alert("\xA1Transacci\xF3n guardada con \xE9xito!"),this.model=ee(k({},this.model),{amount:0,description:""})}catch(e){console.error(e),alert("Error al guardar")}}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pr({type:t,selectors:[["app-add-transaction"]],inputs:{userId:"userId"},decls:31,vars:6,consts:[[1,"card-style","form-container"],[1,"header"],[1,"emoji-header"],[3,"ngSubmit"],[1,"row"],[1,"form-group","type-select"],[1,"select-wrapper"],["name","type",3,"ngModelChange","ngModel"],["value","income"],["value","expense"],[1,"form-group","amount-input"],["type","number","name","amount","placeholder","$0","required","",3,"ngModelChange","ngModel"],[1,"form-group"],["type","text","name","category","placeholder","Ej: Comida, Sueldo, Netflix",3,"ngModelChange","ngModel"],["type","text","name","description","placeholder","Detalles adicionales...",3,"ngModelChange","ngModel"],["type","submit",1,"btn-save"]],template:function(n,r){n&1&&(fe(0,"div",0)(1,"div",1)(2,"h2"),ve(3,"Nueva Transacci\xF3n"),De(),fe(4,"span",2),ve(5,"\u{1F4B8}"),De()(),fe(6,"form",3),Qt("ngSubmit",function(){return r.onSubmit()}),fe(7,"div",4)(8,"div",5)(9,"label"),ve(10,"Tipo"),De(),fe(11,"div",6)(12,"select",7),co("ngModelChange",function(o){return ws(r.model.type,o)||(r.model.type=o),o}),fe(13,"option",8),ve(14,"Ingreso (+)"),De(),fe(15,"option",9),ve(16,"Gasto (-)"),De()()()(),fe(17,"div",10)(18,"label"),ve(19,"Monto"),De(),fe(20,"input",11),co("ngModelChange",function(o){return ws(r.model.amount,o)||(r.model.amount=o),o}),De()()(),fe(21,"div",12)(22,"label"),ve(23,"Categor\xEDa"),De(),fe(24,"input",13),co("ngModelChange",function(o){return ws(r.model.category,o)||(r.model.category=o),o}),De()(),fe(25,"div",12)(26,"label"),ve(27,"Nota (Opcional)"),De(),fe(28,"input",14),co("ngModelChange",function(o){return ws(r.model.description,o)||(r.model.description=o),o}),De()(),fe(29,"button",15),ve(30," Guardar Movimiento "),De()()()),n&2&&(Be(12),$n("is-expense",r.model.type==="expense"),ao("ngModel",r.model.type),Be(8),ao("ngModel",r.model.amount),Be(4),ao("ngModel",r.model.category),Be(4),ao("ngModel",r.model.description))},dependencies:[ti,fx,cx,lx,hx,Cp,$w,bp,tx,nx,Hw,Bw,Uw],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#111827}.header[_ngcontent-%COMP%]   .emoji-header[_ngcontent-%COMP%]{font-size:1.5rem}.row[_ngcontent-%COMP%]{display:flex;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;width:100%}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#4b5563;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e5e7eb;border-radius:10px;font-size:1rem;background-color:#f9fafb;transition:all .2s;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background-color:#fff;box-shadow:0 0 0 3px #3b82f61a}select[_ngcontent-%COMP%]{appearance:none;font-weight:700}select.is-expense[_ngcontent-%COMP%]{color:#dc2626}select[_ngcontent-%COMP%]:not(.is-expense){color:#059669}.amount-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;letter-spacing:.5px}.btn-save[_ngcontent-%COMP%]{width:100%;padding:.875rem;background-color:#2563eb;color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .2s;margin-top:.5rem}.btn-save[_ngcontent-%COMP%]:hover{background-color:#1d4ed8;transform:translateY(-1px)}.btn-save[_ngcontent-%COMP%]:active{transform:translateY(0)}"]})};var E3=(t,e)=>e.id;function I3(t,e){if(t&1&&(Nt(0,"div",4)(1,"div",5),ve(2),Mt(),Nt(3,"div",6)(4,"span",7),ve(5),Mt(),Nt(6,"span",8),ve(7),Xr(8,"date"),Mt()(),Nt(9,"div",9),ve(10),Xr(11,"currency"),Mt()()),t&2){let n=e.$implicit;Be(),$n("expense",n.type==="expense"),Be(),bc(" ",n.type==="expense"?"\u{1F4C9}":"\u{1F4C8}"," "),Be(3),nh(n.category),Be(2),Sc(" ",n.description||"Sin descripci\xF3n"," \u2022 ",Qy(8,10,n.date==null?null:n.date.toDate(),"shortDate")," "),Be(2),$n("expense-text",n.type==="expense"),Be(),Sc(" ",n.type==="expense"?"-":"+"," ",Yy(11,13,n.amount,"COP","symbol-narrow","1.0-0")," ")}}function w3(t,e){if(t&1&&(Nt(0,"div",2),Gy(1,I3,12,18,"div",4,E3),Mt()),t&2){let n=Is();Be(),Wy(n)}}function D3(t,e){t&1&&(Nt(0,"div",3)(1,"span",10),ve(2,"\u{1F4ED}"),Mt(),Nt(3,"p"),ve(4,"A\xFAn no tienes movimientos."),Mt(),Nt(5,"small"),ve(6,"\xA1Registra el primero arriba!"),Mt()())}function C3(t,e){t&1&&io(0,w3,3,0,"div",2)(1,D3,7,0,"div",3),t&2&&so(e.length>0?0:1)}function T3(t,e){t&1&&(Nt(0,"div",1),eh(1,"div",11),Nt(2,"p"),ve(3,"Cargando tus finanzas..."),Mt()())}var Ap=class t{userId;transactionService=M(_a);transactions$;ngOnChanges(e){this.userId&&(this.transactions$=this.transactionService.getTransactions(this.userId))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pr({type:t,selectors:[["app-transaction-list"]],inputs:{userId:"userId"},features:[fr],decls:6,vars:3,consts:[[1,"card-style","list-container"],[1,"loading"],[1,"transactions-wrapper"],[1,"empty-state"],[1,"transaction-row"],[1,"icon-indicator"],[1,"info"],[1,"category"],[1,"date-desc"],[1,"amount"],[1,"empty-icon"],[1,"spinner"]],template:function(n,r){if(n&1&&(Nt(0,"div",0)(1,"h3"),ve(2,"Historial Reciente"),Mt(),io(3,C3,2,1),Xr(4,"async"),oo(5,T3,4,0,"div",1),Mt()),n&2){let i;Be(3),so((i=Ds(4,1,r.transactions$))?3:5,i)}},dependencies:[ti,Oc,pv,fv],styles:['@charset "UTF-8";.list-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;font-size:1.1rem;color:#6b7280}.transactions-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.transaction-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem 0;border-bottom:1px solid #f3f4f6}.transaction-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.icon-indicator[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem;background-color:#d1fae5;margin-right:1rem}.icon-indicator.expense[_ngcontent-%COMP%]{background-color:#fee2e2}.info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.info[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{font-weight:600;color:#111827}.info[_ngcontent-%COMP%]   .date-desc[_ngcontent-%COMP%]{font-size:.8rem;color:#9ca3af}.amount[_ngcontent-%COMP%]{font-weight:700;color:#059669;white-space:nowrap}.amount.expense-text[_ngcontent-%COMP%]{color:#dc2626}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem 0;color:#6b7280}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:2rem;display:block;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.85rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#6b7280}']})};var Rp=class t{auth=M(To);user$=zR(this.auth);constructor(){}login(){let e=new sE;return GR(this.auth,e)}logout(){return WR(this.auth)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};function b3(t,e){if(t&1){let n=th();fe(0,"div",4),Jr(1,"img",8),fe(2,"button",9),Qt("click",function(){lc(n);let i=Is();return dc(i.logout())}),fe(3,"span",10),ve(4,"\u{1F6AA}"),De(),ve(5," Salir "),De()()}t&2&&(Be(),Es("src",e.photoURL,by))}function S3(t,e){if(t&1&&(fe(0,"div",6),Jr(1,"app-add-transaction",11)(2,"br")(3,"app-transaction-list",11),De()),t&2){let n=e;Be(),Es("userId",n.uid),Be(2),Es("userId",n.uid)}}function A3(t,e){if(t&1){let n=th();fe(0,"div",7)(1,"div",12)(2,"div",13)(3,"span",14),ve(4,"\u{1F44B}"),De(),fe(5,"h2"),ve(6,"Bienvenido"),De(),fe(7,"p"),ve(8,"Toma el control de tu dinero hoy mismo."),De()(),fe(9,"button",15),Qt("click",function(){lc(n);let i=Is();return dc(i.login())}),ld(),fe(10,"svg",16),Jr(11,"path",17)(12,"path",18)(13,"path",19)(14,"path",20),De(),ve(15," Continuar con Google "),De()()()}}var Np=class t{authService=M(Rp);login(){this.authService.login().catch(e=>console.error(e))}logout(){this.authService.logout()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pr({type:t,selectors:[["app-root"]],decls:13,vars:6,consts:[[1,"app-container"],[1,"app-header"],[1,"brand"],[1,"logo-icon"],[1,"user-profile"],[1,"main-content"],[1,"dashboard-grid"],[1,"login-container"],["alt","Avatar",1,"avatar",3,"src"],["title","Cerrar Sesi\xF3n",1,"btn-logout",3,"click"],[1,"icon-logout"],[3,"userId"],[1,"card-style","login-card"],[1,"login-header"],[1,"login-icon"],[1,"btn-google",3,"click"],["viewBox","0 0 24 24",1,"google-logo"],["d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z","fill","#4285F4"],["d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z","fill","#34A853"],["d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z","fill","#FBBC05"],["d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z","fill","#EA4335"]],template:function(n,r){if(n&1&&(fe(0,"div",0)(1,"header",1)(2,"div",2)(3,"span",3),ve(4,"\u{1F680}"),De(),fe(5,"h1"),ve(6,"Finanzas"),De()(),io(7,b3,6,1,"div",4),Xr(8,"async"),De(),fe(9,"main",5),io(10,S3,4,2,"div",6),Xr(11,"async"),oo(12,A3,16,0,"div",7),De()()),n&2){let i,o;Be(7),so((i=Ds(8,2,r.authService.user$))?7:-1,i),Be(3),so((o=Ds(11,4,r.authService.user$))?10:12,o)}},dependencies:[ti,Sp,Ap,Oc],styles:['@charset "UTF-8";.app-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}.app-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;margin-bottom:1.5rem}.app-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.app-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:#111827;margin:0;letter-spacing:-.5px}.app-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:1.5rem}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:#fff;padding:.35rem .5rem .35rem .35rem;border-radius:50px;box-shadow:0 1px 3px #0000001a}.user-profile[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:50%;object-fit:cover;border:2px solid #e5e7eb}.user-profile[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{background:transparent;border:none;color:#ef4444;font-weight:600;font-size:.9rem;cursor:pointer;padding:.5rem .8rem;border-radius:20px;transition:background .2s;display:flex;align-items:center;gap:.3rem}.user-profile[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background-color:#fee2e2}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:60vh}.login-card[_ngcontent-%COMP%]{text-align:center;max-width:400px;width:100%;padding:3rem 2rem}.login-card[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{margin-bottom:2rem}.login-card[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .login-icon[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:1rem}.login-card[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin:0 0 .5rem;color:#1f2937}.login-card[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0}.btn-google[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem;width:100%;background-color:#fff;color:#3c4043;border:1px solid #dadce0;border-radius:8px;padding:.75rem 1rem;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s;box-shadow:0 1px 2px #0000000d}.btn-google[_ngcontent-%COMP%]   .google-logo[_ngcontent-%COMP%]{width:20px;height:20px}.btn-google[_ngcontent-%COMP%]:hover{background-color:#f8faff;border-color:#d2e3fc;box-shadow:0 1px 3px #4285f44d;color:#1a73e8}.btn-google[_ngcontent-%COMP%]:active{background-color:#ecf3fe}.main-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}']})};Dv(Np,VP).catch(t=>console.error(t));
